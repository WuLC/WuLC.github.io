<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>吴良超的学习笔记</title>
  
  
  <link href="https://wulc.me/atom.xml" rel="self"/>
  
  <link href="https://wulc.me/"/>
  <updated>2023-08-03T15:02:52.867Z</updated>
  <id>https://wulc.me/</id>
  
  <author>
    <name>良超</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Quantitative Trading:How to Build Your Own Algorithmic Trading Business(1)</title>
    <link href="https://wulc.me/2023/07/30/Quantitative%20Trading:%20How%20to%20Build%20Your%20Own%20Algorithmic%20Trading%20Business(1)/"/>
    <id>https://wulc.me/2023/07/30/Quantitative%20Trading:%20How%20to%20Build%20Your%20Own%20Algorithmic%20Trading%20Business(1)/</id>
    <published>2023-07-30T13:53:19.000Z</published>
    <updated>2023-08-03T15:02:52.867Z</updated>
    
    <content type="html"><![CDATA[<p>"<ahref="https://www.myquant.cn/uploads/default/original/1X/4c7037365a4bf1623734c1c899baed7855061ace.pdf">QuantitativeTrading: How to Build Your Own Algorithmic Trading Business</a>" byErnie Chan is a comprehensive guide that explores the world ofquantitative trading and provides practical advice for building aalgorithmic trading business, especially for individuals interested inquantitative trading.</p><p>It covers essential concepts, methodologies, and practical tips tohelp readers develop and implement their own algorithmic tradingstrategies while effectively managing risk and building a sustainabletrading business.</p><p>Due to the significant benefits I received from reading this book, Iwant to write down some of the most important takeways I get from thisbook, with the hope that it can also be useful to you.</p><p>This passage is about the first four chapters, which introduce basicrequirements for independent traders, including search for ideas,perform backtest, and what we need before doing actual trading.</p><span id="more"></span><p>Quantitative trading, also known as algorithmic trading, is thetrading of securities based strictly on the buy/sell decisions ofcomputer algorithms.</p><p>It relies on advanced mathematical and statistical models, computeralgorithms, and data analysis to make trading decisions. It involves theuse of quantitative techniques to identify patterns, trends, andopportunities in financial markets and execute trades automaticallywithout human intervention.</p><p>The quantitative trading this book focuses on is called<strong>statistical arbitrage trading</strong>, which deals with thesimplest financial instruments: stocks, futures, and sometimescurrencies. The book argues that one does not need an advanced degree tobecome a statistical arbitrage trader, compared to those institutionalquantitative traders who received their advanced degrees as physicists,mathematicians, engineers, focusing on trading complex derivativeinstruments</p><h2 id="independent-quantative-trading">Independent QuantativeTrading</h2><p>As this book is focus on independent quantitative traders, it listssome demands for anyone who wants to venturing into this field, the mostimportant one I though is the following one</p><p>When one plunges into independent trading, fear of losses and ofbeing isolated from the rest of the world is natural, and so it helps tohave both a prior appreciation of risks and some savings to lean on. Itis important not to have a need for immediate profits to sustain yourdaily living, as strategies have intrinsic rates of returns that cannotbe hurried</p><p><strong>The ideal independent quantitative trader is thereforesomeone who has some prior experience with finance or computerprogramming, who has enough savings to withstand the inevitable lossesand periods without income, and whose emotion has found the rightbalance between fear and greed</strong>.</p><p>The book also talks about how much time to take for independentquantative trading, since most people who enter this field aims forfreedom of wealth so as to have more time for their lives.And it dependsvery much on the degree of automation you have achieved. The authorlists himself as an example</p><blockquote><p>The largest block of time I need to spend is in the morning beforethe market opens: I typically need to run various programs to downloadand process the latest historical data, read company news that comes upon my alert screen, run programs to generate the orders for the day, andthen launch a few baskets of orders before the market opens and start aprogram that will launch orders automatically throughout the day. Iwould also update my spreadsheet to record the previous day’s profit andloss (P&amp;L) of the different strategies I run based on thebrokerages’ statements. All of this takes about two hours.</p><p>But the two hours reffered above is just the operational side of thebusiness. If you want to grow your business, or keep your currentprofits from declining due to increasing competition, you will need tospend time doing research and backtesting on new strategies. Butresearch and development of new strategies is the creative part of anybusiness, and it can be done whenever you want to. And this may take alot of time</p></blockquote><p>If you are convinced that you want to become a quantitative trader, anumber of questions immediately follow, which will be answered in thefollowing chapters</p><p>（1）How do you find the right strategy to trade? （2）How do yourecognize a good versus a bad strategy even before devoting any time tobacktesting them? （3）How do you rigorously backtest them? （4）If thebacktest performance is good, what steps do you need to take toimplement the strategy, in terms of both the business structure and thetechnological infrastructure? （5）If the strategy is profitable ininitial real-life trading, how does one scale up the capital to make itinto a growing income stream while managing the inevitable losses thatcome with trading?</p><h2 id="fishing-for-ideas">Fishing for Ideas</h2><p>This part mainly answers the first question, How do you find theright strategy？</p><p>Finding a strategy is not hard, there are hundreds, if not thousands,of trading ideas that are in the public sphere at any time, accessibleto anyone at little or no cost. But they may not be useful, especiallyfor academics</p><p>The author states in the book that he had found that many strategiesdescribed by academics are either too complicated, out of date (perhapsthe once-profitable strategies have already lost their power due tocompetition), or require expensive data to backtest (such as historicalfundamental data). Furthermore, many of these academic strategies workonly on <strong>small-cap stocks, whose illiquidity may render actualtrading profits far less impressive than their backtests wouldsuggest</strong>.</p><p>However, numerous publicly accessible strategies may not be highlyrigorous, but one can consider making slight adjustments to thesestrategies to achieve profitability. For example, the strategies fromtraders’ forums may have worked only for a little while, or they workfor only a certain class of stocks, or they work only if you don’tfactor in transaction costs. However, the trick is that you can oftenmodify the basic strategy and make it profitable</p><h3 id="capital-matters">Capital Matters</h3><p>There are many factors to consider to get the most suitable strategyfor you, including working hours, programming skills, trading capital,etc. Here we jsut focus on the factor of capital. Because capitalavailability affects many choices</p><ul><li>account</li></ul><p>The first is whether you should open a retail brokerage account or aproprietary trading account, which will be explained with more detailsin chapter 4</p><ul><li>leverage</li></ul><p>With a <strong>low-capital account</strong>, we need to findstrategies that can utilize the <strong>maximum leverage</strong>available. Trading futures, currencies, and options can offer you higherleverage than stocks; intraday positions allow a Regulation T leverageof 4, while interday (overnight) positions allow only a leverage of2</p><p>Capital (or leverage) availability determines whether you shouldfocus on directional trades (long or short only) or dollar-neutraltrades (hedged or pair trades).</p><p>A <ahref="https://quant.stackexchange.com/questions/23187/dollar-neutral-strategy">dollar-neutraltrades</a> means that hold equal dollar amounts of long and shortpositions, sometimes it’s also called market neutral strategies, and<strong>a dollar-neutral portfolio or market-neutral portfolio requirestwice the capital or leverage of a long or short-onlyportfolio.</strong></p><ul><li>infrastructure</li></ul><p>Capital availability also imposes a number of indirect constraints.It affects how much you can spend on various infrastructure, data, andsoftware.</p><p>For example, if you have low trading capital, your online brokeragewill not be likely to supply you with real-time market data for too manystocks, so you can’t really have a strategy that requires real-timemarket data over a large universe of stocks.</p><p>Similarly, clean historical stock data with high frequency costs morethan historical daily stock data. And historical stock data withoutsurvivorship bias are much more expensive than those that have such abias. Yet if your data have survivorship bias, the backtest result canbe unreliable.</p><ul><li>holding period</li></ul><p>There is a misconception aired by some investment advisers, that isif your goal is to achieve maximum long-term capital growth, then thebest strategy is a buy-and-hold one. This notion has been shown to bemathematically false.</p><p>In reality, maximum long-term growth is achieved by finding astrategy with the maximum Sharpe ratio (defined in the next section),provided that you have access to sufficiently high leverage. Therefore,<strong>comparing a short-term strategy with a very short holdingperiod, small annual return, but very high Sharpe ratio, to a long-termstrategy with a long holding period, high annual return, but lowerSharpe ratio, it is still preferable to choose the short-term strategyeven if your goal is long-term growth</strong>, barring taxconsiderations and the limitation on your margin borrowing (more on thissurprising fact later in Chapter 6 on money and risk management).</p><p>A long holding period does not guarantee a good strategy; however, inmany cases, it is really hard to judge the market trend correctly, whichleads to the truth that long-term approach is more profitable thanshort-term approach</p><p>The following image includes the difference between low capital andhigh capital</p><p>&lt;<img data-src="https://wulc.me/imgs/lowCapitalVShighCapital.png" height="50%" width="50%" alt="lowCapital_vs_highCapital"></p><p>And the autor's experience may also bring us some insights</p><blockquote><p>I started my life as an independent quantitative trader with $100,000at a retail brokerage account (I chose Interactive Brokers), and Itraded only directional, intraday stock strategies at first. But when Ideveloped a strategy that sometimes requires much more leverage in orderto be profitable, I signed up as a member of a proprietary trading firmas well.</p></blockquote><h3 id="before-backtesting">Before Backtesting</h3><p>Even before doing an in-depth backtest of the strategy, you canquickly filter out some unsuitable strategies if they fail one or moreof these tests:</p><ul><li>Does it outperform a benchmark?</li><li>Does it have a high enough <strong><ahref="https://en.wikipedia.org/wiki/Sharpe_ratio">Sharperatio</a></strong>?</li><li>Does it have a <strong>small enough drawdown and short enoughdrawdown duration</strong>?</li><li>Does the backtest suffer from <strong>survivorshipbias</strong>?</li><li>Does the strategy lose steam in recent years compared to its earlieryears?</li><li>Does the strategy have its own “niche” that protects it from intensecompetition from large institutional money managers?</li></ul><p>We will talk about the above questions one by one</p><ul><li>benchmark</li></ul><p>To compare strategy with a benchmark is important, but we also needto realize that different assets require different benchmarks</p><p>Everybody seems to know that if a long-only strategy returns 10percent a year, it is not too fantastic because investing in an indexfund will generate as much, if not better, return on average. However,if the strategy is a long-short dollar-neutral strategy (i.e., theportfolio holds long and short positions with equal capital), then 10percent is quite a good return, because then the benchmark of comparisonis not the market index, but a riskless asset such as the yield of thethree-month U.S. Treasury bill (which at the time of this writing isabout 4 percent).</p><p>And Excess Returns = Portfolio Returns − Benchmark Returns</p><ul><li>sharpe ratio and drawdown</li></ul><p>Don't just consider the return rate, Sharpe ratio is alsoimportant</p><p>There is often a trade-off between the return rate and the sharperatio; however, the book suggests that higher Sharpe ratio often leadsto higher returns because leverage can be applied to benefit, and thepartial risk of leverage can be hedged by the high Sharpe ratio.</p><p>If a strategy has deep (e.g., more than 10 percent) or lengthy (e.g.,four or more months) drawdowns, it is unlikely that it will have a highSharpe ratio</p><p>Any strategy with a Sharpe ratio less than 1 is not considered a goodstrategy, and strategies that are profitable every day typically have aSharpe ratio greater than 3.</p><ul><li>steam and transaction costs</li></ul><p>In addition to commission fees, there are also costs incurred due toliquidity; for example, the inability to sell at a specific price or theprice drop after selling.</p><p>The book explains this point with the following example</p><blockquote><p>when you buy or sell a large chunk of securities, you will not beable to complete the transaction without impacting the prices at whichthis transaction is done. This effect on the market prices due to yourown order is called market impact, and it can contribute to a large partof the total transaction cost when the security is not very liquid</p></blockquote><p>The term "slippage" is used to describe the situation mentionedabove, slippage is the difference between the price that triggers theorder and the execution price. Of course, this slippage can be of eithersign, but <strong>on average it will be a cost rather than a gain to thetrader</strong></p><p><strong>Taking transaction costs into account, the Sharpe ratio of astrategy may shift from positive to negative.</strong></p><ul><li>data</li></ul><p>Usually there are two problems related to data, surviveship bias andregime shifts</p><p>Survivorship bias in data refers to the exclusion of assets that havealready delisted or disappeared from the backtesting data.</p><p>Some strategies are significantly impacted by this bias, such asthose specifically focus on buying cheap stocks. These strategies maynot be targeting undervalued assets, but rather assets that are on theverge of delisting or disappearing.</p><p>As to "regime shifts" in the financial markets, it means thatfinancial data from an earlier period simply cannot be fitted to thesame model that is applicable today</p><p>This point may be hard to swallow for many statistically mindedreaders. Many of them may think that the more data there is, the morestatistically robust the backtest should be. This is true only when thefinancial time series is generated by a stationary process.Unfortunately, <strong>financial time series is famouslynonstationary</strong></p><ul><li>fly under the Radar</li></ul><p>For personal traders, avoid blindly following strategies ofsuperstitious large institutions; instead, find a well-considered andindependent strategy that suits you, or "strategy fly under theRadar"</p><p>You should look for those strategies that fly under the radar of mostinstitutional investors, for example, strategies that have very lowcapacities because they trade too often, strategies that trade very fewstocks every day, or strategies that have very infrequent positions</p><h2 id="backtesting">Backtesting</h2><p>There are many nuts and bolts involved in creating a realistichistorical backtest and in reducing the divergence of the futureperformance of the strategy from its backtest performance.</p><p>Issues discussed here include:</p><ul><li>Data: <strong>Split/dividend adjustments, noise in dailyhigh/low</strong>, and survivorship bias.</li><li>Performance measurement: Annualized Sharpe ratio and maximumdrawdown.</li><li>Look-ahead bias: Using unobtainable future information for pasttrading decisions.</li><li>Data-snooping bias: Using too many parameters to fit historicaldata, and avoiding it using large enough sample, out-of-sample testing,and sensitivity analysis.</li><li>Strategy refinement: Common ways to make small variations on thestrategy to optimize performance.</li><li>Transaction cost: Impact of transaction costs on performance.</li></ul><h3 id="data">Data</h3><p>There are serveral aspects to which we need to pay attention whendealing with data in backtesting</p><ul><li>Dividend and Split</li></ul><p>In the financial field, a dividend refers to a portion of a company'sprofits distributed to its shareholders. When a company makes a profit,it can choose to return a portion of the earnings to its shareholders inthe form of cash or stock. This is known as a dividend payment. Thereare two main types of dividends:</p><ol type="1"><li>Cash Dividend: A dividend paid by the company directly in the formof cash to its shareholders.</li><li>Stock Dividend: An extra share of stock distributed to shareholdersin the form of additional shares.</li></ol><p>As to split, a stock split refers to a company dividing its existingshares into a larger number of shares at a certain ratio, therebyincreasing the number of shares while reducing the price per share. Forexample, a 2-for-1 stock split means each share is split into twoshares, but the price per share is reduced by half. Stock splits do notchange the market value of the company or the total equity ofshareholders.</p><p>The viewpoint of this book is that we need to refresh the price ofthe stock when there is dividen or split, according the the exact numberof dividen or split</p><ul><li>High and Low Data</li></ul><p>A backtest that relies on high and low data is less reliable than onethat relies on the open and close.</p><p>After retrieving the data from a database, it is often advisable todo a quick error check. The simplest way to do this is to<strong>calculate the daily returns based on the data</strong>. If youhave open, high, low, and close prices, you can calculate the variouscombinations of daily returns such as from the previous high to today’sclose as well. You can then examine closely those days with returns thatare, say, 4 standard deviations away from the average.Typically, anextreme return should be accompanied by a news announcement, or shouldoccur on a day when the market index also experienced extreme returns.If not, then your data is suspect</p><ul><li>Survivorship Bias</li></ul><p>One way to overcome this problem is to start collecting point-in-timedata yourself for the benefit of your future backtest. If you save theprices each day of all the stocks in your universe to a file, then youwill have a point-in-time or survivorship-bias-free database to use inthe future. Another way to lessen the impact of survivorship bias is tobacktest your strategies on more recent data so that the results are notdistorted by too many missing stocks.</p><h3 id="performance-measurement">Performance measurement</h3><p>The point in this book is that <strong>sharpe ratio anddrawdowns</strong> are the two most important measurements inbacktesting.</p><p>But usually it did not include average annualized returns, themeasure most commonly quoted by investors. The reason in the book is ifyou use this measure, you have to tell people a number of things aboutwhat denominator you use to calculate returns.</p><p>In general, if you calculate your average and standard deviation ofreturns based on a certain trading period T, whether T is a month, aday, or an hour, and you want to annualize these quantities, you have tofirst find out how many such trading periods there are in a year (callit NT). Then <strong>Annualized Sharpe Ratio = (NT) × SharpeRatio</strong></p><h3 id="common-pitfalls">Common Pitfalls</h3><p>These pitfalls are actually some common problems in machinelearning</p><ul><li><p>Look-Ahead Bias: same as the problem of data leakage in machinelearning</p></li><li><p>Data-Snooping Bias: same as the problem of overfitting in machinelearning, the author offers his experience as follows</p></li></ul><blockquote><p>Usually, an erroneous backtest would produce a historical performancethat is better than what we would have obtained in actual trading</p></blockquote><blockquote><p>As a rule of thumb, I would not employ more than five parameters,including quantities such as entry and exit thresholds, holding period,or the lookback period, in computing moving averages.</p><p>Let’s assume that <strong>the number of data points needed foroptimizing your parameters is equal to 252 times the number of freeparameters your model has.(purely on experience.)</strong></p></blockquote><ul><li>Sensitivity Analysis: to test if a strategy if robust</li></ul><blockquote><p>Once you have optimized your parameters as well as various featuresof your model and have verified that its performance on a test set isstill reasonable, vary these parameters or make some small qualitativechanges in the features of the model and see how the performance changeson both the training and the test sets.</p></blockquote><h3 id="transaction-costs">Transaction Costs</h3><p>In actual financial trading, there are various costs involved, likecommission, liquidity cost, opportunity cost, market impact, andslippage, which we had reffered in the previous chapter</p><p>These costs can greatly impact the final returns in backtesting.Andit should not surprise you to find that a strategy with a high Sharperatio before adding transaction costs can become very unprofitable afteradding such costs</p><p>So you should consider transaction costs in backtesting</p><h3 id="strategy-refinement">Strategy Refinement</h3><p>Usaually there are some very simple strategies that are fairly wellknown in traders’ circles and are still somewhat profitable, thoughtheir returns seem to be diminishing. An example is the pair trading ofstocks. <strong>The reason they are diminishing in returns is that toomany traders are taking advantage of this arbitrage opportunity andgradually erasing the profit margin</strong>. However, it is oftenpossible to introduce minor variations in the basic strategy, which willboost its returns.</p><p>These minor variations are often far less well known than the basicstrategy, and therefore far less well exploited by traders. Sometimesthey involve <strong>excluding certain stocks or groups of stocks fromthe universe</strong>. For example, traders often prefer to excludepharmaceutical stocks from their technical trading program because ofthe dramatic impact of news on their prices, or else they may excludestocks that have pending merger or acquisition deals. Other traders<strong>change the entry and exit timing or frequency of thetrades</strong>. And <strong>a strategy that has a very good Sharperatio when it is applied to small-cap stocks becomes very unprofitablewhen applied to large-cap stocks</strong>.</p><p>When introducing these refinements to your strategy, <strong>it ispreferable that the refinement has some basis in fundamental economicsor a well-studied market phenomenon, rather than some arbitrary rulebased on trial and error</strong>. Otherwise, data-snooping biaslooms.</p><h2 id="setting-up-your-business">Setting up your business</h2><h3 id="retail-or-proprietray">Retail or Proprietray</h3><p>Proprietary trading firms are financial companies specialized inproprietary trading. This means they use their own capital for trading,aiming to profit from market fluctuations. These firms typically havehighly specialized trading teams that employ complex trading strategies.They use their own funds for trading, enabling them to seek profits inhigh-risk, high-return markets.</p><p>Retail brokerage accounts are accounts opened by individual investorswith a brokerage or securities firm. Through retail brokerage accounts,individual investors can buy and sell financial products such as stocks,bonds, and funds. These accounts are typically geared towards thegeneral public and offer relatively simple investment options andtrading functionalities. The funds in these accounts come from theindividual investors themselves and are used to meet their personalinvestment needs.</p><p>Their difference are listed as follows in this book</p><p><img data-src="https://wulc.me/imgs/Retail_versus_Proprietary.jpg" height="40%" width="40%" alt="Retail versus Proprietary"></p><p>In a nutshell, <strong>retail brokerages give you complete freedomand better capital protection but smaller leverage</strong>, whileproprietary trading firms give you less freedom and less capitalprotection but much high leverage. You can choose to have both retailand proprietary accounts, each tailored to the specific needs of yourstrategies</p><p>The decision whether to go retail or to join a proprietary tradingfirm is generally based on your need of capital, the style of yourstrategy, and your skill level.</p><p>For example, if you run a low-risk, market-neutral strategy thatnevertheless requires a much higher leverage than allowed by RegulationT in order to generate good returns, a proprietary account may be betterfor you. However, if you engage in high-frequency futures trading thatdoes not require too much capital, a retail account may save you a lotof costs and hassles. Similarly, a very experienced trader with strongrisk man- agement practices and emotional stability probably doesn’tneed the guidance given by a proprietary firm, but less experiencedtraders may benefit from the imposed restraints.</p><p>Regardless of whether you have chosen to trade in a retail bro-kerage or join a proprietary trading firm, you need to make sure theirtrading account and systems have these features:</p><ul><li>Relatively <strong>low commissions</strong>.</li><li>Trade a <strong>good variety of financial instruments</strong>.</li><li>Access to <strong>deep pool of liquidity</strong>.</li><li>API for real-time data retrieval and order transmission.</li></ul><p>A "deep pool of liquidity" refers to a financial market or tradingenvironment where there is a significant volume of buy and sell ordersavailable for a particular asset (such as a stock, currency, orcommodity) at various price levels. In other words, it is a market witha large number of participants willing to trade that particular asset,resulting in a high level of trading activity.</p><h3 id="physical-infrastructure">Physical Infrastructure</h3><p>In quantitative trading, high-performance servers and reliablenetwork connections are critical because they directly affect theefficiency of executing trading strategies and the stability oftrades.</p><p>Here are some aspects that need to be cosidered in this part</p><ul><li><p><strong>Server Selection</strong>: Quantitative trading requiresthe use of high-performance servers, typically servers with powerfulprocessing capabilities and large memory capacity. These servers need toprocess market data rapidly, run complex trading strategies, and executetrade instructions efficiently.</p></li><li><p><strong>Low Latency</strong>: The success of quantitative tradingoften relies on quick execution and response times. Therefore, serversneed to have low latency characteristics to ensure that tradeinstructions reach the exchange and receive a response as quickly aspossible, reducing the impact of network latency on tradeslippage.</p></li><li><p><strong>Redundant Systems</strong>: As quantitative tradinginvolves high-frequency, automated trading, server reliability iscrucial. Redundant systems, such as redundant power supplies, redundanthard drives, and redundant network interfaces, are used to preventsingle points of failure and ensure the continuous operation ofservers.</p></li><li><p><strong>Server Location</strong>: Server location is also animportant consideration. To minimize trade execution latency, somequantitative traders place servers in data centers close to theexchange, reducing the transmission time of trade instructions as muchas possible.</p></li><li><p><strong>Network Connectivity</strong>: High-speed and stablenetwork connections are crucial for quantitative trading. Quantitativetraders often choose high-quality dedicated network connections orleased lines to ensure fast and reliable data transmission.</p></li><li><p><strong>Security</strong>: Quantitative trading involves asignificant amount of trade data and sensitive information. Therefore,servers and network infrastructure need to have robust security measuresto protect traders' data and funds.</p></li></ul><p>The above requirements may seem too strict for the trading whichfrequency is relatively lower, since it is usually forultra-high-frequency trading applications. But some infrastructure isstill required to support the development and execution of tradingstrategies. For example, server, network ans security, and it highlydepends on what kind of trading you're performing.</p><h2 id="summary">Summary</h2><p>In summary, this passage discusses various aspects of quantitativetrading and provides practical advice for building an algorithmictrading business. It emphasizes the importance of strategy selection,backtesting, and setting up the necessary infrastructure. Here are thekey points covered:</p><p><strong>Quantitative Trading Overview and Independent QuantitativeTrading</strong>: Quantitative trading, also known as algorithmictrading, uses computer algorithms, mathematical models, and dataanalysis to make buy/sell decisions automatically. The ideal independentquantitative trader should have some prior experience in finance orcomputer programming, sufficient savings to withstand losses, andemotional balance between fear and greed.</p><p><strong>Finding Trading Ideas</strong>: Traders can find tradingstrategies from various sources, but it is essential to verify andrefine them. Minor adjustments to existing strategies can lead toprofitable results. Factors Influencing Strategy Selection: Capitalavailability, infrastructure, and holding period influence the choice oftrading strategy.</p><p><strong>Backtesting</strong>: Backtesting involves testing astrategy's performance using historical data.Considerations includedividend/split adjustments, data accuracy, perfromance measurements,transaction costs, and sensitivity analysis.</p><p><strong>Setting Up Your Business</strong>: Traders can choose betweenretail brokerage accounts and proprietary trading firms. Importantfeatures to consider include low commissions, access to a variety offinancial instruments, deep liquidity, and real-time data retrieval andorder transmission. And traders also need for set up some physicalinfrastructure for real trading.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&quot;&lt;a
href=&quot;https://www.myquant.cn/uploads/default/original/1X/4c7037365a4bf1623734c1c899baed7855061ace.pdf&quot;&gt;Quantitative
Trading: How to Build Your Own Algorithmic Trading Business&lt;/a&gt;&quot; by
Ernie Chan is a comprehensive guide that explores the world of
quantitative trading and provides practical advice for building a
algorithmic trading business, especially for individuals interested in
quantitative trading.&lt;/p&gt;
&lt;p&gt;It covers essential concepts, methodologies, and practical tips to
help readers develop and implement their own algorithmic trading
strategies while effectively managing risk and building a sustainable
trading business.&lt;/p&gt;
&lt;p&gt;Due to the significant benefits I received from reading this book, I
want to write down some of the most important takeways I get from this
book, with the hope that it can also be useful to you.&lt;/p&gt;
&lt;p&gt;This passage is about the first four chapters, which introduce basic
requirements for independent traders, including search for ideas,
perform backtest, and what we need before doing actual trading.&lt;/p&gt;</summary>
    
    
    
    <category term="读书" scheme="https://wulc.me/categories/%E8%AF%BB%E4%B9%A6/"/>
    
    
    <category term="读书" scheme="https://wulc.me/tags/%E8%AF%BB%E4%B9%A6/"/>
    
    <category term="量化交易" scheme="https://wulc.me/tags/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/"/>
    
  </entry>
  
  <entry>
    <title>Practical Wisdom from &quot;The Almanack of Naval Ravikant&quot;:Happiness</title>
    <link href="https://wulc.me/2023/05/28/Practical%20Wisdom%20from%20%22The%20Almanack%20of%20Naval%20Ravikant%22:%20Happiness/"/>
    <id>https://wulc.me/2023/05/28/Practical%20Wisdom%20from%20%22The%20Almanack%20of%20Naval%20Ravikant%22:%20Happiness/</id>
    <published>2023-05-28T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.133Z</updated>
    
    <content type="html"><![CDATA[<p>"<a href="https://www.navalmanack.com/">The Almanack of NavalRavikant</a>" is a book that compiles the wisdom and insights ofentrepreneur and investor Naval Ravikant. This book mainly talks abouttwo topics, wealth and happiness. It offers practical advice on how tolive a more fulfilling and purposeful life.</p><p>Through his own experiences and perspectives, Naval provides readerswith valuable insights into topics like success, motivation, andpersonal growth, making the book a useful guide for anyone looking toimprove their life and achieve their goals</p><p>I have benefited greatly from reading this book, and I want to writesome important takeaways from this book. As this book was written inEnglish, I want to give it a try to write it in English, too. Hoping thepassage will be beneficial to you, this passage is about the secondtopic: <strong>Happiness</strong></p><p>The passage about the first topic: wealth, can be found <ahref="https://wulc.me/2023/05/20/Practical%20Wisdom%20from%20%22The%20Almanack%20of%20Naval%20Ravikant%22:Wealth/">here</a></p><span id="more"></span><p>The book claims that three big ones in life are <strong>wealth,health, and happiness</strong>. And usally we pursue them in that order,but their importance is reverse.</p><p>As to the definition to happiness, it is just different to differentpeople at different age or situation</p><blockquote><p><strong>Happiness is a very evolving thing</strong>.</p><p>What’s happiness? The answer I would have given you a year ago willbe different than what I tell you now. And the answer that works for meis going to be nonsense to you, and vice versa. Whatever happiness meansto me, it means something different to you.</p></blockquote><p>But luckily, happiness is not something you inherit or even choose,but <strong>a choice you make and a skill you develop</strong>, likefitness or nutrition.</p><p>So in the following we will focus on how to learn the skill of beinghappy and avoid those enemies of hapiness.</p><h2 id="presence-and-peace">Presence and Peace</h2><p>Happiness requires presence and peace</p><p>At any given time, when we’re walking down the streets, a very smallpercentage of your brain is focused on the present. The rest is planningthe future or regretting the past.</p><p>This keeps you from having an incredible experience. It’s keeping youfrom seeing the beauty in everything and for being grateful for whereyou are.</p><p>So what we should do is not to believe in anything from my past.Anything. No memories. No regrets. No people. No trips. Nothing.<strong>A lot of our unhappiness comes from comparing things from thepast to the present.</strong></p><p>Besides presence, peace is also very important for happiness, because<strong>happiness is more about peace than it is about joy</strong>.</p><p>When a lot of people say happiness, they mean joy or bliss, but theauthor believes it more about peace.</p><p>If you ever just sit down and try and do nothing, nothing. Doingnothing, means not to read a book, not to listen to music, literallyjust sit down and do nothing. You will find you can’t do it, becausethere’s anxiety always trying to make you get up and go, get up and go,get up and go. <strong>So it’s important just being aware the anxiety ismaking you unhappy. The anxiety is just a series of runningthoughts.</strong></p><p>When facing anxiety, we don't need to fight it, we just need to beaware we're anxious because of all these thoughts. We're actually makinga choice, “Would I rather be having this thought right now, or would Irather have my peace?”</p><p><strong>A happy person isn’t someone who’s happy all the time. It’ssomeone who effortlessly interprets events in such a way that they don’tlose their innate peace.</strong></p><h2 id="desire-and-jealousy">Desire and Jealousy</h2><p>Desire and Jealousy are enemies of happiness</p><p>As humans, we are highly judgmental survival-and-replicationmachines. We constantly walk around thinking, “I need this,” or “I needthat,” trapped in the web of desires.</p><blockquote><p>Happiness is what’s there when you remove the sense that something ismissing in your life.</p></blockquote><p>Happiness is the state when nothing is missing. When nothing ismissing, your mind shuts down and stops running into the past or futureto regret something or to plan something.</p><p>So happiness is about the <strong>absence of desire</strong>,especially the absence of desire for external things.</p><p><strong>There is a fundamental delusion for many people: There issomething out there that will make me happy and fulfilledforever</strong>.</p><p>Suppose we bought a new car. Now we're waiting for the new car toarrive. Of course, every night, we're on the forums reading about thecar. I know the instant the car arrives we won’t care about it anymore.The thing is, <strong>we're addicted to the desiring</strong>. We'readdicted to the idea of this external thing bringing me some kind ofhappiness and joy, and this is completely delusional.</p><p>Not to say you shouldn’t do things on the outside. You absolutelyshould. You’re a living creature. You’re meant to do something. You’renot just meant to lie there in the sand and meditate all day long. Youshould self-actualize. You should do what you are meant to do.</p><p>So the key point is <strong>what kind of desire and what extent weshould achieve, but the book does not provide a definitive answer tothis or, in other words, the answer varies for eachindividual.</strong></p><p>Usally, desire and jealousy are twins, they appear at the same time.When we are desired for something but do not own them yet, jealousy willcome up seeing other people who already get those things.</p><p>Jealousy was a very hard emotion to overcome. It’s such a poisonousemotion because, at the end of the day, you’re no better off withjealousy. You’re unhappier, and the person you’re jealous of is stillsuccessful or good-looking or whatever they are.</p><p>We should realize with all these people we were jealous of,<strong>we couldn’t just choose little aspects of theirlife</strong>.</p><p>We couldn’t say we want his body, we want her money, we want hispersonality. You have to be that person. Do you want to actually be thatperson with all of their reactions, their desires, their family, theirhappiness level, their outlook on life, their self-image? If you’re notwilling to do a wholesale, 24/7, 100 percent swap with who that personis, then there is no point in being jealous.</p><h2 id="single-player-game">Single-Player Game</h2><p>Socially, we’re told, “Go work out. Go look good.” That’s a<strong>multi-player competitive game</strong>. Other people can see ifI’m doing a good job or not. We’re told, “Go make money. Go buy a bighouse.” Again, external multiplayer competitive game.</p><p>But <strong>training yourself to be happy is completelyinternal.</strong> There is no external progress, no externalvalidation. You’re competing against yourself—it is a single-playergame.</p><p><strong>The reality is life is a single-player game</strong>. You’reborn alone. You’re going to die alone. All of your interpretations arealone. All your memories are alone. You’re gone in three generations,and nobody cares. Before you showed up, nobody cared. It’s all singleplayer.</p><p>We’re like bees or ants. We are such social creatures, we’reexternally programmed and driven. We don’t know how to play and winthese single-player games anymore. <strong>Perhaps one reason why yogaand meditation are hard to sustain is they have no extrinsicvalue.</strong> Purely single-player games.</p><p><strong>There is no endpoint to self-awareness andself-discovery.</strong> It’s a lifelong process you hopefully keepgetting better and better at.</p><p><strong>Freedom from Expectations</strong></p><p>If you hurt other people because they have expectations of you,that’s their problem. If they have an agreement with you, it’s yourproblem</p><p><strong>Courage is not caring what other people think.</strong></p><p>Value your time. It is all you have. It’s more important than yourmoney. It’s more important than your friends. It is more important thananything. Your time is all you have. Do not waste your time.</p><p>When reading this part in the book, it just reminds me of the speechof Steve Jobs in Standford</p><blockquote><p>Your time is limited, so don't waste it living someone else's life.Don't be trapped by dogma - which is living with the results of otherpeople's thinking.</p><p>Don't let the noise of other's opinions drown out your own innervoice. And most important, have the courage to follow your heart andintuition. They somehow already know what you truly want to become.Everything else is secondary.</p></blockquote><h2 id="happiness-habits">Happiness Habits</h2><p>As mentioned above, happiness is skill, just like nutrition, dieting,working. It's not what you are born with. It starts with realizingthey’re skills you can learn.</p><p>The most important trick to being happy is to realize happiness is askill you develop and a choice you make. You choose to be happy, andthen you work at it. It’s just like building muscles.</p><p>So how does someone build the skill of happiness? This book offerssome advices for building habits</p><ul><li><strong>Be very aware in every moment</strong>. If I catch myselfjudging somebody, I can stop myself and say, “What’s the positiveinterpretation of this?”</li><li>Dropping caffeine and alcohol</li><li><strong>Not eating sugar</strong> will keep your mood more stable.Not going on Facebook, Snapchat, or Twitter will keep your mood morestable.</li><li><strong>Working out every day</strong>, if you have peace of body,it’s easier to have peace of mind</li><li>Tell your friends you’re a happy person. Then, you’ll be forced toconform to it</li><li>Use <strong>meditation, music, and exercise</strong> to reset yourmood</li><li>Increase serotonin in the brain without drugs: <strong>Sunlight,exercise, positive thinking, and tryptophan</strong></li><li>Be <strong>grateful</strong> with what you have</li></ul><blockquote><p>As humans, we’re used to taking everything for granted. Like what youand I are doing right now. We’re sitting indoors, wearing clothes,well-fed, and communicating with each other through space and time. Weshould be two monkeys sitting in the jungle right now watching the sungoing down, asking ourselves where we are going to sleep.</p></blockquote><ul><li>Stop Judging</li></ul><blockquote><p><strong>The more you judge, the more you separate yourself</strong>.You’ll feel good for an instant, because you feel good about yourself,thinking you’re better than someone. Later, you’re going to feel lonely.Then, you see negativity everywhere. The world just reflects your ownfeelings back at you.</p></blockquote><p>As to how to change a habit, the book give the follwing steps</p><ol type="1"><li>Pick one thing. Cultivate a desire. Visualize it.</li><li>Plan a sustainable path.</li><li>Identify needs, triggers, and substitutes.</li><li>Tell your friends.</li><li>Track meticulously.</li><li>Self-discipline is a bridge to a new self-image.</li><li>Bake in the new self-image. It’s who you are—now</li></ol><blockquote><p>First, you know it. Then, you understand it. Then, you can explainit. Then, you can feel it. Finally, you are it.</p></blockquote><h2 id="care-for-yourself">Care for Yourself</h2><p>We can depend on nobody but just ourselves,</p><blockquote><p>Doctors won’t make you healthy.</p><p>Nutritionists won’t make you slim.</p><p>Teachers won’t make you smart.</p><p>Gurus won’t make you calm.</p><p>Mentors won’t make you rich.</p><p>Trainers won’t make you fit.</p><p>Ultimately, you have to take responsibility.</p></blockquote><p>The number one priority in life, above happiness, above family andwork, is health, which can be mainly summarized as two parts:<strong>physical health and mental health</strong></p><h3 id="physical-health">Physical Health</h3><blockquote><p>To have peace of mind, you have to have peace of body first.</p></blockquote><ul><li><strong>Diet</strong></li></ul><p>A correct diet should probably look closer to a paleo diet, mostlyeating vegetables with a small amount of meat and berries</p><p>The combination of sugar and fat together is really deadly. You’vegot to watch out for that in your diet</p><p>Most fit and healthy people focus much more on what they eat than howmuch. Quality control is easier than (and leads to) quantity control</p><ul><li><strong>Exercise</strong></li></ul><p>For the question: What habit would you say most positively impactsyour life? Navel gave the answer as follows</p><blockquote><p>The daily morning workout. That has been a complete game-changer.It’s made me feel healthier, younger. It’s made me not go out late.</p><p>The harder the workout, the easier the day.</p></blockquote><p><strong>Make hard choices instead of easy ones, you will be easy inthe long term</strong></p><p>If you are making the hard choices right now in what to eat, you’renot eating all the junk food you want, and making the hard choice towork out. Your life long-term will be easy. You won’t be sick. You won’tbe unhealthy.</p><p>The same is true of values. The same is true of saving up for a rainyday. The same is true of how you approach your relationships. If youmake the easy choices right now, your overall life will be a lotharder</p><h3 id="mental-health">Mental Health</h3><p>In this part, this book highlights the importance of meditation formetal health</p><p>For your entire life, things have been happening to you. Some good,some bad, most of which you have processed and dissolved, but a fewstuck with you. Over time, more and more stuck with you, and they almostbecame like these barnacles stuck to you.</p><p>You lost your childhood sense of wonder and of being present andhappy. You lost your inner happiness because you built up thispersonality of unresolved pain, errors, fears, and desires that glommedonto you like a bunch of barnacles.</p><p><strong>Just like too much sugar leads to a heavy body, and too manydistractions lead to a heavy mind.</strong> Meditation is theintermittent fasting for the mind.</p><p>One kind of meditation recommended by Navel is called<strong>Choiceless Awareness</strong>, or Nonjudgmental Awareness</p><p>As you’re going about your daily business and you’re not talking toanybody else, you practice learning to accept the moment you’re inwithout making judgments. You don’t think, “Oh, there’s a homeless guyover there, better cross the street”or look at someone running by andsay, “He’s out of shape, and I’m in better shape than him.”</p><p>You don’t make any decisions. You don’t judge anything. You justaccept everything. Naval said if he does that for ten or fifteen minuteswhile walking around, he will end up in a very peaceful, gratefulstate.</p><p>Another kind of meditation is <strong>transcendentalmeditation</strong>, which is where you’re using repetitive chanting tocreate a white noise in your head to bury your thoughts.</p><p>You can just very keenly and very alertly be aware of your thoughtsas they happen. As you watch your thoughts, you realize how many of themare fear-based. The moment you recognize a fear, without even trying itgoes away. After a while, your mind quiets.</p><p>The book recommends if you really want to try meditation, try sixtydays of one hour a day, first thing in the morning. After about sixtydays, you will be tired of listening to your own mind. You will haveresolved a lot of issues, or you have heard them enough to see throughthose fears and issues.</p><p>I think it may be a little hard for people working in modern societyto spend extra one hour in the morning, when they have to get up earlyfor work and may need work late at night. But there is a very usefullife-hack: <strong>When in bed, meditate</strong>. Either you will havea deep meditation or fall asleep. Victory either way.</p><p>Meditation doesn’t mean you’re suddenly going to gain the superpowerto control your internal state. <strong>The advantage of meditation isrecognizing just how out of control your mind is.</strong></p><p>Realizing the fact will drag you out of all those fantasy-futureplanning or uncontrollable fear about the future. It will bring you tothe present, which is the requirement for happiness.</p><blockquote><p>Insight meditation lets you run your brain in debug mode until yourealize you’re just a subroutine in a larger program.</p></blockquote><p>Besides meditation, another tip in this book is <strong>coldshowers</strong>.</p><p>It's hard for many people, and the book recommends a method calledWim Hof breathing method. It involves hyperventlating to get more oxygeninto your blood, which raises your core temperature. Then, you can gointo the shower.</p><p>The first few cold showers may be scary, but sooner it will not seemso hard. A very important lesson from this: <strong>most of oursuffering comes from avoidance</strong>. Most of the suffering from acold shower is the tip-toeing your way in. Once you’re in, you’re in.It’s not suffering.</p><p>Here is a video of a uploader on bilibili about cold showers，whichrecords the change of his body with cold showers in a series of 30 days.It also explains some principles behind cold showers <ahref="https://www.bilibili.com/video/BV1F5411R7jb/?share_source=copy_web&amp;vd_source=7b70e0a98d81aba8b5e293a7324c3e2a">【连续洗30天冷水澡】我的身体发生了什么变化?</a></p><h2 id="philosophy">Philosophy</h2><p>When it comes to real happiness in life, we can not avoid some topicsrelated to philosophy</p><h3 id="meaning-of-life">Meaning of Life</h3><p>This is a big question, and almost anyone will ask themselves thisquestion in their lives, especially when they come to their 30s.</p><p>There is no standark answer to this just like the definition ofhappiness. But one possible answer to this is <strong>there's no meaningof life, or it's personal if exists</strong>.</p><p>Anything you do will fade. It will disappear, just like the humanrace will disappear and the planet will disappear. No one is going toremember you past a certain number of generations, whether you’re anartist, a poet, a conqueror, a pauper, or anyone else. There’s nomeaning.</p><p>From another aspect, however, it indicates the truth that you have tocreate your own meaning, because it will be personal if it reallyexists. Any piece of wisdom anybody else gives you, whether it’s Buddhaor the book, is going to sound like nonsense. Fundamentally, you have tofind it for yourself, so the important part is not the answer, it’s thequestion. You just have to sit there and dig with the question. It mighttake you years or decades. When you find an answer you’re happy with, itwill be fundamental to your life.</p><p>Usally it is related to relationship with people around us, after all<ahref="https://en.wikipedia.org/wiki/Marx%27s_theory_of_human_nature">Humanityis a the summation of social relationships</a></p><h3 id="live-by-your-values">Live by Your Values</h3><p>The book listed some core values of Naval, again, it just varies withdifferent people.</p><p><strong>Honesty</strong> is a core, core, core value.If I disconnectwhat I’m thinking from what I’m saying, it creates multiple threads inmy mind. I’m no longer in the moment—now I have to be future-planning orpast-regretting every time I talk to somebody.</p><p>Play long-term games with long-term people. All benefits in life comefrom <strong>compound interest</strong>, whether in money,relationships, love, health, activities, or habits. I only want to bearound people I know I’m going to be around for the rest of my life. Ionly want to work on things I know have long-term payout.</p><p>Don’t believe in anger anymore. Anger was good when I was young andfull of testosterone, but now I like the Buddhist saying, “<strong>Angeris a hot coal you hold in your hand while waiting to throw it atsomebody.</strong>” I don’t want to be angry, and I don’t want to bearound angry people. I just cut them out of my life.</p><h3 id="presence-is-all-we-have">Presence is All We Have</h3><p>There is actually nothing but this moment.</p><p>No one has ever gone back in time, and no one has ever been able tosuccessfully predict the future in any way that matters.</p><p><strong>Literally, the only thing that exists is this exact pointwhere you are in space at the exact time you happen to behere.</strong></p><p>Perhaps <strong>we’re dying and being reborn at everymoment.</strong> It’s up to you whether to forget or remember that.</p><h2 id="summary">Summary</h2><p>This passage is about the second topic of this book: happiness</p><p>It's the most important thing in life, or we can say it's theultimate goal. Because when we chase for wealth, power, health etc,we're not chasing these things themselves, but the happiness we belivewe will get when we own these things.</p><p>However, these things may not bring real happiness. The book belivesthat happiness requires presence and peace, while desire and jealousyare enemies of it. Finally, we will realize that life is a single-playergame. There's no one else except for yourself, so just free yourselffrom other people's expections.</p><p>Some useful and pratical habits for happiness are recommended in thebook, I think we can follow them just from now on. Among them, I belivethe habits for health is extremely important, inlucding physical healthand mental health.</p><p>Because to have peace of mind, you have to have peace of body first,diet, exercise and sleeping are important on this. As to mental health,meditation is highly recommended.</p><p>On the journey of chasing happiness, we may eventually come to therealization that there's no meaning of life, or it's personal if exists.Life is just what it is, we can only construct the meaning for ourselvesliving every moment to the best with people around us, because presenceis all we have and humanity is a the summation of socialrelationships.</p><p>Hope we can all find it someday</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&quot;&lt;a href=&quot;https://www.navalmanack.com/&quot;&gt;The Almanack of Naval
Ravikant&lt;/a&gt;&quot; is a book that compiles the wisdom and insights of
entrepreneur and investor Naval Ravikant. This book mainly talks about
two topics, wealth and happiness. It offers practical advice on how to
live a more fulfilling and purposeful life.&lt;/p&gt;
&lt;p&gt;Through his own experiences and perspectives, Naval provides readers
with valuable insights into topics like success, motivation, and
personal growth, making the book a useful guide for anyone looking to
improve their life and achieve their goals&lt;/p&gt;
&lt;p&gt;I have benefited greatly from reading this book, and I want to write
some important takeaways from this book. As this book was written in
English, I want to give it a try to write it in English, too. Hoping the
passage will be beneficial to you, this passage is about the second
topic: &lt;strong&gt;Happiness&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The passage about the first topic: wealth, can be found &lt;a
href=&quot;https://wulc.me/2023/05/20/Practical%20Wisdom%20from%20%22The%20Almanack%20of%20Naval%20Ravikant%22:Wealth/&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="读书" scheme="https://wulc.me/categories/%E8%AF%BB%E4%B9%A6/"/>
    
    
    <category term="纳瓦尔宝典" scheme="https://wulc.me/tags/%E7%BA%B3%E7%93%A6%E5%B0%94%E5%AE%9D%E5%85%B8/"/>
    
    <category term="读书" scheme="https://wulc.me/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>Practical Wisdom from &quot;The Almanack of Naval Ravikant&quot;:Wealth</title>
    <link href="https://wulc.me/2023/05/20/Practical%20Wisdom%20from%20%22The%20Almanack%20of%20Naval%20Ravikant%22:Wealth/"/>
    <id>https://wulc.me/2023/05/20/Practical%20Wisdom%20from%20%22The%20Almanack%20of%20Naval%20Ravikant%22:Wealth/</id>
    <published>2023-05-20T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.140Z</updated>
    
    <content type="html"><![CDATA[<p>"<a href="https://www.navalmanack.com/">The Almanack of NavalRavikant</a>" is a book that compiles the wisdom and insights ofentrepreneur and investor Naval Ravikant. This book mainly talks abouttwo topics, wealth and happiness. It offers practical advice on how tolive a more fulfilling and purposeful life.</p><p>Through his own experiences and perspectives, Naval provides readerswith valuable insights into topics like success, motivation, andpersonal growth, making the book a useful guide for anyone looking toimprove their life and achieve their goals</p><p>I have benefited greatly from reading this book, and I want to writesome important takeaways from this book. As this book was written inEnglish, I want to give it a try to write it in English, too. too.Hoping the passage will be beneficial to you, this passage is about thefirst topic: <strong>Wealth</strong></p><span id="more"></span><h2 id="wealth">Wealth</h2><p>We have been pursuing wealth almost all our lives, and financialfreedom seems to be the ultimate goal of everyone</p><p>But firstly，what's the definition of wealth? The book gives thedefinition of wealth as follows</p><blockquote><p>Wealth is <strong>assets that earn while you sleep</strong>.</p><p>Wealth is the factory, the robots, cranking out things. Wealth is thecomputer program that’s running at night, serving other customers.Wealth is even money in the bank that is being reinvested into otherassets, and into other businesses.</p></blockquote><p>We should purse wealth, not money or status. Because money is how wetransfer time and wealth, and status is your place in the socialhierarchy.</p><p>You will get rich by giving society what it wants but does not yetknow how to get at scale.</p><p>So the following will focus on some of the key factors and abilitiesthe author believes are necessary to achieve financial freedom</p><h3 id="equity">Equity</h3><p><strong>You’re not going to get rich renting out your time. You mustown equity</strong>—a piece of a business to gain your financialfreedom.</p><p>If you are paid for renting out your time, you can make some money,but you’re not going to make the money that gives you financial freedom.You’re not going to have passive income where a business is earning foryou while you are on vacation.</p><p>Everybody who really makes money at some point owns a piece of<strong>a product, a business, or some IP</strong>.</p><p><strong>You have to work up to the point where you can own equity ina business</strong>. You could own equity as a small shareholder whereyou bought stock, or stock options if you work at a tech company. Youcould also own it as an owner where you started the company.</p><p>But usually, the real wealth is created by <strong>starting your owncompanies or even by investing</strong>. In an investment firm, they’rebuying equity. These are the routes to wealth. It doesn’t come throughthe hours.</p><h3 id="specific-knowledge">Specific Knowledge</h3><p>Specific knowledge is knowledge you cannot be trained for. If societycan train you, it can train someone else and replace you.</p><p>The specific knowledge is sort of this weird combination of uniquetraits from your DNA, your unique upbringing, and your response to it.It’s almost baked into <strong>your personality and youridentity</strong>. It is found much more by pursuing your innatetalents, your genuine curiosity, and your passion. It’s not by going toschool for whatever is the hottest job; it’s not by going into whateverfield investors say is the hottest.</p><p>Some specific knowledge listed in the book are as follows</p><p><img data-src="https://wulc.me/imgs/SpecificKnowledge.jpg" height="50%" width="50%" alt="specific knowledge"></p><p>With all the specific knowledge above, we will focus on the<strong>sales skills</strong>.</p><p>If someone is a natural at sales, obviously they learned somewhere,but they didn’t learn it in a classroom setting. They learned probablyin their childhood in the school yard, or they learned negotiating withtheir parents. Maybe some is a genetic component in the DNA</p><p>But you can improve sales skills. You can read Robert Cialdini, youcan go to a sales training seminar, you can do door-to-door sales. It isbrutal but will train you very quickly. Specific knowledge cannot betaught, but it can be learned.</p><blockquote><p><strong>Learn to sell. Learn to build. If you can do both, you willbe unstoppable.</strong></p></blockquote><p><strong>The most important skill for getting rich is becoming aperpetual learner</strong>.</p><p>It’s much more important today to be able to become an expert in abrand-new field in nine to twelve months than to have studied the“right” thing a long time ago</p><h3 id="levarage">Levarage</h3><p>Archimedes once said, "Give me a lever long enough and a fulcrum onwhich to place it, and I shall move the world."</p><p>Fortunes also require leverage. <strong>Business leverage comes fromcapital, labor, and products with no marginal cost of replication (codeand media)</strong>.</p><p>Capital means money. To raise money, apply your specific knowledgewith accountability and show resulting good judgment. For example,working is the most common way to do this</p><p>Labor means people working for you. It’s the oldest and mostfought-over form of leverage. Labor leverage will impress your parents,but don’t waste your life chasing it.</p><p>I think we should always remember the leverage we can use</p><ul><li><strong>Capital and labor are permissioned leverage</strong>.Everyone is chasing capital, but someone has to give it to you. Everyoneis trying to lead, but someone has to follow you.</li><li><strong>Code and media are permissionless leverage</strong>. They’rethe leverage behind the newly rich. You can create software and mediathat works for you while you sleep.</li></ul><p>The most interesting and the most important form of leverage is<strong>the idea of products that have no marginal cost ofreplication</strong>. This is the new form of leverage. This was onlyinvented in the last few hundred years. It started with the printingpress. It accelerated with broadcast media, and now it’s really blown upwith the internet and with coding. Now, you can multiply your effortswithout involving other humans and without needing money from otherhumans.</p><p>Also, they are <strong>permissionless</strong>. They don’t requiresomebody else’s permission for you to use them or succeed. For laborleverage, somebody has to decide to follow you. For capital leverage,somebody has to give you money to invest or to turn into a product.Coding, writing books, recording podcasts, tweeting, YouTubing—thesekinds of things are permissionless.</p><p>The book offers two useful advice, which can be applied to mostpeople</p><ol type="1"><li>An army of robots is freely available—it’s just packed in datacenters for heat and space efficiency. Use it.</li><li>If you can’t code, write books and blogs, record videos andpodcasts.</li></ol><h3 id="productize-yourself">Productize yourself</h3><p>"Productize" has leverage. "Yourself" has accountability."Productize"has specific knowledge. "Yourself" also has specific knowledge inthere.</p><p>Society will pay you for creating things it wants. But societydoesn’t yet know how to create those things, because if it did, theywouldn’t need you. They would already be stamped out.</p><p>So if you want to be wealthy, you want to figure out which one ofthose things you can provide for society that it does not yet know howto get but it will want and providing it is natural to you, within yourskill set, and within your capabilities.</p><p>Then, you have to figure out <strong>how to scale it because if youonly build one</strong>, that’s not enough. You’ve got to buildthousands, or hundreds of thousands, or millions, or billions of them soeverybody can have one</p><p>So I think we can keep asking the question: <strong>Am I productizingit? Am I scaling it? Am I scaling with labor or with capital or withcode or with media?</strong></p><h4 id="long-term-game-and-compound-interest">Long-Term Game andCompound Interest</h4><p>Compound interest is a very powerful concept. Compound interestapplies to more than just compounding capital.It can also be applied inbusiness relationships, reputation and individual people workingwith.</p><p>Play iterated games. All the returns in life, whether in wealth,relationships, or knowledge, come from compound interest.</p><h4 id="prioritize-and-focus">Prioritize and Focus</h4><p><strong>Spend more time making the big decisions</strong>. There arebasically three really big decisions you make in your early life:<strong>where you live, who you’re with, and what you do</strong>.</p><p>We spend very little time deciding which relationship to get into. Wespend so much time in a job, but we spend so little time deciding whichjob to get into. Choosing what city to live in can almost completelydetermine the trajectory of your life, but we spend so little timetrying to figure out what city to live in.</p><p>If you’re going to live in a city for ten years, if you’re going tobe in a job for five years, if you’re in a relationship for a decade,you should be spending one to two years deciding these things. These arehighly dominating decisions. Those three decisions really matter.</p><h4 id="patient">Patient</h4><p>Everybody wants to get rich immediately, but the world is anefficient place; immediate doesn’t work. You do have to put in the time.You do have to put in the hours, and so I think you have to put yourselfin the position with the specific knowl- edge, with accountability, withleverage, with the authentic skill set you have, to be the best in theworld at what you do.</p><p>You have to enjoy it and keep doing it, keep doing it, and keep doingit. Don’t keep track, and don’t keep count because if you do, you willrun out of time.</p><h2 id="judgement">Judgement</h2><p>Hard work is important. Without hard work, you’ll develop neitherjudgment nor leverage. But nowadays it is really overrated, how hard youwork matters a lot less in the modern economy.</p><p>At the same time, <strong>judgment is underrated</strong>. Thedirection you’re heading in matters more than how fast you move,especially with leverage.</p><p>So how can we develop our judgment?</p><h3 id="think-clearly">Think Clearly</h3><p>Navel believes that “Clear thinker” is a better compliment than“smart.”</p><p>This is a good point in the book, and I think it can be used in lifein any circunstances</p><blockquote><p>If someone is using a lot of fancy words and a lot of big concepts,they probably don’t know what they’re talking about</p><p>I think the smartest people can explain things to a child. <strong>Ifyou can’t explain it to a child, then you don’t know it.</strong> It’s acommon saying and it’s very true.</p></blockquote><p>This is exactly what "<ahref="https://fs.blog/feynman-learning-technique/">The Feynman LearningTechnique</a>" is about. The really smart thinkers are clear thinkers.They understand the basics at a very, very fundamental level.</p><p>So we should <strong>understand the basics really well rather thanmemorize all kinds of complicated concepts</strong> we can’t stitchtogether and can’t rederive from the basics.</p><p>If you can’t rederive concepts from the basics as you need them,you’re lost. You’re just memorizing. And this is exactly what "<ahref="https://en.wikipedia.org/wiki/First_principle">Firstprinciple</a>" is about</p><h3 id="see-reality">See Reality</h3><p>Make sure you’re dealing with reality when you’re making decisions,to achive this, we need to see reality</p><p>One thing clouding us from being able to see reality is we have<strong>preconceived notions</strong> of the way it should be, whichwill stop us from seeing the truth.</p><p><strong>To see the truth, you have to get your ego out of the waybecause your ego doesn’t want to face the truth</strong>. The smalleryou can make your ego, the less conditioned you can make your reactions,the less desires you can have about the outcome you want, the easier itwill be to see the reality.</p><p>Our egos are constructed in our formative years—our first twodecades. They get constructed by our environment, our parents, society.Then, we spend the rest of our life trying to make our ego happy, whichis exactly the reason that ego will stop you from seeing the true.</p><p>To solve this problem, one important thing is to be able to<strong>uncondition yourself</strong>, to be able to take your habitsapart and say, “Okay, this is a habit I probably picked up when I was atoddler trying to get my parent’s attention. Now I’ve reinforced it andreinforced it, and I call it a part of my identity. <strong>Does itstill serve me? Does it make me happier? Does it make me healthier? Doesit make me accomplish whatever I set out to accomplish</strong>?”</p><p>To see reality, we also need to <strong>focus on data andanalysis</strong>, instead of feeling. Because what you feel tells younothing about the facts, it merely tells you something about yourestimate of the facts.</p><p>This book also gives another interesting advice about empty space</p><blockquote><p>It’s actually really important to have empty space. If you don’t havea day or two every week in your calendar where you’re not always inmeetings, and you’re not always busy, then you’re not going to be ableto think.</p><p>I also encourage taking at least one day a week (preferably two,because if you budget two, you’ll end up with one) where you just havetime to think.</p></blockquote><h3 id="skills-of-decision-making-mental-models">Skills ofDecision-Making: Mental Models</h3><p>Judgment requires experience but can be built faster by learningfoundational skills.</p><p>This book emphasizes that there is no skill called “business”. Weshould void business magazines and business classes. Instead, studymicroeconomics, game theory, psychology, persuasion, ethics,mathematics, and computers, which are the mental models the bookrecommends.</p><p>Because during decision-making, the brain is a memory predictionmachine. A lousy way to do memory prediction is “X happened in the past,therefore X will happen in the future.” It’s too based on specificcircumstances. What you want is principles. You want mental models.</p><p>Some mental models the book recommends and the key points of them areas follows</p><ul><li><p><strong>evolution</strong>: a lot of modern society can beexplained through evolution</p></li><li><p><strong>inversion</strong>: being successful is just about<strong>not making mistakes</strong></p></li><li><p><strong>complexity</strong> theory: the limits of our knowledgeand the limits of our prediction capability</p></li><li><p><strong>economics</strong>: understanding ofsupply-and-demand</p></li><li><p><strong>principal-agent problem</strong>: if you want it doneright, then you have to go yourself and do it</p></li><li><p><strong>compound interest</strong>: in the intellectual domain,compound interest rules</p></li><li><p><strong>basic math</strong>: arithmetic, probability, andstatistics</p></li><li><p><strong>balck swans</strong>: extreme probabilities</p></li><li><p><strong>calculus</strong>: measure the change in small discreteor small continuous events</p></li><li><p><strong>IF YOU CAN’T DECIDE, THE ANSWER IS NO.</strong></p></li></ul><p>This is a very rule in the book, when you're faced with a difficultchoice, such as: Should I marry this person? Should I take this job?Should I buy this house? Should I move to this city?. etc</p><p>The reason listed in the book is</p><blockquote><p>If you cannot decide, the answer is no. And the reason is, modernsociety is full of options. When you choose something, you get locked infor a long time. Starting a business may take ten years. You start arelationship that will be five years or maybe more. You move to a cityfor ten to twenty years. These are very, very long-lived decisions. It’svery, very important we only say yes when we are pretty certain</p></blockquote><p>But I doubt that a little, cause life is always full of uncertainty.If we have to make decision when we are very certain, perhaps we canmake no decision. I prefer the quotes in the book "<ahref="https://www.goodreads.com/book/show/1624.West_with_the_Night">Westwith the Night</a>"</p><blockquote><p>I have learned that if you must leave a place that you have lived inand loved and where all your yesteryears are buried deep, leave it anyway except a slow way, leave it the fastest way you can. Never turn backand never believe that an hour you remember is a better hour because itis dead. Passed years seem safe ones, vanquished ones, while the futurelives in a cloud, formidable from a distance.</p></blockquote><ul><li><strong>RUN UPHILL</strong></li></ul><p>When you have two choices to make, and they’re relatively equalchoices, <strong>take the path more difficult and more painful in theshort term</strong>.</p><p>What’s actually going on is one of these paths requires short-termpain. And the other path leads to pain further out in the future. Yourbrain is overvaluing the side with the short-term happi- ness and tryingto avoid the one with short-term pain.</p><p>So we have to cancel the tendency out (it’s a powerful subconscioustendency) by leaning into the pain. As you know, most of the gains inlife come from suffering in the short term so you can get paid in thelong term</p><p>What are the most efficient ways to build new mental models?</p><p>Read a lot, just read. Reading science, math, and philosophy one hourper day will likely put you at the upper echelon of human success withinseven years.</p><h2 id="summary">Summary</h2><p>In summary, the first part of this book is about wealth, which mainlytalks about the definition of wealth and how to build wealth</p><p>All the methods mentioned in this book about building wealth can besummarized into two words: <strong>Productize Yourself</strong></p><p>"Productize" has leverage. "Yourself" has accountability."Productize"has specific knowledge. "Yourself" also has specific knowledge in there.You need to figure out which one of those things you can provide forsociety that it does not yet know how to get but it will want andproviding it is natural to you, within your skill set, and within yourcapabilities. Then you have to figure out how to scale it</p><p>Another important point is about judgement, which is alwaysunderrated compared to hard work.</p><p>To build judgement, we need to <strong>think clearly and seereality</strong>, with some very useful mental models.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&quot;&lt;a href=&quot;https://www.navalmanack.com/&quot;&gt;The Almanack of Naval
Ravikant&lt;/a&gt;&quot; is a book that compiles the wisdom and insights of
entrepreneur and investor Naval Ravikant. This book mainly talks about
two topics, wealth and happiness. It offers practical advice on how to
live a more fulfilling and purposeful life.&lt;/p&gt;
&lt;p&gt;Through his own experiences and perspectives, Naval provides readers
with valuable insights into topics like success, motivation, and
personal growth, making the book a useful guide for anyone looking to
improve their life and achieve their goals&lt;/p&gt;
&lt;p&gt;I have benefited greatly from reading this book, and I want to write
some important takeaways from this book. As this book was written in
English, I want to give it a try to write it in English, too. too.
Hoping the passage will be beneficial to you, this passage is about the
first topic: &lt;strong&gt;Wealth&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="读书" scheme="https://wulc.me/categories/%E8%AF%BB%E4%B9%A6/"/>
    
    
    <category term="纳瓦尔宝典" scheme="https://wulc.me/tags/%E7%BA%B3%E7%93%A6%E5%B0%94%E5%AE%9D%E5%85%B8/"/>
    
    <category term="读书" scheme="https://wulc.me/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>回归任务里的损失函数</title>
    <link href="https://wulc.me/2023/05/02/%E5%9B%9E%E5%BD%92%E4%BB%BB%E5%8A%A1%E9%87%8C%E7%9A%84%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0/"/>
    <id>https://wulc.me/2023/05/02/%E5%9B%9E%E5%BD%92%E4%BB%BB%E5%8A%A1%E9%87%8C%E7%9A%84%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0/</id>
    <published>2023-05-02T13:37:39.000Z</published>
    <updated>2023-07-16T15:28:28.218Z</updated>
    
    <content type="html"><![CDATA[<p>在搜广推相关业务中，除了 ctr、cvr 这类常规的二分类任务，还存在着预估stay_duration、LTV、ECPM、GMV 等一系列回归任务</p><p>ctr、cvr这类二分类任务常用的损失函数是交叉熵损失，基本假设是事件服从伯努利分布，最终学习的输出是正样本的比例，而回归任务中存在着非常多种的损失函数可选，如mse、mae、huber loss、log-normal、weighted logistics regression、softmax等</p><p>每种损失函数都有其假设和适用范围，如果真实 label分布与假设差异较大，容易导致结果不佳，因此，本文会重点关注这些常见 loss的推导过程以及假设</p><span id="more"></span><h2 id="msemaehuber">MSE/MAE/Huber</h2><p>这三个 loss 是回归任务中最直观也是最常见的loss，前两者都假设了误差服从某种特定分布，然后通过 <ahref="https://en.wikipedia.org/wiki/Maximum_likelihood_estimation">MLE</a>最终的 loss 形式，huber 则是前两种 loss 的混合版本</p><p><a href="https://en.wikipedia.org/wiki/Mean_squared_error">MSE</a>其假设是<strong>预估值和真实值的误差服从标准高斯分布</strong>，然后写出误差的似然(likelihood)函数，并通过MLE 推导出来最终的 loss 的形式，其推导过程如下图所示（来自 <ahref="https://cs229.stanford.edu/">CS229</a> 的教材）</p><p>根据误差服从均值为 0 的高斯分布可以写出如下的似然函数</p><p><img data-src="https://wulc.me/imgs/mse_derive1.jpg" height="50%" width="50%" alt="mse 推导"></p><p>然后根据 IID 的假设和 MLE，可以写出最终的损失函数</p><p><img data-src="https://wulc.me/imgs/mse_derive2.jpg" height="50%" width="50%" alt="mse 推导"></p><p><a href="https://en.wikipedia.org/wiki/Mean_absolute_error">MAE</a>的推导跟 MSE 很类似，只是假设误差服从<ahref="https://zh.wikipedia.org/zh-hans/%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E5%88%86%E5%B8%83#:~:text=%E5%9C%A8%E6%A6%82%E7%8E%87%E8%AE%BA%E4%B8%8E%E7%BB%9F%E8%AE%A1,%E5%88%86%E5%B8%83%28Double%20exponential%20distribution%29%E3%80%82">拉普拉斯分布</a>，把拉普拉斯的概率密度函数替换成上面推导过程中的高斯分布，便能得到了最终MAE 的损失函数形式</p><p>从 loss 函数形式，可以直观看到，对于第 <spanclass="math inline">\(i\)</span> 个样本</p><ul><li><strong>MSE 反向传播的梯度大小为 <spanclass="math inline">\(-(y^{(i)} -\theta^{T}x^{(i)})x^{(i)}\)</span></strong></li><li><strong>MAE 反向传播的梯度为 <span class="math inline">\(-\frac{y^{(i)} - \theta^{T}x^{(i)}}{|y^{(i)} -\theta^{T}x^{(i)}|}x^{(i)}\)</span></strong> (其实就是 ±<spanclass="math inline">\(x^{(i)}\)</span>, 绝对值的求导可参考 <ahref="https://zhuanlan.zhihu.com/p/491935204">绝对值的导数</a>)</li></ul><p>从回传的梯度可知，<strong>MSE容易收到异常值的影响</strong>，比如说有个异常样本的 label非常大，则算梯度时 <span class="math inline">\(y^{(i)} -\theta^{T}x^{(i)}\)</span> 的值也会非常大，容易把样本带偏，而 MAE受到这一点影响会更小</p><p>所以 <a href="https://en.wikipedia.org/wiki/Huber_loss">HuberLoss</a> 也是考虑到了这点，对于 label 较小的样本采用 MSE，label比较大的样本，则采用 MAE, 整个损失的形式如下图所示</p><p><img data-src="https://wulc.me/imgs/HuberLoss.jpg" height="50%" width="50%" alt="Huber Loss"></p><h2 id="zilnlog-normal">ZILN(Log-normal)</h2><p>这是 google 一篇预估 LTV 的 paper 中提出来的 loss，<ahref="https://arxiv.org/abs/1912.07753">A Deep Probabilistic Model forCustomer Lifetime Value Prediction</a></p><p>现实任务的数据往往是长尾切稀疏的，拿 paper 里的 LTV任务为例，会有非常多的 0 值，也存在极端高的值，如下图所示是paper里展示的 LTV 的分布（这里的 LTV 含义是首次购买后产生的价值，0值代表很多客户只购买了一次）</p><p><img data-src="https://wulc.me/imgs/LTV_Distribution.jpg" height="50%" width="50%" alt="LTV 分布"></p><p>paper 提到直接用 MSE 会有如下问题，其实也是上面提到了 MSE存在的问题</p><blockquote><p>MSE loss does not accommodate the <strong>significant fraction ofzero value LTV</strong> from one-time purchasers and can be sensitive toextremely large LTV’s from top spenders</p></blockquote><p>所以 paper 提出了 ZILN(Zero-Inflated LogNormal) 的这个 loss，loss形式如下图所示（<strong>注意这里的 <spanclass="math inline">\(x\)</span> 是 label</strong>)</p><p><span class="math display">\[L_{ZILN}(x;p,\mu,\sigma)=-\mathbf{1}_{x=0} \log(1-p) - \mathbf{1}_{x&gt;0}(\log p -L_{Lognormal}(x;\mu,\sigma))\]</span></p><p>这里的 loss 其实有 2 项，对应着 paper 里建模 LTV 分成了 2个任务，一个是预估购买概率（上面公式里的 <spanclass="math inline">\(p\)</span>），另一个是预估购买金额,，第一个任务是常规的分类的 cross entropy损失；这种思想其实也比较常见，即引入中间信号建模，这样往往能让总体的效果更好，比如说把ctr、cvr 分开建模，把 send2click 拆成 send2show 和 show2click各自建模等</p><p>这里重点讲第二个任务，即预估金额的损失 <spanclass="math inline">\(L_{Lognormal}(x;\mu,\sigma)\)</span>， 这个 loss的形式如下图所示，其实就是对 <ahref="https://en.wikipedia.org/wiki/Log-normal_distribution#Alternative_parameterizations">log-normal分布</a>的概率密度函数取了 log 变换得到的，其隐含的<strong>假设是LTV服从log-normal 分布</strong>，同时将 <spanclass="math inline">\(\mu\)</span> 和 <spanclass="math inline">\(\sigma\)</span> 参数化，即用一个 DNN来预估（注意这里的 <span class="math inline">\(x\)</span> 仍然是label)</p><p><span class="math display">\[L_{Lognormal}(x;\mu,\sigma)=\log (x\sigma \sqrt{2\pi})+\frac{(\log x - \mu)^2}{2 \sigma^2}\]</span></p><p>最终的模型会输出 3 个预估值 <span class="math inline">\(p\)</span>,<span class="math inline">\(\mu\)</span> 和 <spanclass="math inline">\(\sigma\)</span>，如下图所示</p><p><img data-src="https://wulc.me/imgs/ZILN_model.jpg" height="50%" width="50%" alt="ZILN 的预估值"></p><p>log-normal 形式的推导可以参考前面的 wiki 链接或者<ahref="https://zhuanlan.zhihu.com/p/490650039">对数正态分布（Log-NormalDistribution）</a>，简单来看，当一个变量 <spanclass="math inline">\(X\)</span> 服从 log-normal 分布时，其对数 <spanclass="math inline">\(\ln X\)</span> 服从正态分布，反之亦然</p><p>相比于 MSE，log-normal 在预估值异常大时，loss也不会非常大，一定程度上缓解了前面提到的 MSE 的问题</p><p><img data-src="https://wulc.me/imgs/lognormalVSmse.jpg" height="50%" width="50%" alt="Log-normal v.s MSE"></p><h2 id="weighted-logistics-regression">Weighted LogisticsRegression</h2><p>这个 loss 在 Google 这篇 2016 的神文里被应用来预估用户的观看时长，<ahref="https://static.googleusercontent.com/media/research.google.com/zh-CN//pubs/archive/45530.pdf">DeepNeural Networks for YouTubeRecommendations</a>；在实际业界，也有非常多的基于这个思想的 variant和落地，相当于把回归任务转到了分类任务</p><p>从名字大概能猜到 Loss 的形式了，在一个分类的 loss 上做reweight，具体的做法是使用 cross entropy这个损失函数，然后对于<strong>正样本（在建模观看时长中是点击的样本），使用具体的观看时长<span class="math inline">\(T\)</span> 来做reweihgt</strong>，负样本不变</p><p>做了 reweight后，相当于改变了原来的样本中的正负样本的比例（这里把观看的作为正样本，不观看/点击作为负样本），我们知道 cross entropy 最终预估的概率值是正样本的比例，而<strong>reweight 后，对于 label 为<span class="math inline">\(T\)</span>的样本，相当于在分类任务中变为了 <span class="math inline">\(T\)</span>个正样本</strong></p><p>则总体样本的正样本的比例变成了 <spanclass="math inline">\(\frac{\sum_{i=1}^k T_{i}}{N + \sum_{i=1}^k T_{i}-k}\)</span>, 其中 <span class="math inline">\(N\)</span>是总样本数，<span class="math inline">\(T_i\)</span>则是每个正样本的观看时长, <span class="math inline">\(k\)</span>是正样本的数量（这里的推导过程跟 paper里推导过程不太一样，但原理和结果是一样的，会更直观一点）</p><p>而根据 Logistics Regression 的预估值为正样本的比例可知</p><p><spanclass="math display">\[\frac{1}{1+e^{-logit}}=\frac{\sum_{i=1}^kT_{i}}{N + \sum_{i=1}^k T_{i} -k}\]</span></p><p>由于正样本的数量往往非常少，因此 paper 把 <spanclass="math inline">\(k\)</span> 省略掉，令 <spanclass="math inline">\(P=\sum_{i=1}^k T_{i}\)</span>,则上面的式子变为了</p><p><span class="math display">\[\frac{1}{1+e^{-logit}}=\frac{P}{N +P}\]</span></p><p>左边分子分母同时乘上 <span class="math inline">\(e^{logit}\)</span>,右边分子分母同时除以 <span class="math inline">\(N\)</span>,最终可以推导出 <span class="math inline">\(\frac{P}{N} =e^{logit}\)</span>, 由于这里的 <span class="math inline">\(P\)</span>是取了 sum 的，平均到每个样本上，最终 <strong>serving时预估的时长的值就是 <spanclass="math inline">\(e^{logit}\)</span></strong></p><p>则在训练时使用的损失函数还是 cross entropy，同时对正样本做reweight，serving 时得到 logit 后，取 <spanclass="math inline">\(e^{logit}\)</span> 作为最终的预估值，paper里这张图很好地展示了这个过程</p><p><img data-src="https://wulc.me/imgs/WeightedLogisticRegression.jpg" height="50%" width="50%" alt="Log-normal v.s MSE"></p><p>上面的推导过程中忽略了原来样本中正样本的数量 <spanclass="math inline">\(k\)</span>，从严格意义来讲，这会导致预估值有偏，所以最简单的方法是<strong>对于label 为<span class="math inline">\(T\)</span> 的样本，把它当做 <spanclass="math inline">\(T\)</span> 个正样本和 1个负样本</strong>，相比于原来的做法，为原来每个正样本多增加了一个负样本</p><p>则原来的公式会变成如下所示，等式右边的分母里，第一个 <spanclass="math inline">\(k\)</span> 表示原来的正样本的数量，第二个 <spanclass="math inline">\(k\)</span> 则表示新增的负样本的数量，这样就不用有“正样本的数量往往非常少可省略”的假设了</p><p><spanclass="math display">\[\frac{1}{1+e^{-logit}}=\frac{\sum_{i=1}^kT_{i}}{N + \sum_{i=1}^k T_{i} - k + k}\]</span></p><p>回到这个 loss 的假设，我们知道 cross entropy 的假设是 label服从参数为 <span class="math inline">\(p\)</span> 的伯努利分布（这里的 p为成功的概率），然后通过 MLE 可求得 cross entropy 的形式</p><p>而在 cross entropy 基础上做了如上的 reweight后，相当于是<strong>假设了 label 服从了参数为 <spanclass="math inline">\(p\)</span> 的<ahref="https://zh.wikipedia.org/wiki/%E5%B9%BE%E4%BD%95%E5%88%86%E4%BD%88">几何分布</a></strong>（不是非常严谨，因为这里的<span class="math inline">\(p\)</span> 是失败的概率），reweight时使用的值（即 label <spanclass="math inline">\(T\)</span>），就是几何分布的 pdf 取 log后提到前面的值，表示连续失败 <span class="math inline">\(T\)</span>次（这里跟原来的几何分布的物理含义刚好相反）</p><h2 id="bucketing-with-softmax">Bucketing With Softmax</h2><p>在回归中，还有另一种套路就是分桶+softmax，其思路也很直观，就是对label 的值域进行分桶，然后根据每个样本的 label把样本分到某个桶里，训练时转为一个多分类问题，通过 softmax损失函数进行训练</p><p>serving 时利用 softmax预估的概率分布，对每个桶做加权求和,如下式所示，<spanclass="math inline">\(n\)</span> 表示有 <spanclass="math inline">\(n\)</span> 个桶，<spanclass="math inline">\(p_i\)</span> 表示每个桶的概率，<spanclass="math inline">\(v_i\)</span>则表示每个桶的值（往往会取桶的中值）</p><p><span class="math display">\[pred = \sum_{i=1}^{n} p_iv_i\]</span></p><p>这个方法的关键在于如何分桶，包括分桶的数量和每个桶的大小，这两个变量对最终的效果影响会比较大，分桶过多，容易导致每个桶的样本过于稀疏，而分桶过少，预估值有没有区分性</p><p>一般的做法是人工根据 label的后验分布进行划分，且由于实际中的数据往往会比较长尾（即 label较小的样本会比较多），所以会在 label较小的时分桶数量较多，桶的间隔也会越小，目的还是让每个分桶的样本尽量均衡；但桶的数量和大小，是需要不断调整的超参</p><p>除了直接使用桶的均值作为最终的加权求和项，还可以在每个桶都套上一个前面提到的损失如mse 等，不过这样就相当于是分区间的 multi-task 建模了，或者说是 ensemble中的 stacking 方法了</p><p>在这类方法中，另一个常见的操作就是 ** labelsmoothing**，这个方法的出发点是对于原来的方法丢掉了 label之间的大小关系，比如说把 label=50 的样本分到[0,10] 的桶和 [51, 100]的桶的损失是没有区分性的，因此自然的一个想法是让原来 one-hot 的 label变得更加 smooth</p><p>具体的思想是在训练时对 label做变换，让其变为类似高斯分布或拉普拉斯分布的形式，比如说原来的 label 是[0, 0, 0, 0, 1, 0, 0, 0], 对其进行 smooth 后会变为 [0, 0, 0.01, 0.03,0.9, 0.03, 0.02, 0.01], 而这里变换的方法也相当于一个超参了</p><p>总的来说，这个方法涉及到比较多的先验知识，包括如何分桶，如何选择label smoothing 的函数；但是避免了对 label的先验假设，理论上适用于任意的回归任务，但是需要定期review，防止总体数据有变，先验假设失效</p><h2 id="ordinal-regression">Ordinal Regression</h2><p><a href="https://en.wikipedia.org/wiki/Ordinal_regression">Ordinalregression</a>是一种适用在关注不同值的序，但不怎么关注具体的值的场景，套用 wiki的话是这么说的</p><blockquote><p>variable whose value exists on an arbitrary scale where <strong>onlythe relative ordering between different values is significant</strong>.It can be considered an intermediate problem between regression andclassification</p></blockquote><p>常见的任务比如说评级，例如针对图片、视频的色情程度做出评级，不直接采用分类的原因，跟上面提到的bucketing 方法里的 label smoothing 一样，分到不同的桶里没有区分性，</p><p>具体的 loss 形式也是基于 MLE 来推导，但是不同于前面的算式基于 PDF (<ahref="https://en.wikipedia.org/wiki/Probability_density_function">ProbabilityDensity Function</a> ) 做 MLE 的推导，这里采用的 CDF(<ahref="https://en.wikipedia.org/wiki/Cumulative_distribution_function">CumulativeDistribution Function</a>)，这里用了基于 CDF 的MLE，推导过程如下图所示，从推导过程可知，这里的推导的假设也是<strong>“误差<span class="math inline">\(\epsilon\)</span>服从标准正态分布”</strong>，跟 MSE 一样</p><p><img data-src="https://wulc.me/imgs/OrdinalRegressionLoss.jpg" height="70%" width="70%" alt="Ordinal Regression 推导"></p><p>用来区分样本处于不同区间的 <spanclass="math inline">\(\theta\)</span> 也是需要通过训练得到的参数，最终的serving 输出也是依赖 <span class="math inline">\(\theta\)</span>和具体的预估值， 这篇文章提供了一个实现参考：<ahref="https://zhuanlan.zhihu.com/p/482153702">处理分级问题的利器OrdinalRegression</a></p><p>值得注意的是，对于评级任务，label是比较明确的，但是对于一般的回归任务，还是存在着划分区间，或者说给每个label 评级的过程，这个跟上面的 softmax 类方法一样，也是需要拍的超参</p><h2 id="小结">小结</h2><p>本文主要描述了回归任务中常见的一些损失函数，每种损失函数背后的假设不相同，其适用范围也不一样</p><p>MSE、MAE、Huber Loss是回归中比较常用和直观的回归损失，其假设是预估值和真实 label服从正态分布或拉普拉斯分布</p><p>Log-normal 损失函数则直接假设 label 服从 log-normal 分布，通过 MLE去求解 log-normal 的概率密度函数中均值 <spanclass="math inline">\(\mu\)</span> 和方差 <spanclass="math inline">\(\sigma\)</span> 这两个参数（二分类中的 crossentropy的求解原理也是这样，只是分布改成了伯努利分布，参数改成了事件发生的概率<span class="math inline">\(p\)</span>）</p><p>除了直接预估，也有通过转为分类来间接预估最终的值的，主要有 2类方法（1）Weighted Logistics regression （2）Bucketing With Softmax</p><p>Weighted Logistics regression 通过把一个 label 为 <spanclass="math inline">\(T\)</span> 的样本当做 <spanclass="math inline">\(T\)</span>个正样本（和一个负样本），在统计意义上推导保证了预估的无偏，在实际中应用也较为广泛，其背后的假设是label 服从几何分布</p><p>Bucketing With Softmax 则是通过对 label 进行先验分桶，然后通过softmax 预估 label落在每个桶的概率分布，最后对每个桶进行概率加权求和得到最终的预估值，这种方法的好处是对分布没有任何假设，理论上适用所有的分布，但效果非常依赖分桶的数量和桶大小，其中也涉及label smoothing、stacking 等改进技巧</p><p>Ordinal Regression 则是一种关心序但不关心绝对值误差的回归loss，其假设跟 MSE 一样，但是使用了 CDF 而不是 PDF来推导最终的损失，并通过训练得到分割不同级别的阈值，一般在评级任务中较为常用；但是在更一般的回归任务中，还是会依赖人工划分区间给予不同样本不同的评级</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;在搜广推相关业务中，除了 ctr、cvr 这类常规的二分类任务，还存在着预估
stay_duration、LTV、ECPM、GMV 等一系列回归任务&lt;/p&gt;
&lt;p&gt;ctr、cvr
这类二分类任务常用的损失函数是交叉熵损失，基本假设是事件服从伯努利分布，最终学习的输出是正样本的比例，而回归任务中存在着非常多种的损失函数可选，如
mse、mae、huber loss、log-normal、weighted logistics regression、softmax
等&lt;/p&gt;
&lt;p&gt;每种损失函数都有其假设和适用范围，如果真实 label
分布与假设差异较大，容易导致结果不佳，因此，本文会重点关注这些常见 loss
的推导过程以及假设&lt;/p&gt;</summary>
    
    
    
    <category term="机器学习" scheme="https://wulc.me/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="计算广告" scheme="https://wulc.me/tags/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    <category term="机器学习" scheme="https://wulc.me/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>A Survey of Multi-Domain</title>
    <link href="https://wulc.me/2023/03/19/A%20Survey%20of%20Multi-Domain/"/>
    <id>https://wulc.me/2023/03/19/A%20Survey%20of%20Multi-Domain/</id>
    <published>2023-03-19T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.172Z</updated>
    
    <content type="html"><![CDATA[<p>在实际的业务中，数据往往由多个 domain组成，以广告为例，往往会存在多个转化目标，在 ctr、cvr的预估时也要考虑不同转化目标的影响，因为在不同转化目标下，ctr、cvr的分布(如均值、方差)往往是不一致的</p><p>解决这个问题最直观的思路是加 domain 相关特征或根据 domain拆模型，前者属于隐式的方法，需要特征的区分性足够强、能被模型学到，但这个足够强没有一个量化的标准，基本只能看实验效果；后者则存在维护成本过高的问题，比如说有n 个 domain 就要拆成 n 个模型</p><p>本文着重讲如何通过一个模型 serve 多个 domain的方法，主要是在业界验证有收益且公开发表的工作，基本上可以分为 3 类</p><ol type="1"><li>multi-head 结构</li><li>LHUC 机制</li><li>GRL 机制</li></ol><span id="more"></span><h2 id="mmoe">MMOE</h2><p>在一个模型中根据多个 domain 拆成多个 head（每个 head 代表一个domain），通过每个 head 的参数学习特定 domain的分布，是一种比较直观和常见的做法</p><p>这类方法的代表是 MMOE: <ahref="https://dl.acm.org/doi/pdf/10.1145/3219819.3220007">Modeling TaskRelationships in Multi-task Learning with Multi-gateMixture-of-Experts</a></p><p>下图直观展示了拆 head 的集中常见做法</p><p><img data-src="https://wulc.me/imgs/MultiDomainMMOE.jpg" height="50%" width="50%" alt="mmoe 结构对比"></p><p>MMOE 中的两个 M，第一个代表 multi-gate，第二个代表multi-expert；multi-expert 比较好理解，从 ensemble 的角度来看，就是在做bagging，而 gate 就是在控制每个 expert 的 weight，multi-gate 则是为每个expert 分配一个 gate，本质上就是做到 domain-wise 的优化</p><p>而 gate 的具体实现，也是一个 mlp, 最终通过 softmax 得到每个 expert 的weight，对于第 <span class="math inline">\(k\)</span>个task，计算过程如下图所示</p><p><img data-src="https://wulc.me/imgs/MultiDomainMMOE_GATE.jpg" height="50%" width="50%" alt="mmoe gate 结构"></p><h2 id="star">STAR</h2><p>这是阿里的一篇 paper，应用场景就是比较典型的 CTR 业务，<ahref="https://arxiv.org/pdf/2101.11427.pdf">One Model to Serve All: StarTopology Adaptive Recommender for Multi-Domain CTR Prediction</a></p><p>在模型结构上，也是为每个 domain分配一部分自己的参数，从而达到在一个模型中 serve 多个 domain的目的，这一点跟 MMOE 原理上是一样的，文章是这么说的</p><blockquote><p>Essentially, the network of each domain consists of two factorizednetworks: one centered network shared by all domains and thedomain-specific network tailored for each domain</p></blockquote><p>STAR 基本结构如下图(b)所示，直观来看，有一个公共的 head，同时为每个domain 分配了一个 head，最终每个 head 的参数是公共 head 参数与 domainhead 参数的 element-wise 结果</p><p><img data-src="https://wulc.me/imgs/MultiDomainSTAR.jpg" height="50%" width="50%" alt="mmoe star 结构"></p><ul><li>Partitioned Normalization(PN)</li></ul><p>在上面的结构中，有一个 Partitioned Normalization (PN)的部分，目标是解决统一 batch normalization 在这 multi-domain中不适用的问题</p><p>常规的 batch normalization 会计算 batch 内所有的样本的 mean 和variance，然后做归一化，如下图所示；这里有个<strong>假设就是这批样本是独立同分布(i.i.d.)</strong>的，但multi-domain 本身的要解决的问题就是不同 domain的分布不一样，因此不能直接用原始的 batch normalization；关于 BN为何有效，可参考这篇文章：<ahref="https://arxiv.org/pdf/2105.07576.pdf">Rethinking “Batch” inBatchNorm</a></p><p><img data-src="https://wulc.me/imgs/MultiDomainSTAR_BN.jpg" height="40%" width="40%" alt="batch normalization"></p><p>而 PN 的做法是为原始 BN 中的参数 <spanclass="math inline">\(\gamma\)</span> 和 <spanclass="math inline">\(\beta\)</span> 生成额外的 domain-specify参数，如下图所示</p><p><img data-src="https://wulc.me/imgs/MultiDomainSTAR_PN.jpg" height="40%" width="40%" alt="partitioned normalization"></p><ul><li>Auxiliary Network</li></ul><p>这是个小网络，输入是domain indicator(表示这个样本来自哪个domain)，输出是一个预估值，最终输出的预估值会与上面的 STAR的模型加和做最终预估; 作用等价于为每个 domain 增加了一个 bias 项</p><p><img data-src="https://wulc.me/imgs/MultiDomainSTAR_AT.jpg" height="40%" width="40%" alt="Auxiliary Network"></p><p>实验结果这里不展开，paper 效果显示比一些已有的 multi-domain任务要好（参数量是否打平没提到）；也对 PN 的效果做了消融，结果显示 PN的效果比直接用 BN 要好</p><h2 id="lhuc">LHUC</h2><p>前面的两篇文章基本思路都是为不同的 domain 分配多一个 head的参数，然后通过不同 head 来描述不同 domain 的差异</p><p>提出 LHUC 这篇文章则没有显式地分 head ，而是通过在 hidden layer上乘上一个 domain-aware embedding，来达到这样的效果：<ahref="https://arxiv.org/abs/1601.02828">Learning Hidden UnitContributions for Unsupervised Acoustic Model Adaptation</a></p><p>这篇 paper 最早是在 speech 领域提出的一个方法，基本的思路是为每个speaker 单独调整 nn 中全连接层里部分的参数，从而达到每个 speaker的个性化预估；总体思路比较直观，也很容易把方法迁移至推荐上</p><p>快手的提出的 PEPNet(<ahref="https://arxiv.org/pdf/2302.01115.pdf">Parameter and EmbeddingPersonalized Network for Infusing with Personalized PriorInformation</a>) 也是借鉴了 LHUC 的这个思想</p><p>整个模型结构如下图所示，LHUC 部分是最右边的 PPNet 部分，每个 GateNU相当于为每个 hidden layer 生成一个 domain-aware 的 embedding，左边的EPNet 则是相当于为 embedding 不用分生成类似的 embedding</p><p><img data-src="https://wulc.me/imgs/MultiDomainLHUC_PEPNet.jpg" height="50%" width="50%" alt="PEPNet 结构"></p><p>Gate NU 可以理解为一个简单两层的 nn网络，输入是<strong>依靠先验知识挑选的能够区分不同 domain的特征</strong>，输出则是一个 tensor（维度大小与 hidden layer 一样）</p><p><img data-src="https://wulc.me/imgs/MultiDomainLHUC_GateNU1.jpg" height="40%" width="40%"  alt="Gate NU"><img data-src="https://wulc.me/imgs/MultiDomainLHUC_GateNU2.jpg" height="40%" width="40%" alt="Gate NU"></p><p>除了结构上的改进，这篇 paper还做了较多的工程上的有优化，这里不详细展开</p><h2 id="grl">GRL</h2><p>这里主要想介绍 GRL（Gradient ReversalLayer）这个机制，这个机制出自论文 <ahref="https://arxiv.org/pdf/1409.7495.pdf">Unsupervised DomainAdaptation by Backpropagation</a></p><p>论文主要想解决的问题是 domain adaption，即在 source domain有较多数据，target domain 较少数据，怎么能够较好地同时解决两个 domain的问题，paper 里提到的方案是从特征层面去解决这个问题</p><blockquote><p>the approach promotes the emergence of “deep” features that are (i)discriminative for the main learning task on the source domain and (ii)invariant with respect to the shift between the domains.</p></blockquote><p>为了达到这个目标，论文提出的 GRL 机制如下图所示</p><p><img data-src="https://wulc.me/imgs/MultiDomainGRL.jpg" height="50%" width="50%" alt="GRL 机制"></p><p>从结构上来看，这也是个 multi-head 的结构，但蓝色的 head 是 sourcedomain 的原始 task，<strong>红色的 head（后面简称为 discriminator）则是一个 domain classifier，即是用来区分样本是属于哪一个 domain的</strong></p><p>两个 task 在做 bp 时，蓝色的 head 正常回传梯度，discriminator则在梯度回传到 feature extractor 即图中色绿色部分时，乘上一个 negativeconstant，这就是 GRL 的机制</p><p>那为什么要这么做呢？paper 给出的解释是这样的，</p><blockquote><p>we want to make the features <span class="math inline">\(f\)</span>domain-invariant. That is, <strong>we want to make the distributions<span class="math inline">\(S(f) = \lbrace G_f(x;\theta_f)|x∼S(x)\rbrace\)</span> and <span class="math inline">\(T(f) = \lbraceG_f(x;\theta_f)|x∼T(x) \rbrace\)</span> to be similar</strong>. Underthe covariate shift assumption, this would make the label predictionaccuracy on the target domain to be the same as on the source domain(Shimodaira, 2000).</p></blockquote><p>即希望 feature extractor 抽取出来的特征是 domain-invariant、对 domain不敏感的，或者说<strong>基于抽取出来的特征，discriminator不能很好地区分样本来自哪个 domain</strong></p><p>而如果不加 GRL，正常的 bp 是会 discriminator 能够区分样本来自哪个domain 的，加了 GRL 后，则能够达到上面提到的“discriminator不能很好地区分样本来自哪个 domain”</p><p>那另一个问题来了，即为什么要在 feature extractor 这一层做，而不是在<span class="math inline">\(L_d\)</span> 上就加一个负号？</p><p>因为<strong>如果直接在 <span class="math inline">\(L_d\)</span>上加负号，相当于让 discriminator 把它分到错误的那个 domain，但一个好的feature 应该是让 discriminator 分辨不出它来自哪个domain，而不是把它分到错误的那个 domain</strong></p><p>因此，GRL 机制某种程度上也是一类 featureengineering，用于提取出适用于多个 domain 的 feature</p><h2 id="小结">小结</h2><p>综上，本文主要介绍了三种解决 multi-domain 的思路，分别是 multi-head结构，LHUC 机制和 GRL机制；据笔者的了解，目前这几种方案在业界都有落地的案例，值得在相应业务中进行尝试~</p><p>multi-head 机制比较直观，为每个 domain 分配一个 head，分别学习不同domain 的分布，MMOE 和 STAR 这一类模型属于这种；LHUC机制则是根据先验选择一批有区分度的特征，通过一个小的 nn学习一个隐变量作用到hidden-layer上（其实也能作用到 embedding 上，PEPNet中没有介绍的 EPNet 就是这部分，原理基本一致）；GRL则是通过训练方式使得模型抽取出来的 feature 是 domain-invariant的，训练的思想跟 GAN 的对抗训练比较类似</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;在实际的业务中，数据往往由多个 domain
组成，以广告为例，往往会存在多个转化目标，在 ctr、cvr
的预估时也要考虑不同转化目标的影响，因为在不同转化目标下，ctr、cvr
的分布(如均值、方差)往往是不一致的&lt;/p&gt;
&lt;p&gt;解决这个问题最直观的思路是加 domain 相关特征或根据 domain
拆模型，前者属于隐式的方法，需要特征的区分性足够强、能被模型学到，但这个足够强没有一个量化的标准，基本只能看实验效果；后者则存在维护成本过高的问题，比如说有
n 个 domain 就要拆成 n 个模型&lt;/p&gt;
&lt;p&gt;本文着重讲如何通过一个模型 serve 多个 domain
的方法，主要是在业界验证有收益且公开发表的工作，基本上可以分为 3 类&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;multi-head 结构&lt;/li&gt;
&lt;li&gt;LHUC 机制&lt;/li&gt;
&lt;li&gt;GRL 机制&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="计算广告" scheme="https://wulc.me/categories/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    
    <category term="计算广告" scheme="https://wulc.me/tags/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    <category term="机器学习" scheme="https://wulc.me/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>混排的那些事儿</title>
    <link href="https://wulc.me/2023/02/26/%E6%B7%B7%E6%8E%92%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    <id>https://wulc.me/2023/02/26/%E6%B7%B7%E6%8E%92%E9%82%A3%E4%BA%9B%E4%BA%8B/</id>
    <published>2023-02-26T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.222Z</updated>
    
    <content type="html"><![CDATA[<p>混排，往往是的推荐系统的最后一个环节，在这个阶段，自然内容（后面简称item）需要与营销内容（后面简称ad）进行混合，生成最终推送给用户的 list</p><p>如果以 Long Term Value(LTV)的视角来看,这是个在 LT 和 V 之间做trade-off 的过程，ad 如果出得过多，必然会挤压 item的数量和位置，进而影响用户体验和留存即 LT，但相应的广告收入，或者说Average revenue per user(<ahref="https://www.investopedia.com/terms/a/arpu.asp">ARPU</a>)会提升，反之亦然</p><p>所以业界往往的做法是定一个用户体验的约束，在这个约束下尽可能优化 ad的效率，即达到收入最大化，因此很自然可以把这个建模成一个最优化问题，LinkedIn在 2020 年的这篇 paper就是这么做的，<ahref="https://dl.acm.org/doi/pdf/10.1145/3394486.3403391">Ads Allocationin Feed via Constrained Optimization</a></p><p>直观地看混排这个问题，有 2 个子问题需要解决 （1）怎么计算每个 item 或ad 在每个位置上的价值：因为 item 和 ad是各自排序的，目标不同，最终的值的量纲也不同，这么把两者的 scale拉到可比范围是一个需要讨论的问题 （2）怎么分配能让最终 list价值最大化：在 item 和 ad 的价值确认后，怎么插入 item 和 ad的位置，从而达到整个 list 的最大化</p><p>上面提到的 LinkedIn 的 paper重点是在解决第二个问题，部分内容也涉及到第一个问题 ；本文会先讲一下这篇paper 的建模方法，然后讨论下计算 item 和 ad价值的一些思路，混排中一些其他需要注意的事项</p><span id="more"></span><h2 id="建模方案">建模方案</h2><p>paper把问题建模成如下图最优化问题（单次请求的最优，目前不考虑请求间的优化）</p><p><img data-src="https://wulc.me/imgs/Rerank_optimize.png" height="30%" width="30%"></p><p>各符号含义如下</p><ul><li><span class="math inline">\(i\)</span>: 一次请求中位置的 index</li><li><span class="math inline">\(x_i\)</span>: 是否在第 i 个位置插入ad</li><li><span class="math inline">\(j\)</span>: 请求的 index</li><li><span class="math inline">\(u_{i}^{o}\)</span>: item 在第 i 个位置的engagement utility（可理解为内容本身的价值，item和ad都有）</li><li><span class="math inline">\(u_{i}^{a}\)</span>: ad 在第 i 个位置的engagement utility</li><li><span class="math inline">\(r_{i}\)</span>: ad 在第 i 个位置的revenue utility（可理解为商业价值，item没有这个价值）</li><li><span class="math inline">\(C\)</span>: 全局 engagement utility的一个门槛, 一种可能的方式是设置成可能最大的 engagementutility（没有广告） 的一个百分比</li></ul><p>通过对偶拉格朗日可以求解出如下的解，式子中的 <spanclass="math inline">\(\alpha\)</span>是上面第一个约束的拉格朗日乘数；这个变量的物理含义是一个 bid，paper称其为 “shadow bid”，作用是把 engagement utility 的 scale 变换至 revenueutility 的 scale；则最终在位置 i 插入 ad 或 item 的价值如下图表 1所示</p><p><img data-src="https://wulc.me/imgs/Rerank_solution.png" height="40%" width="40%"></p><p>上面的最优化问题的约束只是总体 list 的 engagement utility要大于特定预制，但混排往往还有一些硬约束，在paper中提到的是：top slot 和min gap，分别表示第一个广告的位置约束，两个广告最小间隔的约束；除了这两个约束，一些常见的约束还有showtime gap 约束（出现广告的评率）、adload约束等(广告出现比例的约束)</p><p><img data-src="https://wulc.me/imgs/Rerank_constraint.png" height="30%" width="30%"></p><p>这两个约束并没有直接体现在最优化的建模里，而是体现在最后的混排算法里，整个算法流程如下</p><p><img data-src="https://wulc.me/imgs/Rerank_algorithm.png" height="40%" width="40%"></p><h2 id="建模关键问题讨论">建模关键问题讨论</h2><p>上面的建模虽然比较直观，但涉及到的一些需要解决的关键问题，</p><h3 id="shadow-bid-alpha-的计算">shadow bid <spanclass="math inline">\(\alpha\)</span> 的计算</h3><p>paper 提到的 shadow bid，在经济学上称为<ahref="https://zh.wikipedia.org/wiki/%E5%BD%B1%E5%AD%90%E4%BB%B7%E6%A0%BC">影子价格</a>，物理含义是表示的是增加一个单位的资源所带来的边际收益，关于影子价格更多讨论可参考<ahref="https://www.zhihu.com/question/23510001">线性规划中的影子价格怎么理解？</a></p><p>这里的影子价格 <span class="math inline">\(\alpha\)</span> 是一个关于<span class="math inline">\(C\)</span> 的函数，paper提到获取这个值的三种方法，</p><p><img data-src="https://wulc.me/imgs/Rerank_shadowbid.png" height="40%" width="40%"></p><p>从上图可知，基本思路是 （1）确定 <spanclass="math inline">\(C\)</span> 的值之后求解原问题，得到 <spanclass="math inline">\(\alpha\)</span> （2）通过在线 ab实验来确定这个参数（3）离线回放（感觉这里跟第一个是重合的，因为求解原问题也是需要回放历史数据，只是用多长的历史数据，以及更新频率有多大）</p><h3 id="u_iou_ia-和-r_i的计算"><spanclass="math inline">\(u_{i}^{o}\)</span>、<spanclass="math inline">\(u_{i}^{a}\)</span> 和 <spanclass="math inline">\(r_{i}\)</span>的计算</h3><p>关于这几个值的获取，paper 并没有提供明确的方法，只是提到了<strong><span class="math inline">\(u_{i}^{a}\)</span>、 <spanclass="math inline">\(u_{i}^{o}\)</span> and <spanclass="math inline">\(r_{i}\)</span> are drawn from the samedistribution as was the historical data</strong></p><p>但如果真的这么做，存在的问题必然是历史数据会很稀疏，容易出现新的 item或 ad没有数据，或者把统计历史数据的维度拉得更大，这样容易导致效果变差，数据没区分性；因此，最终还是需要往预估方向去做</p><p>如果考虑实际的业务，<span class="math inline">\(u_{i}^{o}\)</span> 和<span class="math inline">\(r_{i}\)</span> 的值比较好获取，直接取原本item 排序和 ad 排序中各自的分数即可，但 <spanclass="math inline">\(u_{i}^{a}\)</span> 的值应该如何获取？（其实这里的<span class="math inline">\(u_{i}^{o}\)</span> 和 <spanclass="math inline">\(r_{i}\)</span>的值的获取还有个问题，就是怎么获取一个 item 或 ad 在所有位置的 <spanclass="math inline">\(u\)</span> 或 <spanclass="math inline">\(r\)</span>，这部分在下面的 position bias会讨论）</p><p>如果让 ad 直接走推荐侧的模型，在物理意义上是 make sense的，但可能会存在 2 个问题（1）ad 的特征未必能跟 item的完全对齐（2）需要保证 <span class="math inline">\(u_{i}^{a} \ltu_{i}^{o}\)</span></p><p>这里第二个问题尤为重要，因为如果这个不成立，上面的最优化问题最终的解会是全出ad，这显然是不合理的，那如何做这一点的保证，笔者现在也没想到很好的方法；比如说在推荐模型做multi-head，一个 head 预估 item，一个 head 预估 ad，通过 regularization尽量保证 item head 要大于 ad head，但也没法做严格的保证</p><h3 id="position-bias">position bias</h3><p>这个问题在上面的 <spanclass="math inline">\(u_{i}^{o}\)</span>、<spanclass="math inline">\(u_{i}^{a}\)</span> 和 <spanclass="math inline">\(r_{i}\)</span> 的获取讨论中提到了</p><p>如果在计算 <span class="math inline">\(u_{i}^{o}\)</span>、<spanclass="math inline">\(u_{i}^{a}\)</span> 和 <spanclass="math inline">\(r_{i}\)</span>不考虑位置信息，那必然是有偏的，因为不同位置的 ctr、cvr 等天然不一致</p><p>paper 里提到了一种方法，也是实际比较常用的：<strong>training阶段使用实际的 position，serving 阶段使用统一的position，同时保留一张映射表，映射不同位置跟 serving 时使用的统一位置的discount，映射表可通过后验数据统计获取得到，最终预估值乘上这个 discount就能等到不同位置的预估值</strong></p><p>这种做法的缺点是这张映射表需要经常更新，所以更好的做法是把这张表做到模型里，让模型训练过程中就能学到这个变化，预估阶段同时预估所有的位置的score</p><h3 id="gap-effect">gap effect</h3><p>对于推荐而言，往往序准确就可以了，但 a<strong>d因为涉及到实际扣费，会要求 ctr，cvr预估足够准确</strong>，才能避免扣费不准确，引起广告主的客诉等问题</p><p>除了上面的 position bias 会影响 ctr 准确性，两个 ad 之间的 gap大小也会影响 ad 的 ctr 等，如下图所示，ad 的 gap 之间如果过小，ad的点击率会过低，但 item 不会出现这种情况，本质上还是因为 ad的密集度过高，即使前面提到了有min-gap 这一类硬规则</p><p><img data-src="https://wulc.me/imgs/Rerank_gap_effect.jpg" height="40%" width="40%"></p><p>paper 提出的做法是给增加一个 gap 特征来捕捉这个信息，paper做了如下推导，最终生效的形式跟 position_discount 有点像，等价于在原来的ctr 基础上乘上一个 gap_discount, 下图中的 <spanclass="math inline">\(g\)</span> 是 <ahref="https://en.wikipedia.org/wiki/Logit">Logit function</a>, <spanclass="math inline">\(y_{ij}\)</span> 表示是否发生点击（还可进一步把<span class="math inline">\(\beta\)</span>参数化，做成个性化的参数）</p><p><img data-src="https://wulc.me/imgs/Rerank_gap_effect_logit.jpg" height="40%" width="40%"></p><p>而如果在上面的混排算法上加上 gap effect 的影响，会有如下的流程</p><p><img data-src="https://wulc.me/imgs/Rerank_gap_effect_algo.jpg" height="40%" width="40%"></p><h2 id="item-与-ad-价值度量的另一种思路">item 与 ad价值度量的另一种思路</h2><p>paper 认为 item 价值是 engagement utility，ad 的价值是 engagementutility + revenue utility</p><p>而上面也提到了获取 ad 的 engagement utility会比较难，因此可以也可以考虑使用另一种思路来度量 item 和 ad 的价值</p><p>因为涉及到扣费，ad 的价值是比较好衡量的，一般采用的是 ecpm = bid ×ctr ×cvr（为了讨论方便，此处省略hidden_cost），因此很自然的一个想法是，<strong>能否为每个item 也赋予一个 bid，这样也能在 item 侧算出一个类似 ecpm 的指标，与 ad侧能进行比较</strong></p><p>紧接着的问题是，item 侧的 bid 的含义是什么？ad 侧的 bid是有明确的物理含义的：广告主愿意为一个转化付的钱（还会叠加调价策略修改原始的广告主出价），但在item 侧并没有广告主这一角色，由谁来出这个 bid 呢？</p><p>最直观的方法就是基于 ad 和 item 各自预估值的量级的差异，拍一个 item侧的全局固定的 bid，但这样显然不是最优的，而且这个 bid的量级也需要及时监控和更新，因为随着迭代，两边的预估值的 sacle会发生变化</p><p>而如果从另一个角度来看，ad更多是表达广告主的诉求，目标就是要更多的用户转化；item更多是平台的诉求，目标是要为平台带来更多的用户和留存时间；留存时间越长，也意味着可供平台变现的流量会更多，或者说<strong>用户指标其实也是跟平台长期收入挂钩的</strong>；因此可以基于大盘来测算用户指标与平台收入的关系，以stay_duration 为例，可以对 stay_duration 分桶，测算 stay_duration与平台长期收入指标的相关关系，建立一个函数 <spanclass="math inline">\(f\)</span> 使得 <span class="math inline">\(bid =f(stay_duration)\)</span>, 当然这里的变量也不一定是stay_duration，也可以是考虑 dislike、active等各种信号，关键是要<strong>把用户在平台的留存、活跃等信息，与平台长期收入量化挂钩，然后基于这个收入倒推出一个item 侧的 bid</strong></p><p>对于 ad 而言，如果与 item 混排时，把 ad 插在 items 的第 <spanclass="math inline">\(k\)</span> 位带来的收益, 不仅仅是广告本身的ecpm，还可进一步考虑由于广告插入给总体 items 带来的损失（VCG计费的思想），即<strong>混排时 ad 的价值也可以考虑成“ad 带来收益 - item后移的损失”</strong>；这样的话如果插入的位置导致 item后移的损失较大，则总体的 ad 价值会下降，避免对 item 的挤压</p><h2 id="硬规则是否最优">硬规则是否最优</h2><p>上面提到了混排中存在着各种硬规则，比如说广告出现的首位，广告之间的min_gap，show_timegap等，从技术角度来说，这样的离散的硬规则显然不是最优的，会极大限制算法的搜索空间；而从业务的角度，这种硬规则往往是业务发展初期拍定的，随着业务发展，对当前业务是否合理也是需要重新评估的</p><p>举个例子，一个对 ad 敏感和一个对 ad不敏感的用户，使用同一套硬规则并不是最优的，因为同样的广告频率，在敏感用户那转化率会比较低，同时对用户的留存影响也会比较大（相对于不敏感的用户）；而如果给对ad 不敏感的用户出更多的 ad，同时减少敏感用户的ad，打平总体的 ad数，最终总体的 engagement utility 和 revenue utility理论上也是更优的</p><p>具体的实现上，一般需要设置一套规则和计算方法，能够计算出硬规则中的所有可能情况下的utility，然后加入到 list 的总体价值中</p><p>而这其实也涉及到推荐或广告系统里的优化的一个方向，就是个性化，一般大盘策略上对所有用户都相同的超参或策略，都会有个性化的空间</p><p>当然在这个过程也要注意个性化往往也会有个限制，以混排为例，需要对不敏感的用户有体验保护，不能逮住这部分用户一个劲地薅</p><h2 id="小结">小结</h2><p>本文从 LinkedIn 的一篇 paper展开，介绍了混排需要解决的问题以及一种建模方法，paper的建模不复杂，关键是建模中使用的各个 utility 的获取，paper在这部分并没有说得比较详细，可能也是因为这部分跟实际业务耦合比较紧密；因此，本文后面也讨论了一种item 和 ad 价值可能的计算方式：为 item 计算一个 bid， 同时考虑 ad 插入对item 的影响</p><p>另外，paper 也提到了 position bias 、gap effect等在混排中常见的问题，本文针对 paper提出的方法和业界的一些做法做了讨论</p><p>最后，也探讨了一个比较比较开放的问题，就是混排中涉及到的 hardrule，hard rule 一般是红线，但从技术视角来看肯定不是最优的，同时 hardrule 是否合理，以及如何从业务角度和技术角度来 soften the hard rule，拿到engagement utility 和 revenue utility两部分的收益，也许是个值得讨论的问题</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;混排，往往是的推荐系统的最后一个环节，在这个阶段，自然内容（后面简称item）需要与营销内容（后面简称
ad）进行混合，生成最终推送给用户的 list&lt;/p&gt;
&lt;p&gt;如果以 Long Term Value(LTV)的视角来看,这是个在 LT 和 V 之间做
trade-off 的过程，ad 如果出得过多，必然会挤压 item
的数量和位置，进而影响用户体验和留存即 LT，但相应的广告收入，或者说
Average revenue per user(&lt;a
href=&quot;https://www.investopedia.com/terms/a/arpu.asp&quot;&gt;ARPU&lt;/a&gt;)
会提升，反之亦然&lt;/p&gt;
&lt;p&gt;所以业界往往的做法是定一个用户体验的约束，在这个约束下尽可能优化 ad
的效率，即达到收入最大化，因此很自然可以把这个建模成一个最优化问题，LinkedIn
在 2020 年的这篇 paper就是这么做的，&lt;a
href=&quot;https://dl.acm.org/doi/pdf/10.1145/3394486.3403391&quot;&gt;Ads Allocation
in Feed via Constrained Optimization&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;直观地看混排这个问题，有 2 个子问题需要解决 （1）怎么计算每个 item 或
ad 在每个位置上的价值：因为 item 和 ad
是各自排序的，目标不同，最终的值的量纲也不同，这么把两者的 scale
拉到可比范围是一个需要讨论的问题 （2）怎么分配能让最终 list
价值最大化：在 item 和 ad 的价值确认后，怎么插入 item 和 ad
的位置，从而达到整个 list 的最大化&lt;/p&gt;
&lt;p&gt;上面提到的 LinkedIn 的 paper
重点是在解决第二个问题，部分内容也涉及到第一个问题 ；本文会先讲一下这篇
paper 的建模方法，然后讨论下计算 item 和 ad
价值的一些思路，混排中一些其他需要注意的事项&lt;/p&gt;</summary>
    
    
    
    <category term="计算广告" scheme="https://wulc.me/categories/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    
    <category term="计算广告" scheme="https://wulc.me/tags/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    <category term="机器学习" scheme="https://wulc.me/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>做一个清醒的傻瓜</title>
    <link href="https://wulc.me/2023/02/05/%E5%81%9A%E4%B8%80%E4%B8%AA%E6%B8%85%E9%86%92%E7%9A%84%E5%82%BB%E7%93%9C/"/>
    <id>https://wulc.me/2023/02/05/%E5%81%9A%E4%B8%80%E4%B8%AA%E6%B8%85%E9%86%92%E7%9A%84%E5%82%BB%E7%93%9C/</id>
    <published>2023-02-05T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.135Z</updated>
    
    <content type="html"><![CDATA[<p>随机性，如同带刺的玫瑰，危险而又迷人；随机性可能会给你带来生活中的惊喜，但也有可能会降临足以毁灭生活的灾难</p><p>在去年的<ahref="https://wulc.me/2023/01/01/2022%20%E5%B0%8F%E7%BB%93/">年度小结</a>提到，22年最大的感悟，是生活存在非常多的随机性，正是这些随机性导致了无法预测和无人知晓的未来；1月份在查资料过程中看到了塔勒布的<ahref="https://book.douban.com/series/45353">“不确定性”四部曲</a>：《随机漫步的傻瓜》、《黑天鹅》、《反脆弱》和《非对称风险》，相比于笔者简单的感悟，这几本书花了很大功夫来描述随机性这件事情</p><p>如果单纯看随机性，很容易让我们陷入虚无主义中，因为没什么是确定的，或者说没什么是能够坚信的，因为随机性几乎主导了一切。幸运的是，书里给出了还给出了一些也许可供参考的方法论，虽然作者行文有时候较为晦涩，但总体还是值得一读的。本文主要是《随机漫步的傻瓜》和《黑天鹅》两本书的一些笔记以及拓展，祝开卷有益。</p><span id="more"></span><h2 id="我们都是随机漫步的傻瓜">我们都是随机漫步的傻瓜</h2><p>生活往往被随机性左右，你的成功或失败不见得是因为比其他人高明或愚蠢，很可能只是单纯的运气的结果</p><p>上面这句话，也许是《随机漫步的傻瓜》最想给我们揭示的道理</p><p>《<ahref="https://book.douban.com/subject/3688489/">异类</a>》一书中也提到以下现象</p><blockquote><p>英超联赛大部分球员都在9月至11月出生；</p><p>比尔·盖茨和史蒂夫·乔布斯都出生在1955年；</p><p>纽约很多著名律师事务所的开创者竟然都是犹太人后裔，并且他们的祖辈大多是在纽约的服装行业谋生。</p><p>为什么对那些成功人士进行的统计结果会这样一致“意外”？这是因为：</p><p>英超球员注册时间是9月。在同龄的球员中，9月份出生的人实际上比8月份出生的人几乎大了一岁，一岁的差距对他们的职业生涯有着不可低估的影响；</p><p>1955年前后正是计算机革命的时期，如果你出生太早，就无法拥有个人电脑，如果出生太晚，计算机革命的好机会又被别人占去了；</p><p>犹太人律师事务所的成长，是因为他们正赶上企业重组的法律诉讼出现革新的时候，而他们移民到美国的祖辈们的经历又让他们出色地掌握了抓住机遇的能力。</p></blockquote><p>很多时候，大的成功往往靠的是天时地利人和，而且天时地利可能是主导因素。看人物自传往往会让我们热血澎湃，似乎遵循着成功者的路线，他的成功我也可以复制，但事实往往是他们在那个时代提供了那个时代最需要的东西，然后在合适的时机，时代给予了他们足够大的正向的反馈，不同时代的人压根无法复制。我们看到的往往都是幸存者偏差，因为无论概率多小，只要尝试的基数足够大，每个时代最终都能选出那一批为人所熟知的幸存者</p><p>这里并不是说人物自传一无是处，也不是说那些名人的成功是纯粹由机遇和随机性指导，他们的思考方式、他们付出的努力，都是无法粗暴地被“机遇”二字淹没的</p><p>但我们需要清楚地意识到，影响一件事情的成功或失败的因素往往是错综复杂，这其中有多少是运气成分，有多少又是努力的成分，往往无法给出一个明确的量化标准；而当我们面临一个选择时，如果能够清楚地意识到随机性在其中的影响，并心平气和的接收这个事实及其可能带来的后果，也许能让我们活得更加轻松和豁达</p><p>在股市上，我们往往也都是一个随机漫步的傻瓜，市场总体上升时，几乎每个人都觉得是自己英明的抉择选择才让自己赚得盆满钵满的，但其中是alpha 收益主导，还是 beta收益主导，可能大多数人都说不清楚；因为在短的时间内，市场很多所谓表现都是波动;各类新闻报纸每天都要点评股市，试图为今天的涨跌说出个理由，因为媒体总会想说点什么来明他们有存在的价值；但实际上没有什么理由，每天的股价变动由随机性决定更多</p><p>关于这本书，知乎上有个比较精彩的回答，<ahref="https://www.zhihu.com/question/20951240/answer/16699613">《随机漫步的傻瓜》是怎样的一本书？</a>；笔者把核心观点提炼如下,这里其实也提到了《黑天鹅》中的叙述谬误的现象，因为《随机漫步的傻瓜》出版得比《黑天鹅》更早，两者的观点会有些许重合</p><blockquote><p><strong>我们万事都需要一个解释，以获得内心的宁静。没有解释的事情会让人茶饭不思、寝卧难安</strong></p><p><strong>因此我们急于去总结成功的经验和失败的教训，其结果就是我们常常顾不得去分析这个成功或失败的原因是否存在</strong></p><p>但常常我么也会找不到确定的因果，于是我们只好迷信；这完全是我们从先古部落首领那里传承下来的习惯，比如他们采用了某种祭拜姿势就可以求得龙王降雨</p><p>这本书多少有一点虚无主义色彩。你没有什么可以相信的，如果有人因为努力而获得了巨大成就，要相信，事情没有那么复杂——大部分时候，都是运气使然。虚无主义的意思是，没有什么是确定的，或者说，没有什么会找到确定的原因，一切都是不确定的。</p><p>可以把它当成《心灵鸡汤》一类的读物。<strong>它让你接受现实——当然，前提是你足够理性，同时足够努力和聪明。准确地说，这不过是一本写给迷失在财富追求的过程之中的人们，换言之，是写给有点钱、有点追求、但是钱又不太多的人们看的</strong>。很重要的一个提示是：不要老看着多少人比你强，要看到多少人比你差</p></blockquote><h2 id="黑天鹅从何而来">黑天鹅从何而来</h2><p>不要忽视那些概率低、但是有极大的冲击性的事情，这些事情无法预测，但是在行动时要考虑到</p><p>上面这句话，也许是《黑天鹅》最想给我们揭示的道理</p><p>书里还给了很多由于惯性思维、人性等原因带来的问题，意识到这些点，也许能让我们能够更好地认知到很多事情或结论的局限性</p><h3 id="叙述谬误">叙述谬误</h3><p>很多时候，在黑天鹅发生后，人的本性促使我们在事后为它的发生编造理由，并且或多或少认为它是可解释和可预测的；而这其实也是黑天鹅发生的原因之一</p><p>书中将这一现象称作“叙述谬误”，叙述谬误指的是我们无法在不编造理由或者强加一种逻辑关系的情况下观察一系列事实。换句话说，我们在观察一组事实的时候，一定编造相应的理由或者逻辑关系，让我们觉得这组事实是可以解释的，符合逻辑的；如果不这样，我们就无法观察和表达。造成叙述谬误有以下几个原因</p><p>1）解释习惯；我们习惯对观察到的事实梳理因果关系，让事情变得可解释，这个过程虽然好，但是也会可能导致<strong>一些看起来无关的事实就会被我们忽视掉。而那些被忽略的事实往往会成为导致黑天鹅现象的原因，并且在黑天鹅事件发生后，被人们重新翻查出来，并加以解释</strong>2）模式辨识习惯：《<ahref="https://book.douban.com/subject/20507212/">习惯的力量</a>》指出，习惯之所以出现，是因为大脑一直在寻找可以省力的方式。模式就是大脑的省力方式，为了高效处理信息，作出反应，我们不得不训练自己形成各种习惯，但是这些<strong>习惯也会阻碍我们接受新的观念</strong>3）简化习惯：信息理论核心问题：1.信息获得是有代价的；2.信息的存储也是有代价的；3.信息的处理和提取也是有代价的正是这些代价，让我们简化了很多东西，倾向于讲故事而不是注重事实。而我们的简化行为使得我们以为世界的随机性要比实际的小</p><p>而如果进一步深究上面几个原因，我们会发现这都是人性导致的</p><ul><li>解释习惯是因为我们天生喜欢有条理的东西，为了让因果关系看起来更加可解释；而常常忽略了一些所谓的outlier，如同在机器学习中去除 outlier一样，有时候其实样本并不异常，只是我们的模型不足以学习到这些所谓的outlier，而人为地把这些样本过滤掉</li><li>模式辨识习惯和简化习惯，都是我们为了更省力地去做事情而发展出来的，毕竟如果每件事情都从头去想和做，是在是太费时费力了</li></ul><p>在书里的“自我欺骗的人类”一章中，则提到了人类的思想有三重迷雾：1）假想的理解，也就是在一个超出人们想象之外的复杂或随机的世界，人们都以为自己知道其中正在发生什么；很多发生过的事情本来应该被认为是完全不可思议的，但在事情发生之后，看上去却没那么不可思议了。这种事后合理性在表面上降低了事件的稀有性，并使事件看上去可以理解2）反省的误差，也就是我们只能在事后评价事物，就像只能以后视镜里看东西，<strong>历史在历史书中比在经验现实中显得更加清晰和有条理</strong>；在一个历史事件发生之前存在无数个事实，其中只有相当少的一部分会在后来你对历史事件的理解中有帮助，而这些有条理的时间会被记入史书中3）对事实性信息价值的高估</p><p>在生活中，当我们作出一些判断和决定前，如果能够清楚意识到叙述谬误这一现象的存在，以及上面提到的由人性的局限性，也许就是这本书能够给我们带来的价值之一</p><h3 id="极端斯坦平均斯坦与择业">极端斯坦、平均斯坦与择业</h3><p>这是《黑天鹅》中提到的两个概念，基本含义如下</p><p>平均斯坦：当样本数量最够大，任何个例都不会对整体产生重大影响（正态分布）极端斯坦：不平均性现象，个体能够对整体产生不成比例的影响（长尾分布）</p><p>如果从分布上来说，极端斯坦有点像方差较大的一个正态分布，极端的个体较少；而极端斯坦则是一个长尾分布，头部的一些个体会影响全局，跟二八法则有点像</p><p>这个概念往往会被应用在择业上</p><p>有些技术性的职业，比如牙医、咨询师、按摩师的收入是不可能具有突破性的，他们受到既定的时间内服务的病人或客户的最大数量的限制。在这些职业中，不论报酬多高，收入总是受到限制，他们不可能一夜致富，财富总是来自于持续的积累。并且这种工作在很大程度上是可预测的：他的收入可以增长，但不可能达到一天的收入超过余生的收入总和的程度，也就是说这种职业不会受到黑天鹅的驱使,假如你是一名会计师或外科医生，你不可能一夜之间成为超级英雄，也不太可能成为一名失败者。</p><p>而另外还有一些职业如果干得好，收入可以十倍、百倍地增长，同时几乎不需要增加额外的努力。比如股票交易员，买100股股票与买100万股股票的工作量是一样的，要打同样的电话，做同样的计算，对交易的正确性做同样的确认，收入却截然不同。同样，演员、录音师、作家对于同一作品，他们的工作量也是一样的，但这类职业可以不必增加劳动量就可能十倍、百倍地增加收入，一部发行量大的影片、一本畅销的书籍都能带来突破性的收入</p><p>一般<strong>智力，科学和艺术行为</strong>等属于极端斯坦，在这里成功是高度集中的，少量赢者得到蛋糕的大部分。其实极端斯坦基本上适用于所有“有意思”的职业，但<strong>从事他们并不是好主意，因为收入具有突破性的职业，只有在你成功的时候才对你有利，这样的职业竞争激烈，导致了更大的不平均和不确定性，在努力和回报之间存在巨大差异，可能会出现赢家通吃的现象，普通人或许什么也得不到；挨饿的演员比挨饿的会计师要多</strong></p><h3 id="无法预测的未来">无法预测的未来</h3><p>很多事情不能只靠过去的经验来判断，某件事情1000天的历史不会告诉你弟1001天的任何信息；我们从过去获得的实际上顶多是无关痛痒和虚假的信息，甚至是危险的信号</p><p>其实这个观点《随机漫步的傻瓜》中就有了，只是这里做了进一步的说明和延伸，同时提出了以下有趣的观点</p><ul><li><strong>信息会妨碍知识</strong></li></ul><p>因为人们对于经验现实的细节知识了解的越多，看到的噪点就越多，就可能把它们错当成真实信息。同时，<strong>一旦你的思维被某种世界观占据，你会习惯于只关注证明你正确的事例。吊诡之处在于，你拥有越多的信息，你就越认为自己正确</strong></p><p>因此，我们在接收信息时一定要谨慎过滤，不要轻易全盘接受，这里有 2个也许可供参考的方法</p><p>（1）<strong>注重事实而不是故事</strong>；我们天生喜欢故事，喜欢总结，喜欢简化，也就是减少事情的影响因素。没有人愿意去听某个无聊的抽象统计学讲座，我们喜欢听故事，这没有错，我们只是<strong>要去更加彻底的审视，故事是否对事实做了严重扭曲</strong></p><p>（2）<strong>控制接收信息的频率</strong>；从机器学习角度来讲，人其实是一个持续流式更行的onlinemodel，对近期收到的信息和样本会更加敏感，每小时收听广播比阅读周刊之所以要糟糕，是我们会被短时间的很多noise干扰了想法和思绪，而较长的时间间隔能够过滤掉一些无关重要信息；这里不得不提以下当前软件流行的信息流模式，很容易让人建立多巴胺回路，让人一刷接着一刷欲罢不能，说到底，还是要保护好我们自己的注意力</p><ul><li><strong>认知自大</strong></li></ul><p>我们在自以为拥有的知识方面非常自大，我们有一种内在的倾向，以为我们比实际上知道得多一些，这一点常常招致严重的麻烦。认知自大有双重影响：我们<strong>高估我们的知识，低估不确定性，也就是低估未知事物的范围</strong></p><p>“<ahref="https://www.zhihu.com/question/49805566">淹死的都是水性好的</a>”，说得也是这个道理，过度的自信容易让我们忽略未知的风险，从而做出错误的判断和预测</p><h2 id="如果黑天鹅无法避免">如果黑天鹅无法避免</h2><p>《随机漫步的傻瓜》告诉了我们生活中存在着种种随机性，需要清楚地意识到成功或失败中的运气成分，《黑天鹅》则是告诉了我们那些概率极低但破坏极大的事情的诱因，那回到最终要的方法论上，也就是面对这些随机性，我们能做些什么？</p><p>黑天鹅的序里写了这段话：如果把塔勒布和巴菲特的共同经验总结，可以得到应对黑天鹅事件的5个基本原则：<strong>1.不要预测；2.谨慎预防；3.危中取机；4.最重要的一点，保持充足冗余；5.不要负债</strong></p><p>下面针对这 5 点进行一些拓展和讨论</p><h3 id="不预测只应对">不预测，只应对</h3><p>黑天鹅事件往往无法预测、无法解释，很多事后的归因往往也是无效的；所以才有了我们前面提到的2 条原则：不要预测和谨慎预防</p><p>这里的小标题套用了孟岩的文章《<ahref="https://zhuanlan.zhihu.com/p/143362092">不预测，只应对</a>》</p><p>我们往往面临的三个主要问题：<strong>（1）总结出来的规律并不靠谱（2）用于预测的信息也不客观（3）未来充满不可预期的「随机事件」</strong></p><p>（1）总结出来的规律并不靠谱；指的是我们总结出来的规律往往是从过去发生的事件中归纳出来的,而已发生的事情，往往是<strong>因果规律和随机性共同作用的结果</strong>，但我们的大脑回路天生并不习惯于捕捉「随机事件」，往往都希望根据因果规律解释已发生的事情，而随机性可能会导致相同的事情总结出不同的规律（想象有一个平行世界发生了相同的事情，但是结果不同，那么总结出来的规律也会不一样），这也是《黑天鹅》中提到的“叙述谬误”的现象</p><p>（2）用于预测的信息也不客观；作出预测需要信息，信息本身是客观的，但是每个人接收信息的方式并不客观，亦即“一千个人眼里就有一千个哈姆雷特”；我们听到的信息都是经过我们大脑加工的，往往会带上我们的个人偏好和特性</p><p>（3）未来充满不可预期的随机事件；这个比较好理解，不确定性四部曲以及整篇文章就是在阐述这种现象</p><p>针对上面的三个问题，文章也分别给了一些方法</p><p>（1）总结出来的规律并不靠谱-&gt;<strong>运用尽量少的规律，并且这些规律最好是普世的、第一性的、经过长时间考验的；</strong>（2）用于预测的信息也不客观-&gt;去除Ego，尽可能客观地去收集和看待信息，排除人为干扰；这个跟纳瓦尔宝典里提到的“<strong>Shed your Identity to see reality</strong>”说的是同一件事（3）未来充满不可预期的随机事件-&gt;有足够的容错性，对各种随机事件的发生做好准备</p><p>这里着重讲一下第 1 点，也是笔者认为比较重要的一样，这里提到的方法跟<a href="https://en.wikipedia.org/wiki/First_principle">Firstprinciple</a>很相似，其思想都是从事情的本质上去思考，仅从一些最简单的规律(“cannot bededuced from any other proposition or assumption”)去推导，这里有一个关于Frist Principle 的例子，<ahref="https://zhuanlan.zhihu.com/p/80699627">首要原则（First PrinciplesThinkings）：埃隆·马斯克谈为自己思考的力量</a></p><p>而回到投资里的不确定性，文章给出的方法论跟上面提到的基本原理是一样的&gt;从最基本的一些普世规律和常识出发，打造一套自己的「投资系统」，并且对未来各种「随机事件」做好充分的准备，不会死。用系统去根据市场的信息做出「应对」，不断迭代升级,循环往复</p><h3 id="祸福相依">祸福相依</h3><p>祸兮福之所倚，福兮祸之所伏；很多事情都是祸福相依的；往往黑天鹅事件是以危机形式展现，但危中有机，危后出机，最大的危机会出现最大的暴跌，也就会形成最好的投资良机，黑天鹅的序中提到了：<strong>正确的策略应该是尽可能多地尝试和尽可能多地把握黑天鹅机会</strong></p><p>当然，这个事情说起来是这么个道理，但实践起来会很难，就拿投资来说，你永远无法预估到绝对的底在哪里，且往往这种黑天鹅事件出现时，意味着我们相信的很多法则都会消失，这个时候根据历史经验做判断可能是行不通的；更重要的是，在黑天鹅事件发生后，人和市场都是很容易出现恐慌的，这种情况下无法预估到底加上恐慌，很容易让我们成为割肉逃跑而不是逢低加仓的人</p><p>比如说 08年的次贷危机，虽然惨烈，但的确有人从中获利了，这也正是电影《大空头》讲到的故事；但需要意识到，《大空头》中也存在着幸存者偏差，我们看到的是成功做空获利的几个例子，但其中做了同样的事情却最终失败了的，不会有人感兴趣，因为我们都喜欢听成功的故事，都崇拜以一己之力获胜的英雄主义；关于这部分可参考：<ahref="https://www.zhihu.com/question/39528631/answer/95594954">如何评价电影《大空头》（TheBig Short）？</a></p><p>除了在黑天鹅中看到机会，日常还可以尽量做一些<strong>高杠杆</strong>的事情，即一些成本很低，但是成功了能够给你带来较大回报的事情；比如说<ahref="https://www.zhihu.com/topic/20014871/hot">无风险套利</a>，当然这种事情都是可遇不可求的</p><p>往往风险和收益是正相关的，为什么能捕获风险低但收益高的事情？《<ahref="https://zhuanlan.zhihu.com/p/148518267">在黑天鹅频发的年代，重读塔勒布的四本书</a>》给了一个可供参考的解释，即也风险和收益的正相关只是在期望上成立，<strong>现实世界中每次事件的风险和收益都是在期望上线波动，如果能够找到风险低于期望，但收益高于期望的事情</strong>；但这种事情往往发生的概率会很低</p><p>上面其实是一个期望与概率的例子，关于这点可以延伸说说，上面提到的观点是要<strong>捕获概率低但收益高的事情</strong>；而在后面的《反脆弱》的策略更多的提到了要关注期望而不是概率：<strong>买卖不应取决于股票上涨概率，而应取决于上涨期望</strong>。比如有90%的可能上涨1元，有10%的可能下跌100元，那么期望是下跌1元，应该卖空，而非买入。这里提到的<ahref="https://zhuanlan.zhihu.com/p/349095824">例子</a>跟反脆弱中的观点也是类似</p><blockquote><p>如果人生会重复一万次，牙医在每次“人生”中都很有可能过上富裕的生活，而靠中彩票大奖过上富裕生活的流浪汉，却很难再中一次大奖。因此，不能纯以是否富有的结果导向来对人进行评价。可以将人生的种种可能看作是一种分布，现在当下发生的只是这个分布的一个抽样。牙医人生的整体分布更优于流浪汉，即使流浪汉偶尔中了一次超级大奖，但对人生的整体分布影响不大</p></blockquote><p>两个观点看似矛盾，但实则不是，笔者认为其中<strong>差异在于这些事件发生的次数</strong>；期望是经过多次IID的试验得到的一个值，或者说买卖次数要足够多，这条定理才成立；而黑天鹅时间往往是稀有的，期望在其中也许并不成立，但交易是会发生多次的；所以结论也就很明显了，</p><h3 id="保持冗余">保持冗余</h3><p>这部分也很好理解，也是我们常说的鲁棒性或健壮性（robustness），比如说在工程上留出足够的buffer，预防低概率事件发生，以及永远不要 allin，无论是在投资还是生活，都要尽量给自己留一条后路</p><p>这部分涉及到反脆弱中的一些观点的，其中最令人深思的是：“<strong>系统的反脆弱性是通过牺牲个体为代价取得的</strong>”，这句话可以解释很多现象</p><p>回到与所有人都息息相关的日常工作中，这篇文章提出了一些比较有趣的观点，<ahref="https://zhuanlan.zhihu.com/p/79042586">反脆弱：为什么稳定的工作，只是一种人生的幻觉</a></p><blockquote><p>一个国家是如何渡过经济衰退期的呢？是靠死掉一大批没有竞争力的企业，让坚持下来的公司减少竞争对手“人力资源市场”的“反脆弱性”也是如此：经济衰退期，淘汰一批没有竞争力的人，让留下来的人更容易找到工作；经济过热期，淘汰掉一批给不起高薪的企业，让给得起高薪的企业更容易找人。<strong>“反脆弱性”会牺牲一部分最脆弱的人的利益，来提高整个系统的生存资源的利用效率，而这正是“35岁现象”的本质，因为某些凭借年龄获得优势的行业与职业，一过35岁，脆弱性会大大增加</strong></p></blockquote><p>那大公司的稳定性从何而来？</p><p>系统的反脆弱性是通过牺牲个体为代价取得的，大公司之所以稳定，是因为“体系至上、公司文化至上、业务至上”，任何一个员工的利益都无足轻重，随时可以被牺牲掉，在巨大的危机面前，就算是CEO也可以牺牲</p><p>对个人来说，致命的是“大公司稳定幻觉”，让你陷入舒适，从而忽视了为自己建立“反脆弱结构”；这种工作造成的稳定性的幻觉，就像火鸡，它们活的时间越长，就越“确信”农场主的仁慈，直到感恩节来临的那一天</p><p>保持冗余，本质也是反脆弱，不要 all in一件事情，多为自己留一些后路，至于具体的方法和途径真的是因人而异了，毕竟这些也都是比较耗心力的事情，但本质还是要productize yourself</p><h3 id="不要负债">不要负债</h3><p>套用塔勒布的原话是这么说的，“有一条是对于个人和机构非常重要的戒律：我们可以降低经济生活中90%的黑天鹅风险……我们所做的只是取消投机性的债务。”</p><p>这里的<strong>投机性的债务</strong>没有一个明确的定义，笔者猜测这里指的是类似08 年次贷危机的那种炒房式的负债</p><p>房子在各个国家好像都会被当做金融工具，也的确其中有人会赚得盆满钵满，但需要清楚，你进去的时候是否会是最终的接盘侠</p><h2 id="小结">小结</h2><p>说实话，看完这两本总感觉比较反人性，因为人性就是希望事情都是可总结可解释的，包括笔者在写这篇文章，做的事情就是总结塔勒布这几本书的内容，期待从中获取一些可指导生活的规律和原理</p><p>但无论是《随机漫步的傻瓜》还是《黑天鹅》，都在告诉我们很多事情都是无法预测的，我们从历史获取的是无关痛痒，甚至是危险的信号；我们看到的很多成功也都是幸存者偏差，是运气和因果性共同主导的结果，且往往运气占了大头</p><p>如同开头所说，仅仅看到未来无法预测这一面，有时候会让人更绝望，很容易陷入虚无主义中，因为没什么是确定的，或者说没什么是能够坚信的，因为随机性几乎主导了一切；而我们，就是在其中随机漫步的傻瓜</p><p>既然生活的随机性的影响可能要远远大于努力，为什么还要努力？</p><p>因为在努力还没达到一定程度前，我们连面对随机性的机会都没有，或者说幸存者偏差也是有门槛的，当你的能力不足时，进入决赛圈的资格都没有</p><p>而面对随机性，书里这 5条原则也许值得我们参考与实践：1.不要预测；2.谨慎预防；3.危中取机；4.保持充足冗余；5.不要负债</p><p>写到这里，好像隐约读懂了罗曼罗兰的那句“世上只有一种真正英雄主义，那就是在认清生活的真相后仍然热爱它”；虽然“生活的真相”有很多种，生活充满了随机性或许也是其中一种，在了解这个真相后仍然能够“尽人事，听天命”，认认真真把手上的每件事情做好，也许就是一个清醒的傻瓜</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;随机性，如同带刺的玫瑰，危险而又迷人；随机性可能会给你带来生活中的惊喜，但也有可能会降临足以毁灭生活的灾难&lt;/p&gt;
&lt;p&gt;在去年的&lt;a
href=&quot;https://wulc.me/2023/01/01/2022%20%E5%B0%8F%E7%BB%93/&quot;&gt;年度小结&lt;/a&gt;提到，22
年最大的感悟，是生活存在非常多的随机性，正是这些随机性导致了无法预测和无人知晓的未来；1
月份在查资料过程中看到了塔勒布的&lt;a
href=&quot;https://book.douban.com/series/45353&quot;&gt;“不确定性”四部曲&lt;/a&gt;：《随机漫步的傻瓜》、《黑天鹅》、《反脆弱》和《非对称风险》，相比于笔者简单的感悟，这几本书花了很大功夫来描述随机性这件事情&lt;/p&gt;
&lt;p&gt;如果单纯看随机性，很容易让我们陷入虚无主义中，因为没什么是确定的，或者说没什么是能够坚信的，因为随机性几乎主导了一切。幸运的是，书里给出了还给出了一些也许可供参考的方法论，虽然作者行文有时候较为晦涩，但总体还是值得一读的。本文主要是
《随机漫步的傻瓜》和《黑天鹅》两本书的一些笔记以及拓展，祝开卷有益。&lt;/p&gt;</summary>
    
    
    
    <category term="读书" scheme="https://wulc.me/categories/%E8%AF%BB%E4%B9%A6/"/>
    
    
    <category term="读书" scheme="https://wulc.me/tags/%E8%AF%BB%E4%B9%A6/"/>
    
    <category term="塔勒布" scheme="https://wulc.me/tags/%E5%A1%94%E5%8B%92%E5%B8%83/"/>
    
  </entry>
  
  <entry>
    <title>2022 小结</title>
    <link href="https://wulc.me/2023/01/01/2022%20%E5%B0%8F%E7%BB%93/"/>
    <id>https://wulc.me/2023/01/01/2022%20%E5%B0%8F%E7%BB%93/</id>
    <published>2023-01-01T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.165Z</updated>
    
    <content type="html"><![CDATA[<p>2022的最后一个月，在全国“喜阳阳”的氛围中度过了，写这篇文章时，恢复了差不多一周多，基本也没什么症状了。但回想下今年发生的各种事情，真的是可以用魔幻来形容，这个魔幻不仅仅指防疫政策的180度大转弯，更是发生在身上的各种事情，这些事情基本都可以总计为计划赶不上变化，或者说未来无人知晓</p><p>一直都有写年度总结的习惯，而这么魔幻的一年，更值得写篇文章纪念下，正好也是元旦放假，趁着这几天把过去一年发生的事情梳理了一下~</p><span id="more"></span><h2 id="关于工作">关于工作</h2><p>现在回头看 2021时的总结，发现当时写下的未来工作规划，跟后来实际的工作差异非常大；究其原因，还是总体业务和组织变化过于频繁</p><p>上半年主要在做一些广告创意上的工作，从平台和技术视角来看，笔者将这个方向主要分为如下三个子方向：生成、优选和投放；其中生成是指利用素材(标题、图片、视频、落地页等)生成候选创意(用户看到的广告)，优选是从计划的候选创意(一个计划下的候选往往有多个)中选择topk 个用于投放，投放则是将优选出来的创意投放至线上</p><p>学界研究得比较多的往往是优选和投放，优选是个很典型的E&amp;E(Exploration &amp; Exploitation) 问题,研究的方法也很多，当时看到一篇比较有参考价值的是淘宝的一篇paper，也针对这篇 paper 做了一些记录《<ahref="https://wulc.me/2022/03/05/A%20Hybrid%20Bandit%20Model%20with%20Visual%20Priors%20for%20Creative%20Ranking%20in%20Display%20Advertising/">AHybrid Bandit Model with Visual Priors for Creative Ranking in DisplayAdvertising</a>》,paper 里提出的方法主要由两大模块组成：VAM 和 HBM, VAM是基于 list-wise 优选做 exploitation 模块，HBM 则是基于 badnit model 做exploration 模块</p><p>投放则是一个更大的话题，往往涉及到成本、跑量、生态的问题，当时主要是针对生态问题做了一些研究和实践；这里的生态问题，往往是指复制问题和长尾问题，复制问题指的是投手利用系统的variance复制很多相同的创意，以达到跑量的目的，长尾问题指的是很多创意压根投不出去，或者投出去的量非常少</p><p>而从广告主的视角来看，素材制作是有成本的（如拍视频、修图等），且这个成本是在投放前就要花出去的，如果基于这些素材投放不起量，那这些成本就相当于打水漂了；而长尾也是导致复制问题的原因之一，毕竟就是投不出去，广告主才会去不断复制素材以达到跑量的目标；因此，通过技术手段缓解素材的长尾问题，对于整个系统的长期生态是有必要的</p><p>回到长尾问题，也是推荐/广告中很常见的一个问题，一般从策略或模型角度都有一些解决思路</p><ul><li>策略层面，根据系统和业务特性设计规则，比如说对长尾的 item有特定的扶持，强行让这些 item 能触达到更多的用户</li><li>模型层面，核心思想就是让模型能更好地学习到 long tail item 的representation，因为这个问题的根本原因就是 long tail item的样本过少，进而导致模型学习的不好</li></ul><p>策略层面除了上面提到的一些强依赖业务的规则设计，也有一些通用的思路，比如说建模二部图，强行让创意的曝光量有lowerbound 的保证，这其实也是冷启动比较常用的一个套路，这部分可参考这篇paper 里提到的思路 《<ahref="https://wulc.me/2022/02/01/Dynamic%20Creative%20Optimization%20in%20Online%20Display%20Advertising/">DynamicCreative Optimization in Online Display Advertising</a>》</p><p>模型层面，当时研究下来，感觉比较靠谱的是 transfer learning 和self-supervised learning 两个思路，当时也写了这部分的一个总结 《<ahref="https://wulc.me/2022/04/04/Long%20Tail%20Problem%20In%20Item%20Recommendation/">LongTail Problem In Item Recommendation</a>》</p><p>在广告系统中，优选和投放还算是比较常规的部分；素材生成则是近年业界在研究的一个方向，比如说巨量千川推出的产品：<ahref="https://mp.weixin.qq.com/s/fojF0LZKQcPVNKuEiGfrtg">高光快投</a>，也是笔者深度参的一个项目，这个产品的目标就是为直播广告主截取直播间的高光片段，然后加工成素材投放，节省广告主的素材制作成本（尤其是素材制作能力弱的中小商家）</p><p>从技术层面来说，这个难点在于“高光”在这里没有一个绝对的 groundtruth，而没有 ground truth 或者说 label是无法通过模型进行截取，而基于人工打标的方式势必是不可长期持续的；当时针对这部分也做了一些调研，绝大部分的paper 也都是基于人工打标的数据进行训练的，最后是 2019 年一篇 CVPR 的paper 给了笔者不少启示，即实际业务中有很多投后的指标数据（ctr、cvr、roi等），可以基于这些投后的数据来构建训练样本，即基于实际投放而不是人为的主观判断来决定一个视频是否属于高光，而在实际业务中，这也被证明是比较有效的；这部分的一些探索可参考《<ahref="https://wulc.me/2022/08/27/Highlight%20Detection%20In%20Video/">HighlightDetection In Video</a>》</p><p>在高光快投这个项目中，基本上把创意的生成、优选和投放环节都涉猎了一遍，整个产品的消耗也在接手后涨了差不多2 倍，但 7、8月左右，因为整体组织架构有调整等原因，这个方向的优先级总体有变化；虽然上半年在做创意时已经有一些调整，但都不如这次的大，笔者总体还是能理解这些调整的，毕竟不同的老大判断的项目的优先级不同，而新老大一般上来都要重新review 当前的项目，停一些认为不合理的项目，立一些新的项目</p><p>所以后面也去做了算力的相关工作，这部分工作挺有意思的，简单来说就是在机器资源有限的情况下，怎么提高机器的变现效率，从“算力= 请求量 × 平均请求消耗资源”，可以从 2方面进行优化，这部分业界也已经有一些尝试了，针对这部分也写了一些粗浅的理解《<ahref="https://wulc.me/2022/10/30/%E6%B5%85%E8%B0%88%E7%AE%97%E5%8A%9B%E4%BC%98%E5%8C%96/">浅谈算力优化</a>》</p><p>上面提到的基本都是技术方面的工作，而在今年还有一些谈不上正式的管理经历，自己也在这个问题上做了一些调研，于是便对这部分做个总结《<ahref="https://wulc.me/2022/09/25/%E8%81%8A%E8%81%8A%E7%AE%A1%E7%90%86/">聊聊管理</a>》。在这个过程中，也发现了身边那些优秀的管理者，使用管理的手段是多种多样的，共性更多是在人上，比如说他们的能力是出众的，态度是谦和的；围绕着事而不是人开展业务等。同时也意识到当上了管理者就能一劳永逸是个妄念；而随着业务的发展不断调整、进化自己，以更年轻和开放的心态去迎接当前的挑战，有管理工作委任时能够扛得起，没有也能做个能打的IC，可能才是“一劳永逸”的答案；毕竟真正当上管理者的人是少的，而当上管理者可能也需要在合适的时机踩中合适的机会，有运气与努力成分；好好生活，快乐工作，才是每个普通人应该去努力追求的</p><h2 id="关于投资">关于投资</h2><p>今年上半年算是断断续续地学些了有知有行上的相关内容，并且按照笔者的理解划分为：认知与心态、概念与常识、买与卖三大模块。认知与形态主要是投资前的心理建设部分，概念与常识主要是介绍一些基本概念（如周期、投资标的、宏观常识等），买与卖则是一个比较成体系的投资系统（涉及到资产、仓位配置等）</p><ul><li><ahref="https://wulc.me/2022/05/04/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%281%29-%E8%AE%A4%E7%9F%A5%E4%B8%8E%E5%BF%83%E6%80%81/">投资这件事(1)-认知与心态</a></li><li><ahref="https://wulc.me/2022/06/18/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%282%29-%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%B8%B8%E8%AF%86/">投资这件事(2)-概念与常识</a></li><li><ahref="https://wulc.me/2022/07/02/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%283%29-%E4%B9%B0%E4%B8%8E%E5%8D%96/">投资这件事(3)-买与卖</a></li></ul><p>写完上面的文章后，给笔者留下最深刻印象的是“<strong>盈亏同源</strong>”这个概念，顾名思义，就是盈利与亏损都是出自同一个源头，或者说都是同一个原因造成的；比如说，导致当下亏损的操作，如果换了一个平行时空，可能就是盈利的了。因为市场是不确定的，无法预测的，要放弃对所谓确定性的追求，同时摸索出适合自己的选择判断体系，基于当下的信息作出最好的判断，不要一直对过去的操作后悔或悔恨。仔细想想，生活不也是这样么？</p><p>而今年的整个投资市场非常魔幻，也是给笔者上了很好的一课，尤其是回想起比较疯狂的2021年初，大家疯狂买基金，连我妈啥都不懂都糊里糊涂地投了点钱进去，再看看今年惨淡，才更深刻地体会到教科书说的“闲钱投资、不加杠杆、不接飞刀、仓位配置”等是朴素却又正确的道理；也在各种媒体博眼球的报道中，体会到了“三根大阳线改变信仰”是怎么一回事</p><p>今年整个市场的回顾可以参考知行小酒馆的播客《<ahref="https://youzhiyouxing.cn/materials/1384">魔幻的 2022年过去了，2023 年的市场会好吗？</a>》，给笔者印象最深刻的是 4月份那次大下跌，上海封城，当时整个市场可以说是一遍哀嚎，有知有行的温度计也到了0度，现在回头看是个买入的好时机，但也只局限于现在回头看，因为在当时，大家剩下的都只有“<ahref="https://youzhiyouxing.cn/materials/1198">恐惧</a>”了</p><p>刚看了下账户，所有权益类资产今年总体回撤大概 5%左右，而且是在边跌边买的，如果一开始就重仓，回撤会更大；主要是亏在了<strong>主动型基金和中概</strong>上，主动型基金是源于对基金经理过往历史业绩的信任，所以总体仓位不低，这里并不是说主动基金不好，而是要知道在主动基金获利，业绩较好时，需要清楚这个是alpha 收益还是 beta收益，是周期带来的收益还是基金经理择股带来的收益，同时主动型基金的仓位配比信息是有延迟的，你不清楚自己在各行业的配置如何，所以笔者也在逐渐减少主动型基金的配比，更多放到了宽基指数和行业指数上</p><p>中概则是过快地接了飞刀，在刚下跌的时候就开始加仓，导致后续越加仓越跌，当然，这里的“过快”其实也是站在当下来看而得到的结论，当时谁也不会觉得会跌到现在这样，是无法预测的；但交了中概这个学费后，笔者对安全边际的要求会更加严格，也更加敏感了。现在分析，当时这么快接飞刀，一是来源于不太懂，二是当时总体仓位还很轻，着急加仓</p><p>今年盈利的都是大 A 以外的指数, 主要是恒生和德国 DAX指数，两者都是在比较低点时候进场的，其实也进一步验证了有知有行常说的“好资产+好价格”的理念，同时也说明了分散投资以及海外投资的必要性</p><p>另外，在今年做的比较多的一件事情，是经常看账户，看当前的盈亏；这听起来就是一个反面教材，因为根据一些研究，看账户越频繁，往往回撤会越大，因为恐惧割肉会比较多。但笔者在看账户的时候，更多在做的是<strong>观察自己面对上涨或下跌的情绪变化</strong>，算是自我情绪觉察的一个练习，然后根据当前情绪再来调整仓位。目标做到“涨跌都舒服”，因为这样才能拿得住</p><h2 id="关于生活">关于生活</h2><p>今年的生活也基本是两点一线，日常的状态也跟去年的差不多</p><blockquote><p>撸铁跑步带给我的满足感，并不亚于去探店吃到了心仪已久的美食；写完一篇文章、看到博客又记录了自己的变化所带来的的成就感，并不亚于去攀登了一座险峻的高峰；了解到一些表面现象背后的本质原因所带来的震撼，并不亚于看到了光怪陆离的自然风光；AC一道题目所带来的快感，也不亚于通关一款制作精良的游戏。</p></blockquote><p>这种状态一直持续到 6~7月，那会各大互联网公司在进行或开启裁员潮，内部业务在进行大调整，可以说是“内忧外患”，于是开始认真审视当前的这种生活的可持续性，同时心中也萦绕这很多没有答案的问题，那段时间可以用2 个字来形容：焦虑</p><p>于是笔者开始去调研，尝试回答那些没有答案的问题，也是在那个时间段，将所有调研到的内容作了梳理，写成了这篇文章《<ahref="https://wulc.me/2022/07/31/%E4%BB%8E%E7%84%A6%E8%99%91%E8%B0%88%E8%B5%B7%EF%BC%8C%E8%81%8A%E8%81%8A%E7%94%9F%E6%B4%BB%E7%9A%84%E5%8F%AF%E8%83%BD%E6%80%A7%E4%B8%8E%E9%9A%8F%E6%9C%BA%E6%80%A7/">从焦虑谈起，聊聊生活的可能性与随机性</a>》，也算是给自己做的心理按摩。简单来说，就是生活和工作是存在很多可能性的，不止大厂这一种叙事方式，只要能对外提供社会需要的服务或者说<a href="https://nav.al/productize-yourself">ProductizeYourself</a>，也是一种安身立命的途径，也是一种可能的生活方式</p><p>另外，焦虑在人生的每个阶段都是必然存在的，接受焦虑、接受生活的随机性，比起去对抗焦虑、精细规划未来、小心翼翼地迈出每一步，可能是一种更好的方式；毕竟随机性不可避免，而过分追求确定性可能会让我们瞻前顾后、步步惊心，还不如学着接受并享受生活的随机性；既然预定要飞向意大利的航班，最终有可能让你降落在荷兰，还不如好好享受荷兰的风光，对自己说一句：<ahref="https://zhuanlan.zhihu.com/p/435160088">欢迎来到荷兰</a></p><p>给自己做完了这个心理按摩后，心里的焦虑的确少了很多，或者说虽然日常也会焦虑，但是不再是之前的无头苍蝇的那种恐惧，更多的是对任务没有及时完成的那种着急，而不是无端生出的惶恐；因为认识到且认可了生活不止当前这一种叙事的方式，只要心态能够打开、积极拥抱变化，就不用过于恐惧所谓的35岁危机，毕竟未来的事情都是无人知晓的，而生活本身也是小马过河，其他人总结出来的经验未必适用你</p><p>另一个比较有意思的事情，是认识了 P；跟 P 认识的过程也很有趣， 我跟 P不是一个序列的，但是都参与同一个业务，日常工作会有一些合作；最开始以为 P是被我纯正的“广普”吸引的（毕竟多次调侃我的普通话），后来跟她聊天才发现，原来她在为她的闺蜜找对象，而我成了她“盲狙”的目标之一</p><p>对象当然没有谈成，因为还是比较享受一个人的状态~总体感觉就还是处于《<ahref="https://www.xiaoyuzhoufm.com/episode/5e74543a418a84a046c4e578">我（们）的孤老生活</a>》中的孤老第一阶段，至于是否会迈入第二阶段或者何时迈入，跟前面说的很多事情一样，无人知晓也无法预测</p><blockquote><p>孤老的两个阶段：（1）一个人的阶段，对个人成长非常重要（2）结束一个人的阶段，渴望有家庭甚至有陪伴</p><p>当你去探索生命的本源问题的时候，你会感到一种很极致的孤独。你会觉得人是没有办法被理解的。但这我觉得这是一个人心灵成熟的一个必要条件</p><p>而当孤独走到极致，或者说自立走到极致，会发现别人给不了我什么，或者不需要其他人给我什么，才真正明白了怎么去爱别人（付出的爱是<strong>溢出</strong>的，是允许）</p></blockquote><p>倒是在跟 P 的几次沟通下来，慢慢成为了兄弟（她是大哥 hhh）；P是那种很早就知道自己想要什么的人，也一直有规划怎么去达成这些目标，跟她一块聊工作、聊生活、聊规划，探讨了很多困惑笔者比较久的问题，P也给了我不少受用建议，同时也了解到了 P比较神奇的经历，包括但不限于平静却又凡尔赛地更跟我说如何考上清华、工作不爽然后出国读了个书、面对外人看来的不幸经历却付之一笑...</p><p>后来在某天晚上心血来潮跟 P去夜游了亮马河，算是我在北京为数不多出去看风景的经历；然后去吃火锅，压马路到凌晨2点，也算是一段难忘的经历了~（船在动+手机渣像素导致了这种图片，绝对不是个人没怎么拍过照、摄影技术差[狗头]）</p><p><img data-src="https://wulc.me/imgs/2022_liangmahe.jpeg" height="20%" width="20%"></p><p>可惜的是 P 马上就要到南方城市了，原本约定好的潮牛火锅，也在最后11、12月的居家中落空了；有人说职场中，我们在都在坐一趟时光的公交车，有些人中途上车了，和我们成了朋友，但也有些人下车后转到另一辆车了，希望跟P 能在以后的公交中有再次重逢的机会吧~</p><h2 id="关于健康">关于健康</h2><p>记得去年测体脂的时候立了个 flag：希望今年体脂能降得更低，能放上 8块腹肌的照片；可是这个计划随着 11、12 月的居家去不了健身房 +居家时管不住嘴 +康复后不敢做剧烈运动等等(为自己找的借口)，最终未能实现；现在的体脂得有16% 了吧</p><p>今年 10月的体检，总体无太大问题，但一些小毛病还是少不了，毕竟机器越用越坏；也买了一些保险，也当做是为未知的风险做一些对冲准备~</p><p>整年的运动基本都用运动手表记录下来了，回顾才发现居然耗时最长的是每天上下班的骑车部分，其次才是为了减脂做的力量训练，11、12月基本是躺平状态了，因为都是居家办公+康复的状态</p><p><img data-src="https://wulc.me/imgs/2022_exercise.jpeg" height="20%" width="20%"></p><p>然后看了下几年去健身房的次数，最近一次就停留在 11月初居家前，跟去年的数对比了下，大概今年去了 70 次左右，</p><p><img data-src="https://wulc.me/imgs/2022_gym.jpeg" height="20%" width="20%"></p><p>而去年提到的情绪性进食和报复性熬夜两个问题，今年也都有一些缓解，因为慢慢意识到，这两个行为本质上都是一样的，就是“<strong>把自己当做自己的泄欲工具</strong>”，而不在这么做的前提是“<strong>把自己当做一个真正的人</strong>”，这部分可以去听一下上面提到的播客《我（们）的孤老生活》。我们除了把自己当做自己的泄欲工具，也常常会把他人当做自己的泄欲工具，套用播客里的话是这么说的</p><blockquote><p>在一段关系里边，不管就是情侣关系，还是朋友之间的关系，还是家人等等。就是有的时候我们会简化对方或者理想化对方或者对扭曲化对方，都是因为对方我们<strong>没有把对方当成一个完整的人，是我们的欲望的投射</strong>，永远在衡量你有没有给到我我要那个东西，不允许对方成为他们的样子；但这里还有个前提：能允许别人是别人，首先要允许他自己是一个人，真正他把自己当成一个完整的人；只有先把自己当做一个人，才能把其他人当做一个人，才能不把自己当做一个泄欲的工具</p><p>允许自己是一个人：不再去做自我评判，接纳自己就是这样一个人（尽人事，听天命）</p></blockquote><h2 id="小结">小结</h2><p>去年真的是魔幻的一年，大到防疫政策的 180度大转变、二级市场的此起彼伏、席卷而来的海内外裁员潮，小到个人工作的频繁变动；而这些事都在说明同一个事实：市场是无法预测的，未来是无人知晓的</p><p>去年虽然曲折，但家人与自己身体仍然健康，工作也还算顺利，也开始思考了生活更多的可能性；去年提到要培养的技术/沟通/管理/投资等各种能力，今年也都进行相应的学习和总结，也算是有所得</p><p>而今年最大的体会，就是生活存在非常多的随机性，正是这些随机性导致了前面提到的无法预测和无人知晓的未来，相比于面对随机性焦虑不安，小心翼翼走好每一步，更好的选择是享受这些随机性，基于当下境遇作出当下最好的选择，无须后悔或懊恼，毕竟“盈亏同源”，与君共勉</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;2022
的最后一个月，在全国“喜阳阳”的氛围中度过了，写这篇文章时，恢复了差不多一周多，基本也没什么症状了。但回想下今年发生的各种事情，真的是可以用魔幻来形容，这个魔幻不仅仅指防疫政策的
180
度大转弯，更是发生在身上的各种事情，这些事情基本都可以总计为计划赶不上变化，或者说未来无人知晓&lt;/p&gt;
&lt;p&gt;一直都有写年度总结的习惯，而这么魔幻的一年，更值得写篇文章纪念下，正好也是元旦放假，趁着这几天把过去一年发生的事情梳理了一下~&lt;/p&gt;</summary>
    
    
    
    <category term="闲话几句" scheme="https://wulc.me/categories/%E9%97%B2%E8%AF%9D%E5%87%A0%E5%8F%A5/"/>
    
    
    <category term="闲话几句" scheme="https://wulc.me/tags/%E9%97%B2%E8%AF%9D%E5%87%A0%E5%8F%A5/"/>
    
  </entry>
  
  <entry>
    <title>浅谈算力优化</title>
    <link href="https://wulc.me/2022/10/30/%E6%B5%85%E8%B0%88%E7%AE%97%E5%8A%9B%E4%BC%98%E5%8C%96/"/>
    <id>https://wulc.me/2022/10/30/%E6%B5%85%E8%B0%88%E7%AE%97%E5%8A%9B%E4%BC%98%E5%8C%96/</id>
    <published>2022-10-30T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.108Z</updated>
    
    <content type="html"><![CDATA[<p>当前的推荐或广告系统基本都是做到请求级别的预估和优化，在效果最大化的同时带来的问题是机器成本的上升；而流量分布的不均匀使得这个问题更为严峻，比如说对于抖音或美团，一天内流量往往有两个峰：午高峰和晚高峰，因为这两个时间点餐、刷手机的人数会陡增，而其他时间段流量会下降比较多，如下图所示</p><p><img data-src="https://wulc.me/imgs/unbalanced_traffic.jpg" height="30%" width="30%"></p><p>这意味着如果准备足以抗住高峰的机器，那在其他时间段大部分机器是空转的，或者说roi很低，因此往往在高峰的时候都需要扩容或降级。降级一般是指指降低请求数，按比例drop 流量，但是 drop流量对总体效果肯定是有损的，因此也衍生出了算力优化这个研究方向，算力优化本质上就是做效果和机器成本的trade-off, 或者说如何尽可能无损地降本</p><p>本文主要介绍一些算力优化的常见手段，笔者将其总结为<strong>drop、cache 和 dynamic</strong>三类方法；而如果把消耗的算力拆解，可以直观拆成 2 部分：<strong>请求量 ×请求消耗的算力</strong>，因此可以从这两部分出发去优化算力</p><ul><li>drop：直接把流量 drop 掉，即直接减少“请求量”</li><li>cache：将之前的预估结果存到缓存中，每次预估不用经过实际机器的inference，即减少了“请求消耗的算力”</li><li>dynamic则是根据请求的价值，动态控制每条请求消耗的算力，这个方法也是减少了“请求消耗的算力”，<ahref="https://arxiv.org/pdf/2006.09684.pdf">DCAF</a>是这类方法的代表</li></ul><p>上面的几个方法都是偏流量维度的优化，还有一些方法是对模型 inference 的耗时进行优化的，主要方向是计算并行（硬件升级）、模型压缩（量化、蒸馏、结构调整等），本文就不详细展开了</p><span id="more"></span><h2 id="drop">drop</h2><p>drop流量可以说是最原始和粗暴的降级手段，但是在流量突增等场景还是比较有效和立竿见影的手段，除了无差别地drop 流量的粗暴方式，还可以进一步做得更精细：通过 rule-based 或model-based 手段来判断一条流量是否要 drop</p><p>rule-based的方法往往需要定义具体业务中的无效请求，比如说这里的“无效”在推荐可能是一些用户无点击且停留时长短的请求，在广告可能是由于没有曝光导致的无扣费等。这样的话就可以梳理出一些基本的规则，比如说针对连续n 次出无效请求的用户，在下一次的请求可以直接 drop 掉</p><p>model-based 的方法跟 ruled-based方法差不多，一般可建模成一个分类或回归的问题；如果是分类问题，需要明确定义二分类中的正例和负例(即无效请求)；如果是回归问题，需要定义每条流量的价值（如推荐或广告最终排序时使用的预估分）</p><p>这里值得注意的点是<strong>为了数据集无偏或者说避免 feedback loop,需要从不生效 drop 策略的流量中随机划一部分来生成训练集（holdout数据集）</strong></p><h2 id="cache">cache</h2><p>cache也是常用的一种节省算力的手段，即把之前请求的预估结果缓存下来，然后相似请求过来后，把缓存的预估结果直接返回；这里有2 个关键问题</p><p><strong>(1)缓存的粒度</strong>，一般粒度越细，预估结果越准确，但同时消耗的kv存储会越大；常见的可以考虑的维度包括用户、设备、媒体位置、访问时段等，具体缓存的粒度可以从中选出若干个维度叉乘出来</p><p><strong>(2)缓存的预估偏差</strong>，由于不是实时预估的，所以预估偏差往往会比实时预估的要高很多，最直观的解决思路就是在cache 结果直接再套一个 calibration module（如 <ahref="https://en.wikipedia.org/wiki/Platt_scaling">Plattscaling</a>）；这个问题其实也跟缓存的 TTL 比较相关，一般 TTL越大，预估偏差会越大，同时消耗资源会越少，所以保证缓存的预估偏差小对节省资源也是有较大意义的，因为这个时候的TTL 可以设得更长</p><p>这里的预估偏差反映在后验上一般是高估，其实是因为<strong>被低估了的流量竞价会失败而没法曝光</strong>。这个现象跟很多ab实验的“<strong>小流量高估问题</strong>”的原因是一样的，实际上并不只是高估，而是预估不准，只是看到的投后数据都是高估投出来的</p><p>但这里两者预估不准的原因并不完全一致，前者更多是因为不实时带来的，后者（即小流量高估）本质上则是因为有2 个模型同时产生训练数据集，两个数据集的分布不太一致（feedbackloop），可理解为有 2 个 domain，然后处于小流量 domain 的模型使用了大流量domain的模型产生的数据集，总体<strong>被大流量的模型的数据主导看不到自身的高估</strong>（证据之一就是，如果把两个模型的数据严格隔离开，这个问题会大大缓解，但对大盘有损，因为小流量模型数据太少，这部分流量的变现效率就很低）；所以实际中往往会把一些能区分domain 的特征（如 modelname、rit等）加入到模型里，也能缓解所谓的小流量高估问题</p><h2 id="dynamic">dynamic</h2><p>dynamic可以说是研究得最多的方法，其思想也比较符合直觉：<strong>根据每条流量预估的价值，动态调整每条请求消耗的算力</strong>，如果价值越高，分配的算力越高，反之亦然</p><p>基于这个思路，很自然能想到有 3个需要解决的问题：<strong>（1）流量价值的预估（2）算力的预估（3）分配策略</strong></p><p>针对第（1）个问题，在搜广推的业务场景中，会涉及到排序的过程，因此可以把排序分数近似作为流量的价值；对于推荐，这个价值的物理含义可能不是那么强，但对于广告这类业务场景，基于ecpm 的排序就是意味着这条流量能给平台带来的实际收入</p><p>针对第（2）个问题，在召回、粗排、精排的经典三段漏斗中，可以把进入各个模块的候选数来衡量算力；值得注意的是：<strong>候选数和算力两者是正相关，但不是线性的</strong>，后面会详细展开这个问题</p><p>针对第（3）个问题，对流量价值和算力进行量化后，可以很自然地用最优化的思路建模这个分配问题，最常见的模式是在算力约束下，最大化流量价值，变量则是每条流量的候选数</p><p>分配策略的一个代表性工作是阿里在 2020 发表的 paper，<ahref="https://arxiv.org/pdf/2006.09684.pdf">DCAF: A Dynamic ComputationAllocation Framework for Online Serving System</a>，paper主要解决的是上面的第三个问题，下面会先讲 paper中的分配策略，然后再探讨下流量价值和算力建模的一些思路</p><h3 id="dcaf">DCAF</h3><h4 id="问题建模">问题建模</h4><p>paper 很自然把算力分配建模成如下的问题</p><p><img data-src="https://wulc.me/imgs/DCAF_formulation.jpg" height="50%" width="50%"></p><p>上面相关符号含义如下</p><ul><li><span class="math inline">\(i\)</span>: 请求的 index</li><li><span class="math inline">\(j\)</span>: action 的 index，这里的action 一般是指进入各个模块的候选数</li><li><span class="math inline">\(x_{ij}\)</span>: 是否采用第 i条请求中的第 j 个 action，取值为 0 或 1，每条请求只能采用一个action</li><li><span class="math inline">\(q_j\)</span>: 第 j 个 action消耗的算力资源，注意这里的<strong>假设是相同 action消耗的算力资源与请求无关</strong></li><li><span class="math inline">\(Q_{ij}\)</span>: 第 i 个请求中的第 j 个action 带来的价值</li><li><span class="math inline">\(C\)</span>: 总体的算力限制</li></ul><p>在建模完这个问题后，paper 提到了这种建模方式面临的 2个重要问题，其实也是这类最优化范式通常都有的问题</p><p>第一个是需要实时求解最优化问题，这个问题的原因在于我们通过这种方式建模时，默认是能拿到全部数据的，如果统计过去n 天的数据是可以做到的，但是在线上实时 serving 是无法做到这点的</p><p>这个问题其实跟 bidding 场景下的最优化建模的问题一致，<ahref="https://wulc.me/2020/07/19/%E3%80%8ABid%20Optimization%20by%20Multivariable%20Control%20in%20Display%20Advertising%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">《BidOptimization by Multivariable Control in DisplayAdvertising》阅读笔记</a> 是一个例子，而 bidding的一般套路是<strong>先通过求解最优化问题求解出最优的出价公式的形式，然后线上通过实时调控的来决定公式里的未知变量</strong>，后面我们讨论这个问题的求解时，会发现这篇paper 里的解决的思路有些不一样，需要直接求解最终的解</p><p>第二个是流量价值即 <span class="math inline">\(Q_{ij}\)</span>计算的问题，paper里给出的思路是通过模型预估，且提出了模型需要足够轻量级，因为流量维度的预估qps 会比较大</p><h4 id="问题求解">问题求解</h4><p>问题求解是通过拉格朗日对偶方法进行求解的，关于这个方法的原理可以参考这篇文章<ahref="https://wulc.me/2017/05/20/%E5%87%B8%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93/">凸优化总结</a>里面的拉格朗日对偶部分,根据理论可以写出上面的最优化问题的拉格朗日对偶问题如图下式子（3）所示</p><p><img data-src="https://wulc.me/imgs/lagrange_dual.jpg" height="50%" width="50%"></p><p>与 bidding 中的推导不同，<strong>在 bidding中只需要获取最优出价公式而不需要具体的解</strong>，因此可以最变量直接求导数为0 推导出最优出价的公式，这部分详细过程可以参考<ahref="https://wulc.me/2020/07/19/%E3%80%8ABid%20Optimization%20by%20Multivariable%20Control%20in%20Display%20Advertising%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">《BidOptimization by Multivariable Control in DisplayAdvertising》阅读笔记</a> 中的另一种推导方法</p><p>而在这里<strong>需要作出具体的决策或者说需要具体的解</strong>，即在请求<code>i</code> 中应该选择哪个 action，即需要让哪个 <spanclass="math inline">\(x_{ij}\)</span> 的值为1，所以需要求解这个问题，paper 的推导过程如下</p><p><img data-src="https://wulc.me/imgs/problem_derived.jpg" height="50%" width="50%"></p><p>下面是笔者对上面推导步骤的理解</p><p>1）只有当 <span class="math inline">\(-Q_{ij} + \lambda q_j + \mu_i\ge 0\)</span>时，公式（3）中的式子才有下界（笔者不太理解这一点，因为<strong>这里的<span class="math inline">\(x_{ij}\)</span> 取值是 0 或1，而不是任意整数，所以即使 <span class="math inline">\(-Q_{ij} +\lambda q_j + \mu_i \lt0\)</span>，也不会出现无下界(负无穷)的情况</strong>）</p><p>2）有了 <span class="math inline">\(-Q_{ij} + \lambda q_j + \mu_i \ge0\)</span> 条件后，可以将 min 的约束取消掉，上图的公式（4）因为这个时候的取 min 一定会使得 <spanclass="math inline">\(x_{ij}(-Q_{ij} + \lambda q_j + \mu_i)\)</span>这一项为 0，这个其实跟推导拉格朗日对偶的过程有点像，如下图所示（<ahref="https://www.bilibili.com/video/BV1HP4y1Y79e/?share_source=copy_web&amp;vd_source=7b70e0a98d81aba8b5e293a7324c3e2a">来源</a>）</p><p><img data-src="https://wulc.me/imgs/lagrange_dual_derive.jpg" height="50%" width="50%"></p><p>3）取消掉 min 约束后，剩下的 max 问题的变量就是 <spanclass="math inline">\(\lambda\)</span> 和 <spanclass="math inline">\(\mu\)</span>, 从约束条件 <spanclass="math inline">\(-Q_{ij} + \lambda q_j + \mu_i \ge 0\)</span>可以推出 <span class="math inline">\(\mu_i \ge Q_{ij} - \lambdaq_j\)</span>，即遍历第 i 个请求下的所有 action 的 <spanclass="math inline">\(Q_{ij} - \lambda q_j\)</span> 的最大值，也应该比<span class="math inline">\(\mu_i\)</span> 小，又因为 max 问题跟 <spanclass="math inline">\(\mu_i\)</span> 是负相关的，所以 <spanclass="math inline">\(\mu_i\)</span> 的取值应该为公式（5）所示</p><p>4）因此，对于第 <span class="math inline">\(i\)</span>个请求，真正生效的约束条件是 <span class="math inline">\(\max_j (Q_{ij}- \lambda q_j)\)</span>, （这个约束条件是紧致的），只有这个时候 <spanclass="math inline">\(x_{ij}\)</span> 的值才不是0, 亦即最终的action（见公式（6） ）</p><p>因此，从公式 （6）可知，线上 serving 时，还需要知道 <spanclass="math inline">\(\lambda\)</span> 的值（<spanclass="math inline">\(Q_{ij}\)</span> 和 <spanclass="math inline">\(q_j\)</span> 的建模方法下面一部分会讲）</p><p>但是 <span class="math inline">\(\lambda\)</span>的解析解在这个问题中比较难求解，paper 在这里做了 2 个假设</p><p><strong>假设一：<span class="math inline">\(Q_{ij}\)</span> 随着<span class="math inline">\(j\)</span> 的增加而单调递增</strong><strong>假设二：<span class="math inline">\(Q_{ij}/q_j\)</span> 随着<span class="math inline">\(j\)</span> 的增加而单调递增</strong></p><p>假设一的含义是随着候选数越多，能从这次价值得到的流量越大（笔者觉得这里还要加个约束，就是线上的资源能抗住的情况下，否则候选数越多可能会导致错误率增加，流量价值下降，paper后面提到的一个MaxPower的概念就是在讲这个事情），假设二的含义是随着候选数的增加，边际收益是递减的，这个比较make sense</p><p>基于这两个假设，可以推导出<strong>总体的算力 <spanclass="math inline">\(\sum_{ij} x_{ij}q_j\)</span> 会随着 <spanclass="math inline">\(\lambda\)</span> 增大而单调递减</strong>,这部分可参考 paper 中的 4.2部分，笔者这里做一个更直观的解释，由上面推导的公式（5）可知，<spanclass="math inline">\(\max_j (Q_{ij} - \lambda q_j) \ge 0\)</span>, 即<span class="math inline">\(Q_{ij}/q_j \ge \lambda\)</span>, 而<strong><span class="math inline">\(Q_{ij}/q_j\)</span>的物理意义可以理解为单位算力的收益</strong>，由假设 2可知，随着算力的增加或者说候选数的增加，算力的边际成本是下降的。因此，随着<span class="math inline">\(\lambda\)</span>的增加，意味着对算力成本的要求增加，即候选数需要减少（这其实也是 <spanclass="math inline">\(\lambda\)</span> 的一个物理含义）</p><p>有了上面的“总体的算力 <span class="math inline">\(\sum_{ij}x_{ij}q_j\)</span> 会随着 <span class="math inline">\(\lambda\)</span>增大而单调递减”的结论后，可以通过二分法寻找一个 <spanclass="math inline">\(\lambda\)</span> 使得消耗的算力刚好接近总体的算力quota <span class="math inline">\(C\)</span>，算法如下图所示，11行的符号应该是写反了</p><p><img data-src="https://wulc.me/imgs/DCAF_calc_lambda.jpg" height="50%" width="50%"></p><h4 id="系统设计">系统设计</h4><p>DCAF 的总体框架如下图所示，左边部分主要是建模 <spanclass="math inline">\(Q_{ij}\)</span>, 右边部分则是在线 serving 系统</p><p><img data-src="https://wulc.me/imgs/DCAF_system.jpg" height="50%" width="50%"></p><p>左半部分比较好理解，这里着重讲下右半部分，其中右上角的 InformationCollection and Monitoring部分，会实时搜集当前系统负载的各项数据，如错误率，超时率等，并通过 PID算法控制错误率和超时率，或者说控制系统当前能承载的上限避免整个系统被打崩，paper里也把这个称为MaxPower，可理解为<strong>根据系统的实时负载调整每次请求的候选数的上限</strong></p><p>这部分在实验设置里也能体现出来，即随着系统负载 qps 增加，MaxPower会自动下调，保证整体系统的稳定性，如下图所示</p><p><img data-src="https://wulc.me/imgs/DCAF_maxpower_exp.jpg" height="40%" width="40%"></p><p><span class="math inline">\(\lambda\)</span>则是根据上面的二分搜索算法，利用采样一段时间的数据实时计算 <spanclass="math inline">\(\lambda\)</span> 的最优值，算法中的容量 <spanclass="math inline">\(C\)</span> 则是根据 QPS做了兑换计算，如下是离线计算 <spanclass="math inline">\(\lambda\)</span> 的过程</p><p><img data-src="https://wulc.me/imgs/DCAF_lambda_offline.jpg" height="50%" width="50%"></p><h4 id="实验设计">实验设计</h4><p>实验部分做了 2 个实验，离线和在线的</p><p>离线实验主要是做了流量回放，<spanclass="math inline">\(\lambda\)</span> 还是按照上面的方法计算，算力<span class="math inline">\(q_j\)</span> 表示请求的候选数量， <spanclass="math inline">\(Q_{ij}\)</span> 表示算力 <spanclass="math inline">\(q_j\)</span> 下候选里 top-k 个 ecpm 广告的和</p><blockquote><ul><li>Action <span class="math inline">\(j\)</span> controls the number ofadvertisements that need to be evaluated by online CTR model in Rankingstage.</li><li><span class="math inline">\(q_j\)</span> represents theadvertisement’s quota for requesting the online CTR model</li><li><span class="math inline">\(Q_{ij}\)</span> is the sum of top-k ad’seCPM for request <span class="math inline">\(i\)</span> conditioned onaction <span class="math inline">\(j\)</span> in Ranking stage which isequivalent to online performance closely. And <spanclass="math inline">\(Q_{ij}\)</span> is estimated in theexperiment.</li></ul></blockquote><p>离线实验结果如下，左纵轴的 ecpm是实际的流量价值，右纵轴是实际消耗的算力，从结果可知，离线回放能做到算力下降同时流量价值上涨，且随着<span class="math inline">\(\lambda\)</span> 值的增大，DCFA总体消耗的算力和流量价值都是下降的，这个其实跟前面推导 <spanclass="math inline">\(\lambda\)</span> 的过程是一致的，因为<strong><span class="math inline">\(\lambda\)</span>的物理含义就是增加候选数的边际收益的一个门槛</strong>，随着候选数增加，边际收益是递减的，而小于<span class="math inline">\(\lambda\)</span>时就是要截断的候选数，也就是 <span class="math inline">\(q_j\)</span>具体的值</p><p><img data-src="https://wulc.me/imgs/DCAF_offline_exp.jpg" height="50%" width="50%"></p><p>虽然离线实验显示打平算力 ecpm+3.7%, 打平 ecpm机器成本-49%，但毕竟是离线环境，比较稳定，选择的 action也不会影响环境，所以如果开线上实验，效果一般会打个折扣，paper里的在线实验也显示了这一点</p><p><img data-src="https://wulc.me/imgs/DCAF_online_exp.jpg" height="50%" width="50%"></p><h3 id="流量价值与算力建模">流量价值与算力建模</h3><p>DCAF 这篇 paper着重讲了分配策略，但是对流量价值和算力的建模讲得比较少，只提到了 <spanclass="math inline">\(Q_{ij}\)</span> 是通过一个简单的线性模型来预估，而<span class="math inline">\(q_j\)</span>则只是候选数，没有进行建模；但是这两个变量的建模对结果影响又是非常大的，尤其是<span class="math inline">\(Q_{ij}\)</span></p><p>值得注意的一个点是，<strong>流量价值 <spanclass="math inline">\(Q_{ij}\)</span> 和消耗算力 <spanclass="math inline">\(q_j\)</span>都跟候选数正相关</strong>，且候选越多，越能接近流量的最大价值（错误率可控前提下），同时消耗的算力也会越大</p><p>直接把候选数当做消耗的算力不是非常精确的做法，比如说所有候选都只需要抽一次特征，这个时间不会随着候选数增加而增加；而如果以候选数为横轴，算力为纵轴，大概率会画出一条<span class="math inline">\(\log(ax)+b\)</span> 形式的曲线（<spanclass="math inline">\(a\)</span> 和 <spanclass="math inline">\(b\)</span>是两个参数），即随着候选数增加，边际的算力成本是下降的，<spanclass="math inline">\(Q_{ij}\)</span> 同理, 所以可以把 <spanclass="math inline">\(Q_{ij}\)</span> 和 <spanclass="math inline">\(q_j\)</span> 都写成 <spanclass="math inline">\(f(候选数)\)</span> 的函数形式</p><p><img data-src="https://wulc.me/imgs/computational_resource.jpg" height="50%" width="50%"></p><p>美团在这篇文章中也描述了其对 DCAF 的一个改进，<ahref="https://tech.meituan.com/2021/06/17/waimai-ai-advertisement.html">美团外卖广告智能算力的探索与实践</a>，其中就包括了对这两部分的详细的建模，下面会大概讲一下美团的做法，并讨论一下其他可能的做法</p><h4 id="流量价值建模">流量价值建模</h4><p>如果直接建模 <span class="math inline">\(Q_{ij}\)</span>（比如说通过multi-head 的方式，每个 head 代表一个 action），需要保证 <spanclass="math inline">\(Q_{ij}\)</span> 随着 <spanclass="math inline">\(j\)</span> 是单调递增的，可以通过在 loss 增加一项regularization 项来尽量保证预估值是递增的，如在 loss 中增加一项 <spanclass="math inline">\(ReLU(pred_{j}-pred_{j+1})\)</span>来让预估值尽量保序，但这也不能完全保证预估是有序的</p><p>针对这个问题，上面的美团的文章的做法是<strong>预估整条流量的价值，然后通过每个广告的预估分来估算不同档位的价值</strong>（即下图的档位价值预估），这样理论上能够计算所有可能的action，相比于 multi-head 的做法要更加灵活和轻量级</p><p><img data-src="https://wulc.me/imgs/DCFA_meituan_value.jpg" height="50%" width="50%"></p><p>而价值预估上，为了保证在线的效率，美团采用的是“离线预估，在线查询”的方法，即离线通过对特征分桶来划分流量，然后通过xgb 预估每个桶里的流量价值并写入外部 kv；在线时通过实时查询 kv和插值的方法来serving，保证任何流量都有一个预估值，最后通过档位价值预估的方法来得到不同<span class="math inline">\(j\)</span> 下的 <spanclass="math inline">\(Q_{ij}\)</span></p><p>除了这个思路，前面提到了如果以候选数为横轴，算力为纵轴，大概率会画出一条<span class="math inline">\(\log(ax)+b\)</span> 形式的曲线（<spanclass="math inline">\(a\)</span> 和 <spanclass="math inline">\(b\)</span>是两个参数），我们可以基于这个先验来做更简单的推理和求解，比如说最简单就是基于后验数据直接拟合出<span class="math inline">\(a\)</span> 和 <spanclass="math inline">\(b\)</span>这两个参数，但是需要考虑做在何种维度，比如说 user 维度、user ×广告位维度等，核心问题是要考虑做在何种维度，如果维度太细数据过于系数，可能需要考虑做到更大的维度；同时也可以考虑贝叶斯这一类方法</p><h4 id="算力建模">算力建模</h4><p>美团的文章里算力的建模跟价值的建模很类似，都是离线预估、在线查询的</p><p>离线先做特征分桶，然后在桶里建模条数和算力的关系，每个桶的建模采用了分段线性拟合，与上面的价值建模不同的点在于，这里没有插值的过程（就是默认所有流量都能找到对饮的桶？）</p><p>而相比于 DCAF 原文采用条数来衡量算力，这里采用了 CPU的耗时来衡量算力，总体方法如下</p><p><img data-src="https://wulc.me/imgs/DCAF_meituan_computation.jpg" height="50%" width="50%"></p><p>而另一种思路跟上面提到的利用 <spanclass="math inline">\(\log(ax)+b\)</span>形式作为先验比较相似，也是需要考虑在特定维度去拟合 a, b 这两个参数</p><h2 id="小结">小结</h2><p>本文主要从流量维度介绍了一些算力优化的手段，可以将其分为 drop、cache和 dynamic 三类方法，如果我们把算力拆解为“QPS×平均请求消耗算力”，drop相当于是有丢弃一些低质请求，cache则是通过缓存降低平均请求消耗的算力，两个方法都比较直观</p><p>dynamic也是在尝试在降低平均请求消耗的算力，或者更准确的说是重新分配算力，做到在打平业务效果减低机器资源，或者打平机器资源提升业务效果；DCAF是这类方法的一个典型工作，DCAF对问题的建模和求解比较值得学习，但是对流量价值和算力的建模讲得比较粗糙，美团技术团队的一篇文章对这部分做了较好的补充，本文也提出了建模这两个变量的一个思路；总体来说，这个方法在理论推导和业界落地上都证明了其有效性，值得学习。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;当前的推荐或广告系统基本都是做到请求级别的预估和优化，在效果最大化的同时带来的问题是机器成本的上升；而流量分布的不均匀使得这个问题更为严峻，比如说对于抖音或美团，一天内流量往往有两个峰：午高峰和晚高峰，因为这两个时间点餐、刷手机的人数会陡增，而其他时间段流量会下降比较多，如下图所示&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&quot;https://wulc.me/imgs/unbalanced_traffic.jpg&quot; height=&quot;30%&quot; width=&quot;30%&quot;&gt;&lt;/p&gt;
&lt;p&gt;这意味着如果准备足以抗住高峰的机器，那在其他时间段大部分机器是空转的，或者说
roi
很低，因此往往在高峰的时候都需要扩容或降级。降级一般是指指降低请求数，按比例
drop 流量，但是 drop
流量对总体效果肯定是有损的，因此也衍生出了算力优化这个研究方向，算力优化本质上就是做效果和机器成本的
trade-off, 或者说如何尽可能无损地降本&lt;/p&gt;
&lt;p&gt;本文主要介绍一些算力优化的常见手段，笔者将其总结为
&lt;strong&gt;drop、cache 和 dynamic&lt;/strong&gt;
三类方法；而如果把消耗的算力拆解，可以直观拆成 2 部分：&lt;strong&gt;请求量 ×
请求消耗的算力&lt;/strong&gt;，因此可以从这两部分出发去优化算力&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;drop：直接把流量 drop 掉，即直接减少“请求量”&lt;/li&gt;
&lt;li&gt;cache：将之前的预估结果存到缓存中，每次预估不用经过实际机器的
inference，即减少了“请求消耗的算力”&lt;/li&gt;
&lt;li&gt;dynamic
则是根据请求的价值，动态控制每条请求消耗的算力，这个方法也是减少了“请求消耗的算力”，&lt;a
href=&quot;https://arxiv.org/pdf/2006.09684.pdf&quot;&gt;DCAF&lt;/a&gt;
是这类方法的代表&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;上面的几个方法都是偏流量维度的优化，还有一些方法是对模型 inference 的
耗时进行优化的，主要方向是计算并行（硬件升级）、模型压缩（量化、蒸馏、结构调整等），本文就不详细展开了&lt;/p&gt;</summary>
    
    
    
    <category term="计算广告" scheme="https://wulc.me/categories/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    
    <category term="计算广告" scheme="https://wulc.me/tags/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    <category term="机器学习" scheme="https://wulc.me/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>聊聊管理</title>
    <link href="https://wulc.me/2022/09/25/%E8%81%8A%E8%81%8A%E7%AE%A1%E7%90%86/"/>
    <id>https://wulc.me/2022/09/25/%E8%81%8A%E8%81%8A%E7%AE%A1%E7%90%86/</id>
    <published>2022-09-25T13:53:19.000Z</published>
    <updated>2023-08-01T15:49:42.536Z</updated>
    
    <content type="html"><![CDATA[<p>管理，似乎是职场人无法回避的一个话题，因为随着组织的庞大，由于沟通、分工、人员参差不齐等问题，人效不可避免地下降，管理就是在缓解人员数量增加而带来的边际收益递减问题。而无论是管理者还是被管理者，笔者觉得都有必要去了解一下管理的相关内容，才能更好地扮演自己在职场中的角色</p><p>在这个话题下，有着不同的派系和理论，每一种看起来都讳莫如深；但是回到管理的本质，就是如何高效地组织一群人去完成一个任务，并且是长期可持续的</p><p>虽入职场时间不长，也有一些谈不上正式的管理经历，同时有幸从接触到的多位直属leader身上、从与一些前辈的谈话中，都获得了不少的启发和指导，自己也在这个问题上做了一些简单的调研，一直想对这部分做个总结，于是就有了这篇文章</p><p>文章主要是笔者的一些经历以及对管理的简单认知，样本必然是有偏的，未必在所有场景下都适用，文章可能会比较发散，祝开卷有益</p><span id="more"></span><h2 id="身边的那些管理者">身边的那些管理者</h2><p>在笔者当前有限的职业经历中，有几位给笔者留下较为深刻印象的的老板，下面会简单讲一讲他们的故事，以及笔者从中学到的一些东西</p><h3 id="能力是出众的态度是谦和的">能力是出众的，态度是谦和的</h3><p>一般从 IC(Individual Contributor)到管理者的角色的转变，都是做了一些比较成功的项目；而这也意味着管理者的业务能力一般是会比较强的，从笔者的经历来看，也的确如此</p><p>在笔者接触到的大老板里，都有这样的特性：他们的能力是出众的，态度是谦和的（这里的能力更多的是指业务能力）</p><p>在这一点上，Z 老板给笔者留下的印象最深，也是笔者尤为佩服的一点，Z老板是那种工作了好多年，但是仍然保留着对技术与业务的热情和好奇心的老板，就是那种如同<strong>刚毕业的年轻人对新鲜的职场的热情与好奇心</strong></p><p>Z老板是笔者毕业进厂时就认识的老板，当年刚毕业的时候觉得这种状态很正常，但是工作了几年后，似乎在经历着职场的Burnout(关于 Burnout，<ahref="https://www.xiaoyuzhoufm.com/episode/62036d09c18c718fa5d0076b">永不停止的列车</a>)时，才意识到这一点的可贵之处，尤其是 Z老板的经历如同做过山车一般，即使在所谓的底部，也是依然保留着这种热情不变，respect~</p><p>也许也是因为这一点，Z老板能够一直保持这对业务的敏感性，能够很好地判断出业务上各类事情的优先级，也能在各种讨论会中提出很多IC 也没有考虑到问题</p><p>此外，笔者接触过的老板，对人的态度都是很谦和的，或者说是比较“真”的；这一点Z老板留下的印象也是尤为深刻，当你有问题或者说需要做出职场上的选择去找他时，他会站在你的角度，考虑你总体的利益，给你很多中肯的建议，哪怕这些建议对他来说并不是利益最大化的；<strong>换位思考的确是一种技巧，但是如果能够知行合一且长期地身体力行，在笔者看来就是一种难能可贵的“真”</strong></p><p>这一点在 D 老板身上也是如此，我跟 D老板是两条线的，没有直接或间接的汇报关系，但是今年面临一些选择去找他时，他还是很客观地给我提供了非常多的有效信息和建议，这里也实名感谢匿名的D 老板，respect~</p><p>而<strong>或许保持一种“真”，在漫长的职业生涯中，才会有真正愿意长期追随你的人</strong>；因为员工也不傻，当你是真的站在他的利益角度上为他考虑问题，考虑如何培养他、为他争取应有的利益时，他也是会怀着感激之心愿意跟随着你去打仗的</p><p>而假装强大，只会吸引那些来依附你的人，而不是能跟你一起打仗的人，这不是威信，这是一种负担。<strong>坦诚会让管理变得没那么累，对下属坦诚，也让下属对自己坦诚</strong></p><p>见证着 Z 老板经历过的起起落落，如果从功利的角度或者说业务的 scope大小，现在 Z 老板似乎在底部，但是笔者是很相信均值回归的，相信 Z老板肯定会回归到他应属 scope 那一天~</p><h3 id="边界需要清晰才会有-owner-意识">边界需要清晰，才会有 owner意识</h3><p>一些厂常提到的不设边界，但同时又要有 owner意识的理念，似乎跟上面是很矛盾的，但两者解析的角度不太一样，不设边界这个理念笔者觉得对个人更适用：即<strong>个人不应该局限于本质工作，而是去多了解其他人、其他团队工作，更好地融会贯通，同时需要对自己手上的工作有owner 意识</strong></p><p>而笔者这里提的“边界需要清晰，才会有 owner意识”则是在团队角度去考虑的：即<strong>需要把团队工作清楚划分到具体的人上，才能让每个人都有owner 意识</strong>。这一点，笔者在过去一年里感悟尤为深刻</p><p>这里不得不介绍 J 老板，J老板也是上面说的那种能力出众、态度谦和的老板，而令我印象深刻的是 J老板可以说是手把手教了我很多管理上的知识</p><p>在 J老板正式接收我所在的小团队前，团队内的分工可以说是惨不忍睹，每个人同时参与着4、5 个项目，但是每个项目又没有明确的负责人，导致的后果就是每个方向的roadmap 都不明确、每个方向下关键的 action也没有厘清楚，人效很低，团队里的很多同学的士气也比较低落（后来跟 J老板的沟通中才发现，这是由于团队里较多初入职场的员工且缺少成就感）</p><p>而 J老板过来后，做的第一件是就是把这个小团队的方向划分清楚成几个重点的业务方向，并且为每个方向指定一个较为资深的同学作为owner，每个 owner 下有几个新同学（PS,现在回头看，这个策略也许并不普适，比如说面对着都是资深的同学；但也许是当时的团队组织中最好的策略）</p><p>作为其中一个方向的 owner，我也依葫芦画瓢，把这个方向的roadmap、重点的子方向梳理并划分清楚，分配到具体的新同学上，同时作为陪练的角色，指导每位同学去解决各个子方向上遇到的卡点问题等</p><p>在这个过程中，遇到的另一个有意思的问题，就是在何种情况下需要 “gethandsdirty”，一开始看到很多事情，笔者都会忍不住想上手去做，因为的确觉得短期内会让事情推进更快；但现在回看，这样的弊端也会很明显，一是下面的同学得不到锻炼，二是这其实是一个“老黄牛”类型的伪中层（这部分会在下面介绍），会把自己搞得很累，团队也得不到发展；而J老板在这个过程中跟我说过、现在仍然印象深刻的一个观点是：<strong>要长期培养有战斗力的团队，需要让每个成员成长，让每个成员有成就感</strong></p><p>这个过程往往会存在一个<strong>事和人的权衡</strong>，或者说业务产出和培养成员的权衡，业务产出是能比较好去量化的，但是培养成员的产出就不太好去衡量。最理想的状态下把团队成员在进步，同时把业务完成得更好，但这往往需要更多时间与上级的耐心。在实际中，需要考虑的更实际的问题是：<strong>短期内需要保证业务产出到何种程度，长期又应该如何建设好团队，是一个以业务产出为约束，最大化团队长期发展的优化问题</strong>，这个问题没有标准答案，只能说是不同业务、发展规模、团队规模下可能的最优解都是不同的</p><p>经过半年这样的安排，总体的业务收入增长了 1.5倍，同时每位同学都有相应产出，部分同学也在 one one反馈中与笔者透露过这种安排让他更明确了自己的任务，并在完成了这个项目的一些milestone 后，有信心迎接更大的挑战了，而在这之前，这位同学差点就要被 pip了。这样的结果，印证了 J老板的方法的正确性，也从某个角度说明了管理对于挖掘个人潜能的重要性</p><p>虽然跟着 J老板的时间并不长，但是从他身上学习到了很多，无论是管理还是技术，也是非常感谢J 老板几乎是手把手教会了我这些管理的基本知识~</p><h3id="明确团队定位组建有凝聚力的团队">明确团队定位，组建有凝聚力的团队</h3><p>业务的迅速发展不免会导致组织的频繁调整，而在这个过程也让我有机会看到了G 老板到一个新团队的 landing 的过程</p><p>G 老板首先以项目维度，与-1、-2组织了多次会议，来 review当前组里进行的绝大多数项目，同时判断其合理性，笔者觉得这个过程挺好的，首先让G 老板能同时了解团队已有的项目和人员情况</p><p>而判断项目合理性的一个重要依据是当前团队定位，即我们当前团队做这个事情是否合理<strong>，如果这个事情已经有其他团队在做，我们参与到其中是否符合团队长期的定位，是否有一些事情是团队应该做但是没有做的</strong>？这种方式笔者理解是站在整个大团队的视角去考虑最优的解决问题的方法，需要较好的业务理解能力、扛得住一些短期的压力以及魄力；同时也让笔者第一次意识到，想象中的所谓组与组中间的“卷”、“抢地盘”等现象，其实并不会发生在所有的公司和团队里~respect</p><p>通过这种方式，G 老板最终 close 了一些跟其他团队 overlap比较严重且定位不太符合团队的项目，同时通过与团队配合比较紧密的销售团队的沟通，也新立项了一些项目。重新调整后，组里做的事情，虽然看起来不是并不是那么高大上，但是更符合了团队的定位；虽有被调整的同学体感可能会有些不舒服，但如果YY 一下，站在 G 老板的+1的角度，相信对这次的调整应该也是满意的，毕竟站在 G 老板的+1并不会希望看到团队下的所有同学都去卷同一个方向比如说ranking，而是需要尽可能保持各司其职，避免一些“脏活累活”没人干</p><p>G 老板做的第二件事，就是组建组里的核心团队(比较常见的就是 XX-core团队)，主要是 G 老板的 -1 以及一些核心项目里的 -2同学。令笔者印象比较深刻的有几件事，一是 G老板愿意主动授人以渔，会给他的 -1赠送过一些管理上的相关书籍，并且非常真诚地说了这本书对他的其他很大；二是还会跟-2 的一些同学定期one-one，聊业务、团队发展、职业发展等问题（说实话这是笔者第一次跟 +2的老板的定期 oneone）；三是对组里的核心团队，会定期进行面试等培训，统一面试的标准（这个在招聘还是挺重要的，如果不对齐标准，面试里就很容易出现类似ranking 中的召回与精排不一致等问题），同时亲力亲为组织核心团队的一些tb</p><p>通过这一系列的动作，至少在笔者的体感上，团队是更有凝聚力了，因为对于比较大的团队，上面的老板肯定无法亲自去了解每个人、把控每个项目的方向；而G老板的做法就是在<strong>大面上明确了整个团队的定位，同时把一小部分的同学组建为核心团队，把一些理念传递给这些同学，让这些同学去把控各个子方向</strong>；避免了放养式的管理导致团队方向不明确，在兼顾了手下同学的体感，愿意放权；或许这就是管理所希望达到的目标吧</p><p>因为业务调整等原因，与 G老板的汇报线只持续了大半年；但是在这大半年里，因为跟 G老板坐得比较近，从 G 老板身上看到了一个高阶的管理者的 landing过程，也看到了成熟的谈吐和处理问题的方式，更从与他的 one one中学习到了很多，回想这段经历，还是非常感谢 G 老板的</p><h3 id="坚持做长期正确的事情">坚持做长期正确的事情</h3><p>坚持做长期正确的事情，是一句政治正确、但在实际执行中往往会因为各种约束而变形的话</p><p>在这点一上，给笔者留下比较深刻印象的是 H 老板；H老板不算非常高阶的管理者，但是还是较好地践行了这一点，且最终证明了其价值的；这一点需要很强的业务判断能力，以及能顶住压力来拍板的魄力</p><p>之前 H老板接手的一个项目，老大不太看好，曾负责过的相关同学也不愿意继续去做，但H老板从业务角度出发，觉得这个方向还是有价值的，于是还是坚持投入了人力去做了这个事情，最终产品还是做起来了</p><p>后来跟 H 老板沟通过程中，H老板告诉了我他坚持做这件事情的原因，或者说怎么去判断要做的这个产品是否有价值（主要是广告主侧的产品）；H老板给出的答案是能否真的能够给客户带来价值（非常官方但是正确的一句话），如提升了投放效率、或者提高了roi（即使短期的的消耗是掉的，但长期来看随着 roi的提升客户会增加预算，也正对应了他之前做的一个业务）等；而<strong>这样的结论了其实是真正把广告主当合作伙伴，并站在他们的角度去考虑他们的真实利益，才能有的一些思考</strong></p><p>另外，H老板给我留下的另一个比较印象深刻的点是敢拍板，也看过隔壁的某个团队老大在很多事情上都唯唯诺诺，一直不敢拍板或给结论，之前不理解，知道看到这个故事才懂：<ahref="https://m.okjike.com/originalPosts/62a9a3cb42f7aac7b1237734">为什么不靠谱的管理者能稳如泰山</a>,因为<strong>敢拍板意味着对自己的决定有充分的认知和信心，因为如果真的出了问题需要扛得住</strong></p><blockquote><p>往上爬需要领导的信任和至少看起来好看的成绩；但是要想不掉下来，关键是<strong>不犯错、学会免责</strong>，让错误决策都归因不到自己头上去</p><p>为什么有时候，我会遇到某些管理者，碰到重大决策时一定先开会。<strong>会上他把本该由他做出的决策丢给大家。这个时候态度很谦卑：“我也左右为难，需要大家建议</strong>。”</p><p>然后不管你给他什么建议，他都说出好多问题。为的其实就是把这些问题留在会议纪要里。为的也是这个重大决策一旦失败，是“大家一起做的，不是我一个人做的”，可以不用担责。</p><p>这样带来的好处是他个人的，他就像个泥鳅，你觉得他有问题、想找到到底是什么问题时，发现他滑不留手。</p><p><strong>这样带来的问题是什么呢？如果10个人一起讨论，必须要所有人都达成一致才能决策。那最后，大概率决策的质量是这10个人中最蠢的人所能理解的决策的质量。</strong>为什么很多影响我们生活的决策，看起来总是让人忍不住吐槽。因为参与决策的人们需要免责。</p><p>如果你在工作中，遇到这样的管理者——越是重大决策，越要开会讨论，而且在会上总在唱反调，就是不做出自己的选择。就要小心了，这是个为了自保，不惜坑害业务和其他团队的人。</p></blockquote><p>当然，<strong>做长期正确的事情，哪怕短期有损失，这样肯定会有压力，这个时候往往需要跟老板的信任感</strong>，而信任感的建立，往往是在一起打过几次胜战</p><h2 id="打造好团队这个产品">打造好团队这个产品</h2><p>如果我们把团队也当做一个产品，那作为管理者需要考虑的问题，就是如何设计好这个产品。</p><p>设计好这个产品，需要清楚产品演进的过程，需要产品的执剑人在清楚意识到自己在这个过程需要扮演的角色，以及需要执行的动作</p><p>衡量这个产品的效果，则是整个团队是否能打，你的团队成员（用户）是否了解且认可这个产品的，当一个新的成员加入你的团队的时候，他是否清楚整个团队的职责，他负责的任务以及考核的目标等。</p><h3 id="从-ic-到管理者">从 IC 到管理者</h3><p>一般 IC 被提拔为管理者，都是因为其较为出众的业务能力，而从 IC到管理者的过程往往过程如下</p><ol type="1"><li><strong>短期要为了结果服务</strong>，不能让结果掉链子，这个过程往往是IC 来主导，然后几个新人跟着来做</li><li>中期慢慢的是新人做 IC 看、新人说 IC听，慢慢的要从一个尖兵般的特种部队的队长，变成一个真正是通过你的队员都变成合格的特种队员</li><li>最后才是你彻底形成了一个管理者，更多的是理清一些<strong>事务制度、流程机制</strong>等等。然后你管的部分你减少了，因为他们都成熟了，然后也代表你变成一个成熟的管理者，能够cover 更多的人了。就<strong>再给你来 10个人，你这套东西你也知道有节奏有理念，给你时间你都能盯得起来</strong></li></ol><p>而作为管理者，尤其是中后期阶段的管理者，需要<strong>确认自己比下属“闲”</strong>：先让下属忙起来，确保业务正常(图生存)；管理者要闲下来思考解决更大、更长远的问题(谋发展)；因为作为一个球队的队长，最主要的职责不是进球，而是带领团队进球，需要分辨哪些是必须自己做的事</p><p>套用一个比喻：如果你原来是一条鱼，成为管理者后你需要做的不是成为一条大鱼；而是要蜕变成鸟，得飞起来，否则，按照原来的方式，活多了会累死你。所以<strong>成为管理者，不是从做一件事，到多做一件事，而是完全换一种方式去做事</strong>；</p><h3 id="招人">招人</h3><p>成为管理者，常常需要肩负起的任务是招人</p><p>首先需要清楚，为什么要招人？一定是<strong>从业务出发，即业务现在因为要做哪些事情，所以需要有什么样的团队的成员来一起做</strong></p><p>既然招什么样的人，取决于这个公司做什么样的业务，那就不一定说有经验的比年轻的更好，有的时候也会有所谓的资源陷阱或者经验陷阱，这就涉及到了招聘时的年龄限制的问题</p><p>虽然整个社会都有所谓的 35 岁焦虑或 35岁危机，但这里面最重要的是<strong>心态是否足够年轻</strong>，就是这个候选人是否有足够的热情和好奇心；只要是持续迭代，持续成长的人，年龄会显得不那么重要，当然前提是能力要匹配你的岗位</p><p>另外，在团队要扩张之前，一定要想明白<strong>怎么用最小的资源去验证这件事情是不是正确的</strong>。人越多一定是信息的流通变慢，而且会有信息的扭曲。这就好比在产品设计之初通过mvp 版本去初步验证这个事情的收益和可能的局限</p><p>除了招人，还要培养人（这里的人更多是指团队下属），需要记住一点是需要影响人，而不是控制人，管理者需要有<strong>成就他人的心态</strong>，即你不再是为自己负责，而是为整个团队，为团队里的每个同学，一定要打从心里希望看到自己的同学能够成长，能够晋升；因为管理是通过别人拿结果，需要记住功劳都是团队里实打实干活的同学的</p><h3 id="围绕着事而不是人">围绕着事而不是人</h3><p>管理者一定要知道：要围绕着事情，而不是围绕着人</p><p>永远不要想“他很资深，他是公司的老员工，所以我今天当他的 leader的话会发生什么问题”；也不要担心谁不服我，谁比我资深很多，我管不管得住他；总体就是不要戴有色眼镜去看自己，也不要戴有色眼镜去看别人</p><p>这个时候要想的是，<strong>我们要完成一件事情的话，每个人的分工是什么，它的产出是什么</strong>；当这些都能讲得明白的时候，这个时候就有了标准，就能够去做客观的绩效的考核</p><p>如何围绕着事情开展的方法论因人而异，笔者这里提供一个听到过的较好的说法：<strong>复杂的结果看过程，标准的过程看结果，短期的结果看策略，长期的发展看团队</strong></p><ol type="1"><li>复杂的结果看过程：<strong>无法预测的结果</strong>，更多精力应该关注过程，过程的纠偏到位才有可能确保复杂的结果拿到</li><li>标准的过程看结果：标准或者说比较常规的事情，基本可预测，主要看<strong>执行力</strong></li><li>短期的结果看策略：短期的事情往往取决策略是否得当，策略适合，拿到的结果可能效率更高、质量更好</li><li>长期的发展看团队：组织、事业的长期发展，一定要依靠组织能力，或者说培养一个有战斗力的团队</li></ol><p>另外，<strong>当你要去 push一个人的时候，本质上就是大家对目标还有分工上面没有讨论清楚</strong>，这个时候要做的事情不是去push、而要拉回来再讨论清楚我们的目标是什么，我们的分工是什么，当然前提是这个员工基本还算靠谱，而不是真的赖着不干活的老白兔</p><p>而从心态上，需要承认的事实是，一个良性发展的团队，肯定会有下属在特定的专业能力上比自己要强；而我们都是用人所长，整个公司范围内大家都是用人所长，所以不要想着什么事情自己都要做到最好，而是要想着这个人的这个能力，放在哪个岗位上能发挥出他最大的价值，当然识别长处这一点也很考验管理者的识人能力和业务能力</p><h3 id="做个好的翻译">做个好的翻译</h3><p>管理相当于不需要你亲自做很多很多事了，但是你得有办法让更多的人把这件事做得更好更大。从这个角度来看，<strong>管理就是在做翻译的工作，即把上级的任务翻译成需要下达的任务</strong></p><p>而管理者的老板或者公司压下来的那个东西，是不能不经你翻译直接再传递给员工；因为<strong>如果你的工作只做中转站，那你一定会发现你的工作是没有价值的，不要原封不动地传话，需要带上自己的思考和判断</strong></p><p>比如说一些事情如果传递下来，本身对于团队来说没有积极正向作用，可能你作为一个上级，你的价值就在于你需要把它过滤掉，就是不要往下再去传递</p><ul><li><strong>信息传递要清晰</strong></li></ul><p>有时候如果下达命令时如果对方“不听”，或者说疑惑为什么员工会做得这么慢；先问自己是否说清楚，很多时候是因为你还是<strong>把自己的认知强加在员工身上</strong>，没把上下文或优先级同步到位，本质的问题还是信息的传递之间出了问题</p><p>《<ahref="https://www.xiaoyuzhoufm.com/episode/62b23f72482bcc5dedb96dd7">新晋管理者的避坑指南</a>》里的提到了很常见的一种现象：今天你要把一个工作交给你的团队成员的时候，你交代的够不够清楚他对这件事情的理解认知。有时候你问他懂不懂，你会发现99.99%的员工一定会回答，尤其是中国的员工一定会回答你。懂了，但是他下一步的动作你如果仔细观察之后，他会回去，然后问旁边的同学，那个老板交给我一个工作，我怎么做？他不敢去告诉你，他没有听懂。</p><p>很多管理者需要学的一个技能是<strong>你怎么再三确认他对你交代给他的工作或任务理解到位，给下属安排任务时，不要只说“要做什么”，还得说“为什么要做”“什么时候做完”“要做到的结果”</strong></p><p>为了确保有效沟通，你还需要再做两个动作：</p><ol type="1"><li>告诉员工为什么要做这个事情，目标是什么，这比告诉他怎么做更重要</li><li>信息来回确认三回，每次你讲完，最好让员工复述一遍。“你能复述一下你是怎么理解的吗”“你能再复述一遍吗”，“这个任务给到你了，你接下来会怎么做？”不断修正信息，来回确认他想的跟你想的尽可能接近</li></ol><ul><li><strong>沟通</strong></li></ul><p>管理中沟通的重要性不言而喻，一些沟通的技巧和方法</p><p>（1）不要恶意假设对方，不要揣测</p><p>当你对事情不理解的时候，带着好奇多问一句：“你是怎么想的？这么做你的考虑是什么？”</p><p>（2）坦诚清晰</p><p>说话方式有很多种，总体要坦诚清晰，因为不管是正向的还是负向的，对于员工来讲，他能够比较好的接受这个事情，而这个比较清晰的接收到了你的反馈，是好过于你支支吾吾啥都不讲的；但是也要注意表达，不让别人误解，曲解自己的意思</p><p>（3）把批评变成动力</p><p>高效的管理是激发一个人的善意，而不是一个人的阻抗；从提问开始转变，“你为什么总是XX” 到 “你怎么样才能避免XX”</p><p>（4）包容开放</p><p>沟通是互动的，包容、开放地接受他的反馈，不要情绪一上来一激动，就给别人塞很多东西，但凡觉得他有个地方做的不好了，就非常激动的直接告诉他这个事情你做的不对，叭叭讲一大堆，然后不给他机会说话（能力强的IC 的这个问题越为为严重）</p><ul><li><strong>跨部门合作的翻译</strong></li></ul><p>除了上下级的翻译，跨部门的合作其实也是在翻译</p><p>在上面的播客中，Zara提到的很有意思的一点是<strong>把我们想要实现的目标翻译成对方的目标</strong>，让人帮你的最高境界就是让他觉得你在帮他。所以如果要跟跨部门合作，Zara会先去看他的 OKR 然后看他的 OKR里有哪些是我这件事情可能能帮他实现的，然后就翻译成他的目标</p><h3 id="调动积极性">调动积极性</h3><p>虽然员工在工作中的积极性往往取决于其自身的目标、追求和欲望的强烈程度，但是一个管理者的重要任务之一也是激励和激发，激励员工的能动性，激发员工的创造力</p><ul><li><strong>要激励而不是洗脑</strong></li></ul><p>虽然说激励很重要，如果你这个做的太过了，就又会让人觉得在洗脑，怎么找到一个平衡？</p><p>可能最重要的是<strong>要倾听下属的声音</strong>，然后针对下属的想法和诉求，尽量满足他的诉求，设置较好的激励；很多管理者一上来很容易变成纯单向的输出，就是给下属讲各种自己的愿景、价值观等等，但是忘了去倾听下属的声音，包括下属的真实想法，他实际的诉求等</p><p>当然，这种双向的沟通需要信任：在还没有信任没有建立之前，一个员工跟你讲他心里的话是很困难的，也不要去做这样的预期；而建立信任则是一个比较长的过程了，可能是一块打过仗，或者管理者的办事作风、人格魅力等能打动员工</p><ul><li><strong>耐心</strong></li></ul><p>对于一些初入职场的新人员工，需要更多的耐心，让他们去慢慢地去成长。不能说一上来就以过高的标准去要求他，因为你要意识到其实你也是这么一路走过来的，不能说你做到今天，然后你要求他在一个很短时间内达到你那样的一个水准，这是不科学的，这也是不现实的</p><p>要给他信心，告诉他做错了不要紧，做错了之后可以总结、复盘。这样的调整之后，你会发现他也就越做越有信心，而且也愿意去跟你交流；他的自信建立起来了之后，这件事情就越做越顺，越做越好</p><p>同时要避免新人员工的结果不达预期就自己动手去做，还是要<strong>坚持让你的团队的同学去做事情</strong>，不要去插手把他推到一边说放着我来，这个会特别大的去影响到他的积极性，以及对他长远的跟你的配合会有很大的影响</p><ul><li><strong>识人</strong></li></ul><p>人不是千篇一律的，管理者千万不要幻想我用一套标准对所有的人都适用</p><p>有些人就是以情绪为导向，就是你今天给了他正反馈，他就开心的像一只小鸟一样满屋子飞，然后就好好工作；有些人是不吃你那一套鼓励的，他不吃鸡汤的，他需要的是你要用逻辑征服我；有些人就是不愿意听你讲逻辑，他是那种行动派，就说不要叨叨了，站起来就去干吧</p><p>而在公司的两大类业务（创新性业务和成熟业务）中，往往需要两类不同的人才</p><p>（1）公司在面临寻找第二曲线，要去找一些探索型业务的时候，需要找一批很愿意探索创新东西，创造新的东西，同时韧性特别强，不怕失败的人；因为探索型业务就意味着叫胜率低赔率高，一旦做成了很棒，但是做不成是大概率，就是派出去的敢死小分队一样</p><p>（2）对于成熟期的业务，需要另外一拨人：逻辑严谨，很少犯错，对风险很厌恶，对安全感有要求。这部分人他的整个思维是相对比较缜密，能保证你现在成熟期的业务少犯错，不出现短板，导致业务崩掉</p><p>另外，还着重提到了一种人群:<strong>推土机</strong>，即专业能力是很强的，然后自信心也很强。正是因为他自信心和专业能力很强，就很自我；这种人适合单兵作战缺，管理上我们叫<strong>保护性和限制性使用</strong>，避免它影响现有团队的一些文化；因为能力越强，水准越高，其实破坏力也越大，比如说阿里也出现过的例子，两位科学家来了，一人带个上百人的团队，然后花多少亿吵两年什么结果没有，俩人互相不对付，一起走了留下烂摊子</p><ul><li><strong>从员工的追求出发</strong></li></ul><p>这部分本质上就是要换位思考，即从员工的角度去推进一些事情，<ahref="https://m.okjike.com/originalPosts/6297673ee21f494ee4daf62c">这里</a>有个很好的例子,从这个故事我们也能看到，<strong>管理者应该是一个通过“帮助团队每个人实现个人目标”，从而实现管理者自己目标的角色。</strong></p><blockquote><p>我为啥要指出他身上的问题呢？是因为希望他改掉问题。那他为啥会改掉问题呢？会因为我指出了他就改掉吗？肯定不会呀！他要改掉问题，只会是为他自己！于是，第二天，我试了一下用新的谈话策略，和一个小朋友聊问题。分成四步走：</p><p>1、“XX，你未来希望自己在职业巅峰时在做什么呀？”他说：“我想当一个创业者！”</p><p>2、“那你觉得，可以让你成为一个成功创业者的最大优势是啥？”他说：“我觉得我能坚持正确的事儿！只要一件事儿，我想明白了，就会坚决执行。”</p><p>3、“我觉得，你离成功创业者此刻还有个差距，你看这回这个项目这里、这里都有考虑不全的地方。如果要想成功创业，你得比现在细致才行。”他说：“对哎，我是觉得我还应该更细致。”</p><p>4、“不过我很认可你的优点。细致这个问题你已经意识到了，我相信你会发挥你的优点，把它解决掉的！”</p><p>从此，我再向团队指出问题的时候，对方常常都很开心，也会在谈话后很快行动起来。团队的氛围也在快速改善。</p><p>其实就是想清楚了一件事：<strong>每个人是不会仅仅为了别人的要求就改变自己的。能让他行动起来的，只会因为他自己的目标，尝试将需要他改变的地方跟他的目标联系起来；如果没有目标，那就是个混子，不适合呆在面对挑战的位置</strong></p></blockquote><h3 id="关于伪中层">关于伪中层</h3><p>这里之所以提到这个话题，是因为听到这期播客 《<ahref="https://www.xiaoyuzhoufm.com/episode/62f2db0e5efbdc148aeae2c6?s=eyJ1IjoiNjIxZjkzN2RlZGNlNjcxMDRhYWM4NThhIn0=">汇报要彩排，遇事先甩锅，工作中遇到伪中层怎么办</a>》特别有感触，同时在每个人职业生涯过程中不可避免会遇到这一类的伪中层，要思考的是如何识别这一类伪中层，更重要的是同时如何避免称为这一类伪中层</p><p>这里主要摘自听了播客的一些笔记，也有一些个人思考</p><ul><li>中层应该具备的的三层能力</li></ul><p>（1）向上的战略理解能力</p><p>（2）业务的精专，尤其是技术这一类岗位</p><p>（3）管理能力：能不能发挥好手下员工的能动性</p><ul><li>三种类型的伪中层：传话筒型、欺上瞒下型、老黄牛型</li></ul><p>（1）传话筒：没有经过自己的翻译和拆解, 只会机械地传话</p><p>（2）欺上瞒下：只会汇报和甩锅</p><p>（3）老黄牛：不懂授权，手下员工得不到发挥，没有成就感</p><ul><li><strong>如何应对伪中层</strong></li></ul><p>（1）高层视角：大老板走到一线(包括访谈一线客户、与一线员工约谈、看一线的数据)，不接受单一的中层的二手信息；需要降低大老板获取一线信息的成本</p><p>（2）中层视角：把信息(问题和功劳)尽可能快地传递到老板处，因为往往谁先说，谁就有先发优势，后面说的在大老板看来都是在狡辩；优雅地邀功；不要替老板做判断，客观地陈述数据的变化和具体过程，体现自己对业务的思考和洞察，老板自然会get 到这是你做出来的一个成绩</p><p>（3）员工视角：老板是伪中层，如果能汇报且为你争取利益没问题，但往往伪中层都会把利益归到自己身上；与伪中层相处：1）不独食且有能力类型：要让伪中层觉得你是他的自己人，为他解决问题然后你分得相应的利益；2）独食或无能力类型，想办法干掉或者跑路（如果是新人，可能只能跑路，但工作时间长了，可以想办法干掉），干掉关键打破信息壁垒，但是要提防伪中层的+1，也是一个伪中层（反映时要关系到伪中层+1的实际利益，比如说可能会影响公司的股价或期权价格）</p><ul><li><strong>怎么在面试识别伪中层</strong>（面试时反问的一些技巧）</li></ul><p>（1）公司目标如何制定、如何考核的，既当裁判又当运动员容易滋养伪中层【合理的范式应该是从上到下定目标，有独立的裁判】</p><p>（2）高层是否会有 all hands 或者 -1、-2 的 one one</p><p>（3）反问面试官做过的最有意义的或者印象深刻成果，如果是真实参与的会滔滔不绝跟你说</p><p>（4）问面试官当前团队的员工有哪几个来源；伪中层一般会带着自己的嫡系，形成一个稳固的小圈子，这种情况小心被招进去当做背低绩效的替罪羊【合理的范式应该是老板手下有多个来源，存在有能力的老员工，能够信服这个老板】</p><p>最后，着重讲一些<strong>老黄牛类型的中层的问题</strong>，因为笔者也曾迈入过相似的误区；当你不懂得授权的，严格地控制所有的动作，最后会发生几个问题，第一个是他<strong>自己会越来越累</strong>，他整个人会变成团队的瓶颈；第二个是<strong>团队的所有人会越来越失去主动性</strong>，大家没有什么发挥的空间，最后主动性会流失。第三个就是<strong>团队的所有同学也会失去成就感，越优秀的人走得越早，然后越早会离开他</strong>。最后只有那些就是希望自己有一个安稳工作，不要承担责任的小白兔才会留下来。</p><p>套用一句比较形象的话就是<ahref="https://m.okjike.com/originalPosts/63045c3c188db1d5d07af49e?s=eyJ1IjoiNWM1YmZiMmU3ZjYyNTEwMDE1MTk2Mzk3In0=">救火容易救出成就感</a>，每天无数人找管理者救火，管理者会觉得自己好像是英雄、整个公司非自己不可;这也是人的弱点。下面的例子也许不适用所有的业务，但是做法值得参考，主要想表达的观点是<strong>成功的管理者一定是能将紧急的事情借机制分担，保证自己最主要精力得以分配在重要事务上的人</strong>,</p><blockquote><p>每天我的团队要找我很多次——很多时候是看方案，很多方案，我得看一眼，团队才能往下推进。有时候是出了问题，得赶快查问题。还有的时候，是推进遇到了阻力，得我帮团队找到其他部门，把资源谈下来我也要找团队很多次。有很多事儿，我心里挂着，是真不放心。时不时想起来就找团队问一嘴：做了没有？效果如何？但是，这些事儿，就不会发生在他与团队之间。</p><p>1、 他在自己的团队内，搞了个小规模的数据分析的团队。</p><p>不过他的数据分析，可不是仅仅支持AB测试。他让这个团队，<strong>量化了自己的评价标准</strong>。于是，再有团队拿着方案，找他看行不行的时候，他都说：你去找那个数据分析的负责人，他掌握着我的评价标准，他帮你测算一下，他说行，那就行。于是，团队需要找他过的方案，大大减少。</p><p>2、 他还搞了个项目经理。</p><p>团队有遇到资源问题，自己搞不定？也先不用找他。先找项目经理！公司有哪些资源、怎么协调，项目经理门儿清。真遇到项目经理搞不定，需要他说句话的。项目经理会帮他把微信说啥编好，他一键转发。于是，团队需要找他协调资源的情况，也基本消失。</p><p>3、项目经理还负责催进度。凡是他在意的事儿，他都让项目经理管理起来，周期性催活儿。于是，他需要找团队问东问西的情况也大大减少。</p><p>那什么事儿他必须亲自干呢——团队在方法上遇到了困难，实在找不到办法，他和团队一起讨论。<strong>他花了大量时间面试和接触更好的候选人,他还会听大量的用户访谈、每天自己看很多数据。</strong></p><p>相比之下，<strong>我们大多数管理者，每天都被不得不做的紧急事务催得团团转。紧急的事儿消耗精力，但是重要的事儿才会产出关键业绩</strong>。</p></blockquote><h3 id="文化与战略">文化与战略</h3><p>文化与战略，似乎是一个很大又很虚的词，但是在听了《<ahref="https://www.xiaoyuzhoufm.com/episode/63585cac5e3d8a7ab9ef9051">十点读书林少：一线员工可以为公司战略做些什么？</a>》后，发现从高层视角去审视管理这件事情，文化和战略对一个公司的长期发展也是不可缺少的手段</p><ul><li><strong>关于文化</strong></li></ul><p>随着企业变大、人变多后，大家认知体系必然会不同频，必须要<strong>有一个同频的目标去做决策的一个标准</strong>，这个时候就凸显了企业文化的重要性，而文化就是帮战略、帮组织纠偏，它是很好的一个纠偏剂；套用林少的话是这么说的</p><blockquote><p>首先文化确实蛮虚的，但我个人觉得其实从一家公司的底层来看，文化它是一个底座，它可能没有那么显性，但是它对这个公司的长远的一个指导是有非常重要的一个作用的。<strong>战略、组织、文化</strong>这三件事情其实是一个公司成功的比较重要的三个要素。那战略这个事情咱们比如说每年甚至每个季度都要开战略会，为什么？因为市场在变化，所以你的战略可能是会变化的，而且很有可能你的战略是会制定错误，可能会跑偏。组织其实它也是跟着战略变化的。那有可能我们这段时间我们这个战略出现了偏差，那我们大的这个组织它也会有一些变化，那组织里面也会有不同的同学加入。那可能有些同学非常合适，但有些同学他可能就不合适，可能也会又走偏的时候。那什么是文化呢？我觉得其实文化就是帮战略纠偏，帮组织纠偏，它是很好的一个纠偏剂。就<strong>从长远的发展来看，当我们有一些公司发展碰到瓶颈，公司走了弯路，那这个时候我们靠什么？就靠你的文化里面的使命，还是回到原点，到底我们做这件事情意义是什么？然后到底我们长远我们要去向何方？然后我们从起点走向愿景的这条过程中，我们的行为准则是怎样的？我们是跑着去，走着去，还是抄着小路去？还是说我们可能通过一些不常规的道路去？我觉得这些都是文化可能在起到指导的作用。</strong>我们企业文化其实比较核心的是三个部分，<strong>第一个是使命，第二个愿景，第三个价值观</strong></p></blockquote><ul><li><strong>关于战略</strong></li></ul><p><strong>战略应该是简单的</strong>，应该是你一说出来大家觉得他是容易理解的，跟公司的使命是极度契合的，然后跟我们自己的能力也是非常的契合的；战略不太需要多条，也不太需要说你去经常换方向，反而是你围绕着自己主赛道，然后好好的去进行战略的一些比较简单的升级</p><p>战略的制定往往分不同的阶段，<strong>早期更多就是靠直觉拍脑袋</strong>，就是老板看到有一个机会，还是一个无人地带；直觉这里会有机会，所以自己就往前冲了，可能大部分会失败，但少数会成功。战略直觉是挺重要的，就是一个CEO他每天都在接触这个公司的所有的信息，然后他也在跟很多外部的一些市场去打交道，就是这每天的信息其实是会让CEO 去产生一些战略直觉的。有些 CEO其实是有<strong>战略直觉天赋的，会是一家公司一个 CEO非常核心的竞争力</strong>。但仅有这个不够，因为即便如此，一个人依然是有盲区的。那这个时候就需要多方的视角，<strong>需要有高管团队帮忙来从不同的维度去做战略的复盘，做战略的探寻，结合外部的顾问，结合CEO的直觉，再结合整个管理团队的多维度的战略的探寻，是会制定出相对比较有效的战略方向</strong>。</p><p>而战略直觉依赖的的信息来源，播客里提到了三个（1）跟更多的同事去交流，不仅仅高管，跟更多的中层甚至是基层的员工去交流，一线的员工其实是离炮火最近的；可以听听他们的想法，他们对公司的看法，然后听听他们对市场的看法，他们对用户的看法（2）每天要有大量的输入，这些输入可以是来自于你所关注的一些账号，有公众号，有抖音账号（3）保持足够频率的跟外部的同行交流，他们可以是你的密友，也可以是你新认识的一些创业者，也可以是你的投资人，从他们这边也可以获取到非常高质量的一些信息跟建议</p><p>有了战略信息，如何向员工传递？需要靠机制一层层落实；比如说每个季度制定一个战略OKR 分享会，向全员表达（类似字节的 allhands）；把战略贴在会议室墙上，每个人都很聪明，当他们的信息足够，当公司的信息差越来越少之后，那这个时候其实战略的理解、推行他就会相对比较容易得多。很多时候战略落地不了，可能是信息的传达不够</p><ul><li><strong>管理需要工具化</strong></li></ul><p>除了文化和战略这些看起来比较大而虚的内容，播客还提到比较实在的一点，就是管理需要工具化</p><p>管理很多其实是非标的，因为每个人的管理方式不太一样，每个人他自己的管理风格也不太一样，他的性格也不太一样。那这个时候，<strong>一个新员工加入试点，他怎么更好地去理解我们的沟通方式、协调方式跟会议方式？</strong></p><p>如果能够<strong>将非标的管理工具化，通过更多的文档、通过OKR、通过绩效把它工具化</strong>。那这个时说一个新员工进入公司，他通过飞书等工具，他能够接触到的这些资料他就能够很快地get到这家公司是怎么通过文档交流的，开会的互动的，然后通过周报到底是怎么去协调的</p><h2 id="小结">小结</h2><p>管理这个词看起来似乎高深莫测，整篇文章看下来，的确也有很多的技巧和方法论，但回归到本质，还是如何通过高效的方式组织一群人去完成任务，并且是长期可持续的</p><p>正如没有一种通用的技术能适用于所有的业务，也没有一种通用的管理方式使用所有的团队，因为这跟业务类型、业务发展阶段、团队规模、团队成员的特点都有关；而回到最开头说的像打造一个产品一样打造一个团队，我们要做的就是随着业务等发展，不断地调整团队的这个产品的形态</p><p>往往我们会被传达这样的一个理念：当上了管理者似乎就能一劳永逸，避免 35岁危机，虽没实证过，但相信也不会是真的，只是一个妄念。而随着业务的发展不断调整、进化自己，以更年轻和开放的心态去迎接当前的挑战，有管理工作委任时能够扛得起，没有也能做个能打的IC，可能才是“一劳永逸”的答案；毕竟真正当上管理者的人是少的，而当上管理者可能也需要在合适的时机踩中合适的机会，有运气与努力成分；好好生活，快乐工作，才是每个普通人应该去努力追求的，与君共勉。</p><hr /><ul><li><ahref="https://www.xiaoyuzhoufm.com/episode/63585cac5e3d8a7ab9ef9051">十点读书林少：一线员工可以为公司战略做些什么？</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/62b23f72482bcc5dedb96dd7">新晋管理者的避坑指南</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/636082181bc3371399053ec5">做一个受欢迎的管理者</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/627ae4384af32f2190f6b26f">如何管理比自己年龄大的人</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/62f2db0e5efbdc148aeae2c6?s=eyJ1IjoiNjIxZjkzN2RlZGNlNjcxMDRhYWM4NThhIn0=">汇报要彩排，遇事先甩锅，工作中遇到伪中层怎么办</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/62c4b59e07b14a212561a2ea">为什么晋升总是轮不到你？可能是因为忽视了这项能力</a></li><li><ahref="https://book.douban.com/subject/35799634/">职场晋升101</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;管理，似乎是职场人无法回避的一个话题，因为随着组织的庞大，由于沟通、分工、人员参差不齐等问题，人效不可避免地下降，管理就是在缓解人员数量增加而带来的边际收益递减问题。而无论是管理者还是被管理者，笔者觉得都有必要去了解一下管理的相关内容，才能更好地扮演自己在职场中的角色&lt;/p&gt;
&lt;p&gt;在这个话题下，有着不同的派系和理论，每一种看起来都讳莫如深；但是回到管理的本质，就是如何高效地组织一群人去完成一个任务，并且是长期可持续的&lt;/p&gt;
&lt;p&gt;虽入职场时间不长，也有一些谈不上正式的管理经历，同时有幸从接触到的多位直属
leader
身上、从与一些前辈的谈话中，都获得了不少的启发和指导，自己也在这个问题上做了一些简单的调研，一直想对这部分做个总结，于是就有了这篇文章&lt;/p&gt;
&lt;p&gt;文章主要是笔者的一些经历以及对管理的简单认知，样本必然是有偏的，未必在所有场景下都适用，文章可能会比较发散，祝开卷有益&lt;/p&gt;</summary>
    
    
    
    <category term="闲话几句" scheme="https://wulc.me/categories/%E9%97%B2%E8%AF%9D%E5%87%A0%E5%8F%A5/"/>
    
    
    <category term="闲话几句" scheme="https://wulc.me/tags/%E9%97%B2%E8%AF%9D%E5%87%A0%E5%8F%A5/"/>
    
    <category term="管理" scheme="https://wulc.me/tags/%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Highlight Detection In Video</title>
    <link href="https://wulc.me/2022/08/27/Highlight%20Detection%20In%20Video/"/>
    <id>https://wulc.me/2022/08/27/Highlight%20Detection%20In%20Video/</id>
    <published>2022-08-27T04:00:37.000Z</published>
    <updated>2023-07-16T15:28:28.171Z</updated>
    
    <content type="html"><![CDATA[<p>HighlightDetection，直译过来就是高光检测，一般应用在图像或视频里，本文主要关注视频场景，其任务就是从一段长视频里找到某个“高光”的片段。这里的“高光”是一个非常宽泛的定义，不像ctr/cvr有明确的含义，不同场景下对“高光”的定义不一样：比如说对于带货直播，高光片段也许是gmv最高的时间段；对于非带货直播，高光的片段也许是观看人数或者刷礼物最多的时间段。</p><p>Highlight Detection在实际的应用场景较为广泛：一些视频网站(如爱奇艺、哔哩哔哩)里鼠标停留在视频上时会自动播放一些片段，这些片段可认为是高光片段；主流的直播平台基本都提供了直播回放工具，其中往往也会提供高光片段的候选，除了提供给用户侧，广告主/商家侧也会提供类似产品，如<ahref="https://mp.weixin.qq.com/s/fojF0LZKQcPVNKuEiGfrtg">巨量千川</a>、<ahref="https://partner.e.kuaishou.com/detail/2628">磁力金牛</a>等平台的产品</p><p><ahref="https://paperswithcode.com/task/highlight-detection">HighlightDetection</a>在学术界也是一个研究方向，但是学界基本研究局限在几个人工标注的数据集上，一般无法直接应用到实际的生产环境中，原因就是上面说的，不同场景下对高光的定义不一样，需要的数据集也不一样。HighlightDetection 相关 paper 不少，本文主要讲2 篇更贴近业界的paper，可以重点关注<strong>高光的监督信号的定义，损失函数的设计以及数据集的获取</strong></p><span id="more"></span><h2 id="taohighlight">TaoHighlight</h2><p>这个方法来自 <ahref="https://ieeexplore.ieee.org/document/9447925">TaoHighlight:Commodity-Aware Multi-Modal Video Highlight Detection inE-Commerce</a></p><p>这是淘宝在 2021提出的一个方法，总体的模型结构图如下图所示，模型不复杂，左边是抽取多模态特征部分，右边则是基于抽取出来的特征和score，通过 GCN 做 finetune，损失函数由两部分组成，即<code>Loss_reg</code> 和 <code>Loss_ag</code></p><p><img data-src="https://wulc.me/imgs/TaoHighlight_CAM.jpg" height="70%" width="70%"></p><p>特征工程部分，visual information 通过 I3D+BiGRU 提取，比较常规；textinformation 提出了一个 QFGA(Query-Focus Graph Aggregation), 一个基于graph 抽取特征的模块</p><p><strong>Co-AttentionModule</strong>，这个模块主要作用是融合多模态特征（即 visual information和 text information），基本的原理是参考了 trasformer 的 self-attention机制, 对于下面左边的 block，<span class="math inline">\(v\)</span>相当于 query, <span class="math inline">\(s\)</span> 相当于 key 和value</p><p><img data-src="https://wulc.me/imgs/TaoHighlight_coattention.jpg" height="50%" width="50%"></p><p>其计算逻辑如下图所示</p><p><img data-src="https://wulc.me/imgs/TaoHighlight_Coattention_compute.jpg" height="50%" width="50%"></p><p><strong>Graph-based Fine-tuning</strong>:这部分主要是为了减少抽取出来的特征里的 noise；paper 里是这么说的:<code>Due to the presence of visual and text noises in multi-modal video highlight detection, we propose a graph based fine-tuning module to improve the accuracy of our model.</code>，但是也没进一步说明原因</p><p>具体的做法就是给每帧打一个分，然后选取按 score 排序 topk 的 frame构造一个 graph，基于 graph 做 GCN 的计算，关于 GCN的详细解释可参考这篇文章：<ahref="https://distill.pub/2021/understanding-gnns/">UnderstandingConvolutions on Graphs</a>，</p><p>而最终的损失函数由 2 部分组成，<spanclass="math inline">\(L_{reg}\)</span> 和 <spanclass="math inline">\(L_{ag}\)</span>, 两部分的含义如下</p><p><span class="math inline">\(L_{reg}\)</span>，计算预估的开始/结束时间和真正的开始/结束时间的的差异，计算方式如下</p><p><span class="math display">\[L_{reg} = \frac{1}{N}\sum_{i=1}^{N}[R(\hat{s_i}, s_i) + R(\hat{e_i}, e_i)]\]</span></p><p>各符号含义如下</p><ul><li><span class="math inline">\(s_i\)</span>, <spanclass="math inline">\(e_i\)</span>:预估的高光片段的开始和结束时间点</li><li><span class="math inline">\(\hat{s_i}\)</span>, <spanclass="math inline">\(\hat{e_i}\)</span>: 高光开始和结束时间的 groundtruth</li><li><span class="math inline">\(R\)</span>: L1 函数</li></ul><p><span class="math inline">\(L_{ag}\)</span> 计算方式如下,主要用来计算两段视频的相关性，<span class="math inline">\(k\)</span>表示将每段视频切成 <span class="math inline">\(k\)</span> 段clips，主要由三项组成</p><p><span class="math display">\[L_{ag} = - \sum_{i=1}^{k}e(v_i,\hat{v})\]</span></p><p><span class="math display">\[e(v_i, v_j) = \theta_{r} \cdot r(v_i,v_j)+\theta_{d} \cdot d(v_i, v_j)+\theta_{s} \cdot \cos(v_i,v_j)\]</span></p><p>各符号含义如下</p><ul><li><span class="math inline">\(v_i\)</span>, <spanclass="math inline">\(\hat{v_i}\)</span>: 预估的高光片段和 groundtruth</li><li><span class="math inline">\(r(v_i, v_j) = \frac{I(v_i, v_j)}{U(v_i,v_j)}\)</span>, 就是 <ahref="https://medium.com/analytics-vidhya/iou-intersection-over-union-705a39e7acef">IoU</a>指标，表示重合面积占比</li><li><span class="math inline">\(d(v_i, v_j) = \frac{ |c_i - c_j|}{U(v_i,v_j)}\)</span>, <span class="math inline">\(c_i\)</span> 和 <spanclass="math inline">\(c_j\)</span> 表示两个 video 的中心位置</li><li><span class="math inline">\(cos\)</span>: 两个片段的 cos 相似性</li></ul><p>预估时实际是一个多分类模型(softmax)，会对最后构造的 graph做一个预估，并选择概率最大的一帧作为起始帧，然后取其后的 128frame作为固定的高光片段</p><p>实验评估的效果指标就是看各种 IoU 的占比，数据集是 taobao 提供的包含 5个大分类的数据，整个 dataset 的信息如下</p><p><img data-src="https://wulc.me/imgs/TaoHighlight_dataset.jpg" height="60%" width="60%"></p><p>paper 做了消融实验，结果如下图所示</p><p><img data-src="https://wulc.me/imgs/TaoHighlight_ablation.jpg" height="50%" width="50%"></p><p>各符号含义如下，可以看到文本特征，Graph-based Fine-tuning以及损失函数中的 <span class="math inline">\(L_{ag}\)</span>项作用还是不小的</p><ul><li>w/o.ti. 去掉文本特征</li><li>w/o.ci. 文本特征只包含 video title（去掉了商品 titile和商品属性）</li><li>w/o.st. 去掉了 Graph-based Fine-tuning</li><li>w/o.ag. 去掉了损失函数中的 <spanclass="math inline">\(L_{ag}\)</span> 项</li></ul><h2 id="unsupervised-solution">“unsupervised” solution</h2><p>上面的 TaoHighlight方法使用的是人工标注的数据集，其缺陷是比较明显的，即人工标注导致了成本较高，可维护性太差；一是高光的定义因人而异，标注时主观性会比较强，二是成本和标注的难度决定了数据更新频率不会很高，这在业界基本是无法接受的</p><p>那很自然就会想到，能否利用一些无须标注的信号来规避掉需要人工打标这个环节呢？这篇paper 就提供了一个思路 <a href="https://arxiv.org/abs/1903.00859">Lessis More: Learning Highlight Detection from Video Duration</a></p><p>peper 认为 <strong>Less is More</strong>,即越短的视频的信息量就越高，所以切分出来的片段都可以认为是高光片段，反之越长的视频的信息量约低，切出来的都不是高光片段，因此，paper将训练样本 <span class="math inline">\(D\)</span>分为分为三部分，即<span class="math inline">\(D= \lbrace D_S, D_L, D_R\rbrace\)</span>，<span class="math inline">\(D_S\)</span>表示短视频的集合，<span class="math inline">\(D_L\)</span>表示长视频的集合，paper 将短于 15s 定义为短视频，长于 45s的定义为长视频</p><p>每个视频都会被切成等成的 segment，记为 <spanclass="math inline">\(s\)</span>, <spanclass="math inline">\(v(s)\)</span> 表示 segment 对应的视频</p><p>paper 采用了 pair-wise 的方法来构造样本，即从 <spanclass="math inline">\(D_S\)</span> 和 <spanclass="math inline">\(D_L\)</span> 切好的 segment中分别取出一个，来构成一对 pair <span class="math inline">\((s_i,s_j)\)</span>，然后基于下面的 <ahref="https://gombru.github.io/2019/04/03/ranking_loss/">rankingloss</a> 计算两部分的差异，这里的 ranking loss其实是一类损失函数，常见的 triplet loss、magrin loss、hinge loss其实都可以算做 ranking loss</p><p>损失函数的表达如下</p><p><span class="math display">\[L(D) = \sum_{(s_i, s_j) \in \mathcal{P}}\max(0, 1 - f(x_i) + f(x_j))\]</span></p><p>但这种认为短视频切出来的都是高光，长视频切出来都不是高光的方法显然是比较武断的，或者说存在noise，所以需要计算每对 pair 的置信度，因此引入了一个 binary latentvariable <span class="math inline">\(w_{ij}\)</span>，表示每对 pair的置信度, 因此上面的损失函数变成了如下形式</p><p><span class="math display">\[\begin{align*}&amp;L(D) = \sum_{(s_i, s_j) \in \mathcal{P}} w_{ij} \max(0, 1 - f(x_i)+ f(x_j)) \\\&amp;\begin{array} \\\s.t.&amp; \sum_{(s_i, s_j) \in \mathcal{P}} w_{ij} = p|\mathcal{P}|,w_{ij} \in [0,1] \\\&amp;w_{ij} = h(x_i, x_j)\end{array}\end{align*}\]</span></p><p>上面的 <span class="math inline">\(p\)</span> 表示训练样本里有效的pair 的比例，<span class="math inline">\(h\)</span> 则是计算 <spanclass="math inline">\(w_{ij}\)</span> 这个 variable的网络，在训练时会跟原来的网络做 joint training，实际实现时，会通过分batch + softmax 生效</p><p>虽然这里通过 <span class="math inline">\(w_{ij}\)</span>做到了在<strong>统计意义上只有部分样本有效</strong>，但是未必就能把noise 完全干掉，因为缺少人工先验的信息，可能最终训练出来，在真正有效的pair 上，<span class="math inline">\(w_{ij}\)</span> 可能会更小</p><p>总体的模型和流程如下图所示，<spanclass="math inline">\(\mathcal{P_1}\)</span> 到 <spanclass="math inline">\(\mathcal{P_t}\)</span> 可认为是 <spanclass="math inline">\(t\)</span> 个 batch，每个 batch 有 n 个 pair</p><p><img data-src="https://wulc.me/imgs/HighlightDetection_LessIsMore.jpg" height="50%" width="50%"></p><p>上面也提到，<spanclass="math inline">\(w_{ij}\)</span>实际的生效是通过分 batch +softmax，即上面的损失函数最终会改成如下形式，<spanclass="math inline">\(\sigma\)</span> 是个 softmax 函数，生效在 <spanclass="math inline">\(\mathcal{P_g}\)</span> 中，相当于 <spanclass="math inline">\(p=\frac{1}{n}\)</span></p><p><span class="math display">\[\begin{align*}&amp;L(D) = \sum_{g=1}^{m} \sum_{(s_i, s_j) \in \mathcal{P_g}} w_{ij}\max(0, 1 - f(x_i) + f(x_j)) \\\&amp;\begin{array}\\\s.t.&amp; \sum_{(s_i, s_j) \in \mathcal{P_g}} w_{ij} = \sum_{(s_i, s_j)\in \mathcal{P_g}} \sigma(h(x_i, x_j)) = 1 \\\&amp;w_{ij} \in [0,1]\end{array}\end{align*}\]</span></p><p>实验采用的指标是 mAP(mean average precision)，在 object detection中比较常见的指标，可以简单理解为多个类别物体检测中，每一个类别都可以根据recall和precision绘制一条曲线，AP就是该曲线下的面积，mAP是多个类别AP的平均值</p><p>mAP 的定义跟 AUC 有点像，只是这里采用了 PR 曲线，AUC 采用的是 ROC曲线，两者的区别可参考 <ahref="https://wulc.me/2018/06/16/ROC%20%E6%9B%B2%E7%BA%BF%E4%B8%8E%20PR%20%E6%9B%B2%E7%BA%BF/">ROC曲线与 PR 曲线</a></p><p>实验主要在两个公开数据集上做，数据集为 YouTube Highlights 和TVSum，数据集里对视频做了分类(domain)，因此也尝试了总体建模（下图的Ours-A）和分 domain 建模（下图的Ours-S），效果还是挺不错的，也超过了一些 supervised 的方法</p><p><img data-src="https://wulc.me/imgs/HighlightDetection_LessIsMore_result1.jpg" height="50%" width="50%"></p><p><img data-src="https://wulc.me/imgs/HighlightDetection_LessIsMore_result2.jpg" height="50%" width="50%"></p><p>文章也做了消融实验，主要是 2 部分</p><p>（1）针对上面的binary latent variable <spanclass="math inline">\(w_{ij}\)</span>，对比了去掉 <spanclass="math inline">\(w_{ij}\)</span> （下图中的Ranking-D）和通过 EM来更新 <span class="math inline">\(w_{ij}\)</span> （下图中的Ranking-EM）的效果，效果是 joint training &gt; EM &gt; 去掉 <spanclass="math inline">\(w_{ij}\)</span></p><p><img data-src="https://wulc.me/imgs/HighlightDetection_LessIsMore_ablation1.jpg" height="50%" width="50%"></p><p>（2）对比了数据集大小的影响，随着数据集增大，准确率逐渐上升并减缓，比较常规的结论</p><p><img data-src="https://wulc.me/imgs/HighlightDetection_LessIsMore_ablation2.jpg" height="50%" width="50%"></p><h2 id="小结">小结</h2><p>关于 highlight detection 的 paper不少，这里主要挑选了两篇有针对性的，两篇 paper 的一些核心点如下</p><p>第一篇 paper，TaoHighlight: Commodity-Aware Multi-Modal VideoHighlight Detection in E-Commerce</p><ul><li>特征工程: video 和 text 特征的提取，通过 co-attention机制融合这两部分特征</li><li>损失函数的设计，<span class="math inline">\(L_{reg}\)</span> + <spanclass="math inline">\(L_{ag}\)</span></li><li>减少noise: graph-based fine-tunning 模块，对一些 topk 的候选做fine-tuning</li></ul><p>第二篇 paper，Less is More: Learning Highlight Detection from VideoDuration</p><ul><li>数据集，根据 video 的长短来判断视频的是否属于高光，无需人工打标</li><li>损失函数的设计，pair-wise 的 ranking loss</li><li>减少noise: 通过一个可训练的 binary latent variable来标识样本的置信度</li></ul><p>第二篇的 paper的模式感觉是更适合实际的生产环境的，主要是人工标注的可维护性和持续性都不好，而在第二篇基础上，真正落地时可能还有几个问题需要思考</p><ol type="1"><li>video duration是一个比较粗糙的信号，<strong>实际的业务中，会有很多的指标(比如说ctr、cvr、roi等)，这些指标作为高光的定义也许是一个更好的选择，同时需要权衡选择的信号的深度和数据稀疏的trade-off</strong></li><li>除了以上的 ranking loss，<strong>LTR(pair-wise, list-wise)建模也是一个不错的选择，实际业务中需要考虑 pair 或 list怎么构建</strong></li><li>如果是直播的场景下，需要实时做高光的检测，无法拿到整个视频，需要考虑一种<strong>流式的检测方法</strong></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;Highlight
Detection，直译过来就是高光检测，一般应用在图像或视频里，本文主要关注视频场景，其任务就是从一段长视频里找到某个“高光”的片段。这里的“高光”是一个非常宽泛的定义，不像
ctr/cvr
有明确的含义，不同场景下对“高光”的定义不一样：比如说对于带货直播，高光片段也许是
gmv
最高的时间段；对于非带货直播，高光的片段也许是观看人数或者刷礼物最多的时间段。&lt;/p&gt;
&lt;p&gt;Highlight Detection
在实际的应用场景较为广泛：一些视频网站(如爱奇艺、哔哩哔哩)里鼠标停留在视频上时会自动播放一些片段，这些片段可认为是高光片段；主流的直播平台基本都提供了直播回放工具，其中往往也会提供高光片段的候选，除了提供给用户侧，广告主/商家侧也会提供类似产品，如&lt;a
href=&quot;https://mp.weixin.qq.com/s/fojF0LZKQcPVNKuEiGfrtg&quot;&gt;巨量千川&lt;/a&gt;、&lt;a
href=&quot;https://partner.e.kuaishou.com/detail/2628&quot;&gt;磁力金牛&lt;/a&gt;等平台的产品&lt;/p&gt;
&lt;p&gt;&lt;a
href=&quot;https://paperswithcode.com/task/highlight-detection&quot;&gt;Highlight
Detection&lt;/a&gt;
在学术界也是一个研究方向，但是学界基本研究局限在几个人工标注的数据集上，一般无法直接应用到实际的生产环境中，原因就是上面说的，不同场景下对高光的定义不一样，需要的数据集也不一样。Highlight
Detection 相关 paper 不少，本文主要讲2 篇更贴近业界的
paper，可以重点关注&lt;strong&gt;高光的监督信号的定义，损失函数的设计以及数据集的获取&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="机器学习" scheme="https://wulc.me/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="计算广告" scheme="https://wulc.me/tags/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    <category term="机器学习" scheme="https://wulc.me/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="深度学习" scheme="https://wulc.me/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>从焦虑谈起，聊聊生活的可能性与随机性</title>
    <link href="https://wulc.me/2022/07/31/%E4%BB%8E%E7%84%A6%E8%99%91%E8%B0%88%E8%B5%B7%EF%BC%8C%E8%81%8A%E8%81%8A%E7%94%9F%E6%B4%BB%E7%9A%84%E5%8F%AF%E8%83%BD%E6%80%A7%E4%B8%8E%E9%9A%8F%E6%9C%BA%E6%80%A7/"/>
    <id>https://wulc.me/2022/07/31/%E4%BB%8E%E7%84%A6%E8%99%91%E8%B0%88%E8%B5%B7%EF%BC%8C%E8%81%8A%E8%81%8A%E7%94%9F%E6%B4%BB%E7%9A%84%E5%8F%AF%E8%83%BD%E6%80%A7%E4%B8%8E%E9%9A%8F%E6%9C%BA%E6%80%A7/</id>
    <published>2022-07-31T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.190Z</updated>
    
    <content type="html"><![CDATA[<p>35岁这个槛，似乎是悬在互联网人头上的达摩克利斯之剑，一直在各大媒体上被鼓吹放大，虽不明真假，但也让人不寒而栗；而持续了三年的疫情加上2022 随之而来互联网裁员潮，王兴那句开玩笑似的 “2019可能会是过去十年里最差的一年，但却是未来十年里最好的一年”似乎一语成谶。</p><p>走在奔三的路上，凝望这前面那个迷雾般的 35岁路口，焦虑就一直萦绕在心头；伴随着的是一系列的疑问：大厂为什么要裁员？所谓的35 岁危机从何而来？只有互联网才有这个危机么？普通人只能眼巴巴地等待着 35岁到来然后被裁掉？我们能做些什么？</p><p>当我最开始问出自己这一串问题时，焦虑中带着点绝望，因为前方的路虽然处于迷雾，却又似乎一眼能望到头；但是准备写这篇文章，心里又平静了很多，也许是经过这一个多月的调研和自我教育，看到了生活的可能性和随机性，接受了与焦虑为伴这个事实。本文算是写给自己的心理按摩，文章可能会有点发散，祝开卷有益。</p><p><img data-src="https://wulc.me/imgs/fog.jpg" height="70%" width="70%"></p><span id="more"></span><h2 id="裁员危机与焦虑">裁员、危机与焦虑</h2><h3 id="裁员原因">裁员原因</h3><p>先说大厂裁员，大厂裁员本质上是在停止增长后的断臂求生；你会发现，首先裁员的部门基本是那些还没有实现盈利、具备较大不确定性的部门，而经济下行时，企业更多地会追求稳定性而放弃未来不确定的可能性；在这种前提下，往往会存在整条业务线被优化掉的情况，有时候哪怕你是一个高职级的员工、或者是应届生，也难逃被裁的结果</p><p>上面很关键的一个词是是“停止增长”，从微观层面的角度来看，停止增长指的是公司的DAU可能已经见顶，广告等收入也见顶，而能够带来新的现金流的业务还没出现；从宏观层面来看，则是<strong>整个互联网行业面临着没有新要素的困境</strong>(新要素指的是之前的移动互联网、移动支付)，目前很难去找到一个所谓风口，或者说蓝海。无人驾驶，元宇宙，web3等等，都还无法没看到变现的迹象，大厂基本的现金流还是传统的广告、游戏和电商</p><p>PS：其实这三年反复的疫情，各行各业都不好过，也并非只有互联网大厂在裁员，只是刚好这个人群在互联网上的声音比较大，裁员其实是从传统行业一直蔓延到互联网大厂的，因为疫情最先影响的就是实体的生意，然后才是互联网，实体生意都没了，还需要啥营销和广告呢</p><p>裁员现象其实跟资本二级市场里的一些现象有点类似，比如说裁员存在恐慌情绪的蔓延，大厂开始裁完了，中厂也会跟着裁；举个可能不是很恰当的例子，裁员就是公司看空未来的经济发展，跟二级市场大家看空某个股票疯狂抛售并无二样，且抛售的股票无人接盘</p><p>裁员另一个很重要的原因是人员冗余，因为在经济好、资本充足时，一切看起来欣欣向荣；在这个时候大厂招人并不理性，会疯狂招人，而且大的组织做很多事情都有惯性，招人会一直招到非常冗余，这个惯性就有点像钟摆效应，如同在大牛市顶端进去接盘的人们，大家都是怀揣着上证指数要上1 万点的心态进场的</p><p>疯狂招人背后，边际收益的递减是必然存在的，乱翻书在 54期播客聊到这个话题时(相关链接会放在最后)，里面有句话特别传神：“<strong>飞驰的火车上，每个人都觉得自己在开火车，其实大家都在车厢里做布朗运动</strong>”</p><p>所以，大家会发现裁员后，对公司业务的影响可能是很小的，工作业绩影响微乎其微，但是财报会立马更好看，其实这个也可以用二八法则来解释(最近越来越发现，几乎一切皆可二八法则)，这就好比在一个广告系统里，把那些无跑量素材或计划砍掉，你会看到对整个大盘的几乎是无损的，但是所谓的生态会好很多，但从另一个角度来看，这牺牲了长尾计划/素材的探索空间，回到公司上，则是牺牲了未来的可能性。</p><h3 id="裁员迹象">裁员迹象</h3><p>裁员一般会有什么迹象？在乱翻书的播客里提到了，裁员一般有 2 种情况</p><p>（1）中小公司，突然遭受资金上的问题，然后急于去控制成本，会迅速的在所有层面，包括连行政费用都会裁掉，比如说员工的福利等（2）大厂，经济性的裁员，提前预示到了未来会有什么风险，会有什么趋势的变化，前置的进行成本优化。整个成本结构被拉出来，人力成本的优化只是其中的一部分</p><p>定下了裁员目标后，会盘点业务，然后决定部门需要裁员的比例，这个时候可能会出现<strong>频繁的汇报</strong>，写PPT 描述你在做什么，产出了什么价值等</p><p>另外，裁员的决策往往没有一个很长周期的准备和测试，有时候就只是上面突然把这个指令传达到hr的一句话，然后立马开始了“约谈-&gt;赔偿-&gt;走人”等一系列流程；所以可能会出现前脚刚给五星，后脚就立马裁人；前面还在疯狂招人，后面就开始冻结hc 并开始优化</p><h3 id="被裁了怎么办">被裁了怎么办</h3><p>首先要对大环境有一个判断，就是自己所处的专业的人才<strong>供需情况</strong>，裁员初始阶段会存在大量的人不愿意激降身价的情况，趁着这个时候市场上的供给端还比较充足，需要从你有经验的这个细分领域里边找到一个比较优质的岗位迅速地嵌进去</p><p>说到底了还是供需关系，这也是为什么在知乎上相关的回答有很多建议，如果公司大趋势就是要裁员，且你所在的业务线有较大的风险,就争取做第一批被裁的</p><p>那怎么市面上的工作的好坏？基本上，只要业务能够有<strong>良好的现金流，业务看上去比较靠谱</strong>，这些岗位普遍就好。像那种还依靠着融资的钱生存，还没有正向现金流的业务，并且在你可预期的未来，都不太可能有稳定的现金流,这种预判非常考验个人的判断力，同时也有运气成分在里面。</p><p>比如说自动驾驶、新能源车这些它未来是趋势吗？一定是趋势，但是你不知道它什么时候能到那个节点。万一它是十年，而假如你在一个行业等十年，那这十年你是不是真的能积累下来一些经验？</p><h3 id="岁危机中年危机">35岁危机/中年危机</h3><p>为什么媒体一直把 35 岁锚定为中年危机的年龄？其实定 35这个坎是为了方便大众的认知和媒体的传播，真相是这个年龄段上下的都算是这个范围</p><p>而这个年龄段会有的一些共性：上有老下有小，需要照看的东西更多了，放到工作上的精力会更少，同时学习能力和学习意愿普遍的会偏弱化一些(尤其面对一些创新业务的时候)；当然，这是普遍意义，但不是绝对意义上的。因此，在面对一些经验价值没那么高的业务类型上，找一个年轻的更有冲劲的精力更充沛的，性价比会更高；而互联网又有多少经验价值高的业务呢？</p><p>说白了就是只要你不是不可替代的，找到了更便宜好用的螺丝钉，就会把老的生锈螺丝钉摘掉，这么说可能会比较残酷，但目前看来事实就是如此</p><p>如果说的更残酷一点，所谓的中年危机，就是钱不够，不够满足当前的需求和欲望，无法如预期水平地去照看你关注的那些人和事；面对收入的断崖式下跌，心理和生活上都难免会受到冲击</p><h3 id="被规训的大厂人">被规训的大厂人</h3><p>规训这个词，从播客里听到的时候就觉得非常的妙，一般来说每个厂都有自己的一些文化，入乡就要随俗，而很多人从毕业开始就在一个大厂环境里面，里里外外地被规训，他认识世界的方式和做事的方式全部是依赖这个大厂形成的规则，但他意识不到是被规训的</p><p>这种规训最大的问题在于，他<strong>内心的秩序和意义是来自于这个大厂的</strong>，你如果问他喜欢什么，做什么事情能沉浸有热忱，他突然会发现卡壳</p><p>这样的人一旦离开，要面对的问题还是挺多的，尤其是心理上的；有个很好的比喻就是“这就像在一个鱼缸里边圈养了50年的一个鲸鱼放归大海”，我们认为是自由，但是对他来说不是他认识世界的方式。这跟ze ran 在 “程序员的悲哀是什么” 这个问题写下的<ahref="https://www.zhihu.com/question/399148081/answer/1289671821">回答</a>：“大学毕业了很多年，还有种初入社会的疏离感”，感觉很相似</p><p><ahref="https://m.jellow.club/users/1c582789-2b28-4fc2-9712-ab3032e3dabe">戴某demo</a>在播客里更是一针见血的指出了这种现象的问题</p><blockquote><p>你在一个厂里边没有升到高管，又能做十几年，这本身代表着一些事情。其实那个脑子比较开放性的意愿比较多的，比较强的，普遍的会有很多想法，要么在大厂里边自己管一块业务，要么就蹦出来，可能成、可能不成，那是命运的问题；但是不会在一个大厂里面像做一辈子一样去做十几年，但是公司不开我，我可能做20年对吧，最终这个漏斗本身筛下来能做那么久的又不是高管的，是同一类人，<strong>相对追求确定性，安稳，开放性没那么足</strong>。专业上垂直，因为待得久，有一定的专业能力，但这个<strong>专业能力要依附于某个大平台</strong></p></blockquote><p>在所谓的大厂裁员和中年危机双重 debuff的加持下，焦虑自然是难免的了，我们不禁会问，我们能做什么？如果离开大厂，是否就能消解掉这两个debuff？</p><h2 id="不止一种叙事方式">不止一种叙事方式</h2><p>这部分不少案例来自<ahref="https://m.jellow.club/users/BB769515-C724-4652-8838-6AA32EC1A8DF">刘飞</a>的“<ahref="https://www.xiaoyuzhoufm.com/collection/episode/623afb37d79419001097242c">非大厂叙事</a>”系列播客，主要讲了生活更多的可能性，即除了在各个大厂反复横跳，或者是融资烧钱、做具备规模效应的创业以外，还存在的一些其他可能性，笼统地概括就是自己找到一个现金流比较好、不追求多大规模的生意，把眼前的事情做好，用内容支撑品牌，用播客里的话来说就是“浙商思维”。</p><p>而刘飞也提到了很多人不做这件事的原因，那就是信息差：“很多老同事老朋友他们非常缺乏安全感和有35岁焦虑，就是因为不知道。我觉得他们的能力他们的喜好想法其实挺适合做一些别的事情的，但是就是单纯不知道。因为他们看到的例子、我们在大厂里接触到例子，都是这种互联网大厂的玩法，和创业的拿融资烧钱创业的这种玩法，我觉得知道之后，可能真的是有很多可选的机会”</p><p>那为什么大家眼里只能看到那种高举高打的创业？因为接收到的信息有偏。我们看很多商业分析，或者是自媒体的文章，很容易产生一个错觉：就是你创业你做互联网只能做大，你不做行业第一，DAU上亿，你不做市值十亿一百亿，你就根本下不去这个手；久而久之，我们看到的创业成功的模式似乎都是那种具备规模效应的模式，我们以为创业只有这一种模式</p><p>与之相反的是，也有不少人从大厂出来，选择了一个自己比较清晰(就是他知道这个事情的商业逻辑是什么样)，然后同时又有一个比较好的现金流的事情，这就是一个比较好的生意；这个生意如果从互联网视角看，好像没那么性感，但是这个生意它会让你觉得好像更踏实一些，更有积累一些</p><p>而本质上，<strong>创业也是做生意，只不过创业打上了一个理想主义的标签</strong>，最后你追求的还是一个能不能转起来的生意，而不是说只是把DAU 烧起来，剩下的什么都不管了</p><p>下面主要摘录自刘飞在非大厂叙事里提到了几个小生意，里面有基于轻量级开发团队做的效率工具，小工具app，也有涉及实体的二手店和淘宝店，总之就是像我们展示了更多的可能性，这里引用刘飞的一段话</p><blockquote><p>之前我们做互联网很多时候做的，我理解它更多的是<strong>效率平台，效率平台做的很多事情都是撮合</strong>，都是我把供需匹配好。然后我在这个过程中有的是用人力，有的是用运营，有的是用算法把这个效率最大化。但是现在消费市场变化了之后，会有很多垂直的领域，小众的领域大家追求的是<strong>内容产品或者内容品牌</strong>，就这些是面向垂直的用户，小众群体。</p><p>就比如说某些是消费品，包括刚才我提到的像 flomo，你很难说 flomo它是一个可以对标备忘录、对标印象笔记、或者对标飞书的一个协作工具。它就是一个很小众的工具，它是做知识管理。<strong>它不是一个大众的产品，它有自己的用户群体，它自己的用户群体有非常好的复购率，这个用户群体有非常强的粘性，而且非常认同这个产品</strong>。就类似这样的产品，还有像那个多抓鱼，还有像那个三顿半，这些产品其实它们都是类似的这种属性的。就我有自己的目标用户垂直领域，然后它们有比较好的复购，然后我持续地深耕做这些用户</p></blockquote><p>下面的几个故事，会言简意赅地摘录一些笔者关注的重点，推荐去听一下原播客，也许每个人能听到的重点都不一样</p><h3 id="flomo">flomo</h3><p><a href="https://flomoapp.com/">flomo</a>是一个快速记录想法的笔记软件，创始人是<ahref="https://m.okjike.com/originalPosts/6256b4f58a498500101ba0e1">少楠</a>和<ahref="https://web.okjike.com/u/1D8ADFAD-5785-469A-903B-E2AB5B5426C4">Lightory</a>，与其他工具简单的说明书不同，flomo提供了一个 <a href="https://help.flomoapp.com/">flomo101</a>，详细的讲了这个工具背后所代表的理念，其实就是在通过内容讲一个品牌故事。</p><p>少楠在刘飞的三五环做客了非常多次，下面的一些内容也是两人的播客里聊到的,相关的一些播客链接也会放到最后</p><p><strong>为什么做 flomo</strong></p><p>少楠在提到离职创业时，辞去提供一大笔年薪的工作，的确会比较恐惧，尤其是上有老下有小的情况下;但是转念一想，如果这个事情等到 40多岁再来做，成本又会变得特别高；而相比于这个，在相当长的时间里都在用五年前或七年前的知识来解决问题让他更恐惧，因为这相当于他的知识体系不更新了，而他的知识是最值钱的东西</p><p>《<ahref="https://book.douban.com/subject/3025921/">黑天鹅</a>》这本书提到：“毒品，碳水化合物，月薪，是三种最有害的瘾”，<strong>月薪之所以有害，是因为无论做的好坏，月薪还是那么多，最多绩效会差一点;长期下来，会让人有一种麻痹感和错觉，就是我不用怎么努力，更新自己的知识体系，也能持续拿到这样的薪水</strong></p><p>虽然做 flomo后拿到的钱变少了，但播客里有个观点是这样的，就是“<strong>每一笔钱是不平等的</strong>”：大厂里拿到的钱，跟创业拿到的钱，即使是等额的，但是背后代表的东西是不一样的；大厂那笔钱的背后是你的交换出去的时间和价值；而创业那笔钱背后是你创造的资产，能够持续创造现金流；而如果按照创业公司PE 来算的话，从创业拿到的工资折算回去，资产的价值还是比较高的</p><p>但是，我觉得大厂积累下来的经验和履历也是一种资产，虽然大厂履历带来的光环越来越暗淡,需要警惕的是在边缘部门做一些边缘事情，积累不下任何经验</p><p><strong>焦虑</strong></p><p>收入焦虑，某种程度上也是知识焦虑，要多问下自己的知识资产是在消耗还是积累，有没有变现手段？比如说自己的知识体系是否已经非常老旧了，或者垂直性非常强，只有在某个领域或某个公司才适用</p><p><strong>做 flomo 的一些经验</strong></p><p>效率产品，背后都需要有一些被验证过有效的理念，且这些理念要传递给用户(通过内容创作构造出品牌)</p><p>用户增长，往往同时需要考虑 2个方面，一是<strong>讲好品牌故事</strong>(烧钱投广告增长不可持续)，二是<strong>做好投放渠道</strong>(内容渠道和广告渠道，酒香也怕巷子深)</p><p>虽然 ab实验是一种比较科学的决策方法，但是很多决策没法拿短期的数据来衡量，比如说把品牌种在更多的用户心里；打造品牌往往需要做一个长期贪婪的事情，少楠做这件事的方式就是写很多文章和内容，教用户怎么使用，甚至是改变思维方式</p><h3 id="谜底科技">谜底科技</h3><p>开发 flomo 的是一个轻量级的团队(初期只有 2个人，现在应该也是个位数)，而<ahref="https://www.miidii.tech/">谜底科技</a>则是另一个这样的团队，创始人之一<ahref="https://m.okjike.com/users/7A97B0F5-9674-4DD7-82AD-43E7C62B975A">61</a>在很早就看到了很多国外的的独立开发者：一个设计师，一个开发去搭档，很多Mac/IOS 上优秀的 App 其实都是这样一个人或两个人的作品,那时候心里的目标就是成为一个这样的团队</p><p>一直想做一个中国版的 product hunt，但是效果一直不达预期；反倒是一些site project，在数据上的表现很不错，改变了 61 只想做 big的想法，更专注在一些 small but effective的东西上；这个过程的关键是<strong>看数据，数据是不会骗人的，所以这个过程一定要有一套评估的系统，能直观看到数据</strong></p><p>两个小工具类产品，offscreen 和谜底时钟，都是打磨了一年后，随着 IOS上线带来的小组件特性而火了起来，具有一定的运气成分，但同时也是为这次运气做了一年的默默耕耘后，才能在机会来的时候快速抓住</p><p>小团队做增长的一些路径：找到各种媒体上的 KOL，如果东西是好的，KOL也是会愿意去推荐的（follower会喜欢），同时海外市场也是一个有潜力的市场；提到了增长，在这一期的播客里也cue到了少楠之前的一些感悟：<strong>第一次创业关注的是体验，第二次创业关注的是增长</strong></p><p>flomo和谜底科技的几款产品都有一个共同特点，就是<strong>为了控制成本，不会把事情搞得很复杂，无论是团队规模或者是产品功能</strong>；谜底科技的App基本都没有服务端，选型目的是想让团队比较轻量级，<strong>重运营和重服务端的都不做</strong>；即使不做这些，依然可以挑出很多有商业价值、有前景的项目，写这篇文章也发现谜底科技的另一款小工具谜底黑胶又在app store 登顶了</p><p>所以，不要特别瞧不起小的东西，不一定就要做一个特别大的公司，<strong>比较好地解决垂直领域的一个问题，也只很值得去做的</strong>，比如说小宇宙；古典产品也许在慢慢回归</p><h3 id="山茶子">山茶子</h3><p>上面两个案例都是偏互联网工具类的产品，后面的两个例子则是涉及到了实体类的小生意。山茶子是<ahref="https://m.jellow.club/users/835b6850-ccf8-4f02-b6d5-74666d4d5047">牙刷味</a>做的一个茶叶小品牌，在这一期能够看到牙刷味一个人怎么把整个茶叶品牌搭起来，以及除了打工和创业以之外的第三条路</p><p>在牙刷味<strong>持续工作过程中，也在持续地想自己想要做什么，工作只是单纯地为了生活</strong>；决定做做茶叶时，开始做的时候也没有想得很清楚；因为有时候如果充分调研，可能就不会去做了，会觉得这个事情太大了。</p><p>与前面的提到的两个互联网产品不同，互联网产品的边际成本基本为0，但是涉及到实体的生意还是存在实打实的原材料成本的，因此也需要考虑供应链，以这个茶叶生意为例，基本的供应链就是，<strong>茶叶原料-&gt; 代加工 -&gt; 包装 -&gt; 推广 -&gt; 发货</strong></p><p>具体搭建茶叶品牌的流程就是先去做了竞品调研，买了市场上这个领域所有的产品，只要相同价格下品质做的更好就可以，但是利润空间会更小；原材料在杭州龙井茶村找，代加工厂在1688上找，但是前期规模小，不一定能找到很好的工厂；这一系列事情其实牵涉了在播客里反复被提及的浙商思维：<strong>先去做眼前的事情，尝试把眼前的事情做好</strong></p><p>虽然如此，实际中也存在很多不充分调研，考虑不周全而倒下的创业者，只是大家没有看到，这里面感觉还是有一定的运气成分</p><p>这里有一个理念跟前面的两个案例很相似，那就是也<strong>不会一开始就考虑很大的团队，除非招一个人能赚出他自己的工资</strong></p><p>做生意不像在公司，这家不行就换下一家，但是在公司不行，对接的研发/产品不行，很难换一个</p><p>谈到了更多可能性，<strong>警惕自己给自己贴标签，如果因为你比较成功地做过一些事情，其他人给你贴上了你擅长这件事的标签，不要误认为自己只能做这件事，需要接触和尝试，不一定每种可能性都要尝试，但是要从接触开始</strong></p><p>环境对人的影响是很大的，<strong>人的生活状态，价值观和叙事方式都是由环境塑</strong>造的，在环境里很容易被周围的人影响,举了一个比较极端的例子：比如说这公司都快倒了。但是只要这公司里比如说公司租的楼够好，公司里面的员工大家每天还是按时上班，甚至还在加班。还是比较有昂扬斗志的。开会大家还是在argue 加在这争来争去的。那你就会觉得这个公司好像没啥问题</p><p>最后，还提到了一种很有趣生活态度：<strong>把生活当做游戏，自己是主角，其他人都是NPC</strong>；不同 NPC可能会给你带来不同的线索，体验不同的支线任务；但是<strong>能奖励你的那个事情才是主线，找到能给你正反馈的主线和NPC</strong></p><h3 id="多抓鱼">多抓鱼</h3><p><ahref="https://www.duozhuayu.com/book">多抓鱼</a>是一家二手书店，创始人之一<ahref="https://m.okjike.com/users/86891A68-1D76-4291-B317-83EF8BBE804F">猫助</a>在三五环也做客过，里面聊到创办多抓鱼的经历以及多抓鱼的一些基本模式</p><p>猫助最早想开二手店，可以追溯到大学的时候；当时没有去大厂，而是去了刚成立的知乎，因为<strong>觉得去了创业公司，至少能看到一个企业是怎么做起来的，将来就可以去做自己的企业了</strong></p><p>最早多抓鱼的 MVP版本是：“我们找了一些可能有意愿卖二手书的朋友，然后说如果你想卖书你就@群主，群主会给你约快递，最后群主会单独把钱打给你。群主收到书之后会把书名写在Excel表上面，然后再发到群里说，我们今天上新了，快来挑挑都有什么你喜欢的书。这就是最早的多抓鱼”</p><p>选择实体店 or线上？当前多抓鱼两个模式都有，实体店偏本地，租金贵但没有邮费，退货率也非常低，就基本没有退货了；线上是全国的匹配，调用了物流；非标的东西(没有明确规格和型号的商品)只在线下售卖，但是偏标准品的东西还是说偏线上全国消化(当前主要是书，衣服和小数码)</p><p>世界上很多很多的生存方式和路径，不要只看到一种路径：从 p4到p6，p6到p8</p><p>c2b2c(多抓鱼)相比于c2c(闲鱼),能够<strong>提高卖家的效率，保证买家的质量</strong>，而这两个原因也是猫助选择了多抓鱼现有的模式</p><p>在多抓鱼，没有什么纯粹的管理工作，上到 CEO下到一个实习生，全都是要搬砖的</p><p>跳出社会预期：老耿(70后)以前是豆瓣的 VP,对自己的预期特别低，而他就活的状态像个少年，什么事情都能做；其实也是我们常说的ego 小的一种体现</p><h2 id="围城外的巨人">围城外的巨人</h2><p>现实中，很多事情都是一座围城，城外的人想进去，城里的人想出去</p><p>如果说大厂是一座围城，那上面都是围城里的人出去并且活得还不错的故事，但是城外都是毫无风险的吗？围城外是否会存在让人回想起被支配的恐惧的“巨人”？</p><p>当然存在，上面看到的都是成功的或者说目前公司还存在的案例，必然存在一个幸存者偏差，死掉的项目是没人关注的。而看到很多成功项目时，我们很容易幻想：这些事情自己好像也有能力做，做成也不难，却忽略了媒体报导的偏差性、人和人的差异性，以及生活的随机性，很容易会因为当前手上或烦人或无聊工作，而脑子一热冲出围城，然后就会面临着现实生活这个“巨人”的一顿毒打</p><p>在三五环的一期播客里也提到了这一现象：很多大厂离职出去的员工会面临着“返贫”的现象，原因是不懂得打理资产；资产最终会回流到会管理他们的人身上；而<strong>打理资产的能力，无论是上学或者上班，都没有人教我们；上学是在学教科书里的知识，上班更多学习的是专业能力和管理能力</strong></p><p>什么是打理资产的能力？无论是投资金融类资产，投资其他人的项目，还是创业做个小生意，大致含义就是能够看到完整的商业逻辑，看到钱从哪里来,怎么保证现金流</p><p>对于普通人来说，要<strong>意识到自己在公司学习到的能力的局限性</strong>，绝大部分人都是一个可弃用的螺丝钉，对于全貌未必看得比较准确；哪怕看到了全貌，历史经验也是具备局限性的，因为很多事情会受到经济周期的影响，在经济上行时总结的经验，未必就适用于所有的时期</p><p>我们常常说，大学是一座象牙塔；其实大厂也算是一座象牙塔(尤其是离一线销售岗位较远的岗位)，大部分人工作中每天接触到的清一色的都是相同的人和事，不需要关注公司的现金流情况(大多数情况也没有这样的机会)，只知道广告能有收入，却不知道广告里的每个细分行业的生意是如何运转的，广告主为什么愿意花钱投广告；只知道商家的roi&gt;1看起来好像就是正的，却不知道刨除商品、人工、场地、营销等成本，可能就是个赔钱生意；这些东西，围城里没有人会教我们。</p><p>即刻上<ahref="https://m.jellow.club/users/855232d3-0779-4cef-8e25-e56288d4cf1c">刘玮冬</a>发的不少动态，能更真实地反映出一个普通生意人在实际创业时面临的问题和烦恼，能让我们更清楚看到城外巨人的狰狞面目。其中提到的一个<ahref="https://m.okjike.com/originalPosts/62d26811917bdd85e7e03e88?s=eyJ1IjoiNWM1YmZiMmU3ZjYyNTEwMDE1MTk2Mzk3IiwiZCI6MX0=&amp;utm_source=wechat_session">现象</a>，也是很多从大厂出去创业的人面临的典型问题：<strong>想通过互联网思维去改变一切，却发现成本控制不了，现金流转不起来</strong>;其实互联网改造传统行业并没有那么容易</p><blockquote><p>做电商这几年，也见过很多“精英人士”入局做电商，可能是我段位不行，接触的都是精英人士做电商失败或者被毒打的案例。这些失败案例的步骤也比较一致</p><p>第一步：精英人士泛指：名牌大学海龟精英/互联网大厂精英/外企500强白领精英/有钱的用过好东西的富二代/有点审美天赋的艺术精英第二步：锚定一个品类，可能是宠物/护肤/美妆/服装/电子产品/运动/食品/母婴产品等等</p><p>第三步：做这些品类的产品调研，用了该品类TOP10的产品之后，发出各种吐槽：这是人吃的么？人用的么？质量那么差？这么丑的衣服是人穿的么？狗都不会用的东西........</p><p>第四步：由此认为该品类机会大有可为，认为自己进去一定能颠覆品类，成为该品类第一，并且认为自己将是国货崛起的代言人，自己有着巨大的使命，一定要让中国人都用上好东西</p><p>第五步：自诩为乔布斯化身，开始非常极致的产品开发，选最好的材料/面料/食材，各个环节都用最好的工艺，各种版本，包材，样本打了几十个版本，一次又一次推翻，跑遍了全国各种代工厂</p><p>第六步：在产品设计上罗永浩附体，字体大小，颜色，VI，排版，行间距，字间距，深浅调了几十版，学习张小龙，每一个像素都抠的非常细</p><p>第七步：半年或一年后，产品正式上线，由于产品各种选取最优质的材料，那个成本也高出天际，然后那个产品售价超出主流市场价格带一大截。</p><p>第八步：产品好是好，但因为太贵，老百姓买不起，所以销量寥寥无几，非常讽刺，目标是希望国人用上好东西，但结果国人用不起。</p><p>第九步：东西太贵，只能抓精准富裕中产精英群体，但又没有特别渠道，手段，抓不到这群用户，花钱做了很多广告，转化率极差。</p><p>第十步：找各个主播，渠道去推，主播渠道都表示东西很好，但太贵了，推不动，能不能售价降50%，咬咬牙同意了，爆了几波销量后发现卖一个亏一个，别人都说你家直播卖了好多钱，只有你知道，算上税，退货，邮费，主播分成，产品成本，你甚至还赔钱。</p><p>第十一步：销量上不去，也没法融资，公司财务开始恶化，资金不断消耗，推广费用捉襟见肘，没钱开发二代，三代产品，开始各种暴躁，骂员工，员工合伙人纷纷离职</p><p>第十二步：库存堆成山，卖不出去，各种供应商找上门来，找家里要钱/拿出工资储蓄/卖了房子之后终于把欠债还完了。</p><p>第十三步：出来逢人就总结，自己的产品非常优秀，非常好，可惜中国老百姓不识货啊！</p></blockquote><h2 id="接受焦虑享受随机性">接受焦虑，享受随机性</h2><p>读到这里，你会发现，长期呆在大厂里会里里外外被规训，也面临着所谓的中年危机；出去外面，面对着的是更加复杂的人和事，看到的都是成功的案例，具备较强的随机性和不可复制性，真正去做的时候可能一不小心就返贫，把过去十多年的积累一次清空。那我们能怎么办，似乎没有一个一劳永逸的方法？</p><p>是的，生活本来就没有一个一劳永逸的答案。在大厂可能会被裁员，难道开公司当老板，就会永远盈利不倒闭么？我们看到上面的还算成功的非大厂的各种叙事，能活多长时间，可能连创始人也没法告诉你。生活本来就是混沌的，充满随机性的，无法预测的，过分追求安稳与确定性，有时候会很痛苦。</p><p>《<ahref="https://wulc.me/2015/11/20/%E6%88%91%E4%BB%AC%E8%BF%99%E4%B8%80%E4%BB%A3%E4%BA%BA%E7%9A%84%E5%9B%B0%E6%83%91/">我们这一代人的困惑</a>》是这么说的</p><blockquote><p>仔细想想，我们的一生好像都是在实现目标中挣扎着度过的。上初中的时候，老师告诉你，中考的淘汰率是最高的，只要闯过去，上了高中一切就好了。但上了高中的时候发现不是那么回事嘛，高中老师又说了啊，考上大学就进了天堂。于是你考上了大学，依然空虚迷茫各种草样年华，父母老师又告诉你，找到工作就好了。工作之后发现烦恼和忧虑依然都在，女朋友给你看马云的故事，告诉你等你事业有成就好了……</p><p>你发现了吗，其实人这一辈子的每一个阶段都有新的痛苦和顾虑，周而复始，生生不息。绝对不会因为你考上大学，事业有成，迎娶了女神就从此happily everafter。但每一个阶段也有每一个阶段的快乐，无法替代。生活不是安徒生童话也不是好莱坞电影，从出生的那一刻起直到生命的尽头，都不存在什么节点，过去了之后一切幸福美满无忧无虑。</p></blockquote><p>接受人这一生都要与焦虑为伴的事实，不要与焦虑对抗、尝试解决或者抹除焦虑，也许会是更自然与平和的状态，因为<strong>what you resistpersists</strong>，往往越抵抗，反噬可能会越严重；所以需要<strong>学会接受焦虑，学会与焦虑相处</strong>，因为很多事情，你接受了，就不会痛苦，或者说有了预期，当事情发生时就不会那么痛苦（人的快乐和痛苦往往都是来源于发生了预期以外的事情）</p><p>但接受焦虑，并不意味着要躺平，因为<strong>焦虑往往就是有一些需要做的事情但是没有做，那件事在你的心底大声地发出嘲讽，让你愈发恐慌</strong>；所以往往什么都不做，会让你更加焦虑，因此焦虑时合理的手段也几乎只有一种：<strong>进一步做好你当前的事（工作、学习），并选择一个“至少不是错的”的方向去努力</strong></p><p>对于还在大厂的人，就是好好把手上的事情做好，提升自己的能力；至于升职这类事情，能力和运气都是必要条件，我们无法左右运气，但至少在能力上，我们还是具备主观能动性的</p><p>而在本职工作以外，又有什么是值得我们去追求的呢？</p><h3 id="找到内生的信念">找到内生的信念</h3><p>无论是继续留在大厂或者是决定是否从大厂离开，都要想清楚，自己是为了什么去做这个事情的，或者说要找到内生的信念</p><p>内生的信念，指的是你真的有你想要去做的事情；这种情况下，无论你是辞职还是创业，无论结果是好还是坏，普遍感知上会更好一些；因为这种情况下<strong>收到的正向的反馈是大于你获得的外在工资</strong>的。这个正反馈可以是你在外面做内容做得好，受到读者的好评；也可以是你在外面做一个品牌，你感受的一些成就感等等</p><p>如果说你还没有找到这些东西，只在对比工作的状态和收到的工资的话，那确实在大厂整体肯定还是对比起来更舒适的，因为从大厂那种有一定的基建保障的环境中出来之后，会面对一个更混沌的外部系统，它资源整合调度做事的难度其实并没有比之前降低，只是对体感上你的好像自由决策，没人能管得了</p><p>反之，如果没找到自己喜欢做的事情，被外部诱惑从某个大厂离开的人，经常会有落差，最后的情况都不会那么好</p><p>因为如果你是被诱惑出来的，可能是觉得现在工作特别不开心，特别累，出来可能更开心一点；或者说外面有一个机会，这个机会给你承诺的很多，但是你没有看到这个风险。这种情况出来的话，很容易就会感觉到心力支撑不住，因为没有原来这种确定性和安全感了，在外面自己又没有特别想做的事情，那就确实会比较痛苦；所以有很多人就回去了，但是也有很多人回不去了</p><h3 id="差异化竞争">差异化竞争</h3><p>很多情况下，我们应该摆脱竞争，竞争就必然会内卷，<strong>只要你跟别人做一样的事情，就一定会产生这种消耗性的竞争</strong>。你要想办法为自己找到一个差异的点，然后去做跟别人不一样的事情。我们常说的“找到自己的那条赛道，在那条赛道上我们就是第一”，其实也是这么一回事</p><p>如何找到自己的赛道？对不起，这也没有一个明确的答案，但是比较明确的是，<strong>我们需要看到更多的可能性，收集足够全的信息，然后自己做判断，而不是直接收集的是别人的结论</strong>，因为个人的差异性和生活的随机性决定了适合每个人的赛道是不一样的</p><p>工作之余，可以尽量多地做低成本的尝试，万一哪个尝试成了，就可以比较从容地应对所谓的裁员和中年危机；以戴某demo为例，之前在业余做投资的事情，做顾问的事情已经做了好多年了，在离开公司的时候其实并不是一个很突兀的要转型，而是一个很自然的过程</p><p>对于更多的人来说，可行的方案之一，也许是<strong>真诚的有品质的表达</strong>，因为这是一个高效的社交活动。当你把你的思考放出来去寻求回应的时候，很多看到并与你共频的人会给你那个回响(念念不忘，必有回响),这比你挨个自己去找人这容易的太多了，而这些表达说不定会给你吸引来更多的可能性和机会；所以我一直认为有品质的写作、播客、视频等，都是一个高效的社交</p><h3 id="把自己当做资产">把自己当做资产</h3><p>这里其实是套用了孟岩写的文章的标题：<ahref="https://zhuanlan.zhihu.com/p/511430949">把自己当作资产</a>，里面提到了比较核心的一个概念：人力资本，简单来说，就是把人当做资产，这个资产未来会不断释放现金流；这一点在作客组织进化论的播客中也有提及</p><blockquote><p>我们把人力资本释放的现金流，不断通过金融市场，转换为金融资本。随着时间的流逝，我们的金融投资获得不错的回报，金融资本也慢慢增长成为我们总财富的主要部分。</p><p>年轻时，尽管我们完全没有意识到，我们可能远比自己想象的有钱。只是在这个时候，财富更多以人力资本的形式存在。</p><p>因为拥有相对安全的人力资本资产，这就意味着年轻人可以比年长者把更多的金融资产投资于更高风险的资产，比如股票，甚至可以包括少量的杠杆和债务。原因很简单，这时候的损失，无论是5 % 还是30%，尽管当下看起来很多，但在我们总资产（包含人力资本）的盘子里，实在微不足道。</p></blockquote><p>在谈工作的时候，大家很容易会把着眼点放在收入上，这无可厚非。但它带来的副作用是你过于集中在这个点上，你就会忽略你整个职业生涯里，真正应该积累的可能是<strong>视野、知识能力、品格、人脉、口碑</strong>等。你如果真正真是并积累它，钱会找到你</p><p>另外，无论你所在的企业如何，都要记住，企业愿意聘用你，他们花钱购买的是你的专业能力，这是一切的前提；而你把着眼点反过来放在那个纯收益上，有可能忽视了真正要积累的东西，反而不一定会有一个很好的结果，因为这样下来竞争力可能会越来越低，同时有可能失去了你自己的自我认同</p><p>很多大厂里的员工，其实并没有在大厂里边真正<strong>把自己当成一个产品或者一个资产去创造什么东西</strong>，更多的是把焦点盯在工资和收益上，但把焦点盯在你的经济收益和盯在创造上，你的过程和结果可能都会不一样，尤其是你的体感。而飞书建议大家写的<ahref="https://www.feishu.cn/hc/zh-CN/articles/360048137813">个人使用说明书</a>，本质上也是在建议大家把自己当做一个产品或者说资产，这里我觉得可以用《<ahref="https://www.navalmanack.com/">The Almanack ofNaval</a>》里的一句话经常反问自己</p><blockquote><p>Am I productizing it? Am I scaling it? Am I scaling with labor orwith capital or with code or with media?</p></blockquote><h3 id="享受随机性">享受随机性</h3><p>放眼互联网公司的发展或者个人的成长，我们会发现，一个绕不多去的话题就是运气，或者说生活的随机性；什么“我的成功你也能复制”，都是在扯犊子，忽略了时代的不同和生活的随机性</p><p>我们生活中遇到的事情基本可以分为三类，第一类基本由能力决定，比如说考试；第二类纯粹由随机性决定，比如布朗运动；第三类，也是我们最常遇到的，由能力和随机性共同决定，比如创业、投资、恋爱或是梦想。</p><p>我们最大的问题是，面临生活中大部分的事情时，往往会自动地归为第一类，而忽略了随机性对结果的影响。大到互联网的发展，小到一个个体去选择自己的职业生涯，其实很多都是随机性决定的；<strong>有的时候我们事后因为人性的原因，各喜欢各种归因，总是在这找原因，其实没啥可归纳的，也没什么指导意义，因为时代在变，大环境在变</strong></p><p>当你意识到世界很多事情都有随机性，甚至是被随机性主导的；当你深知这件事情的随机性也许永远不会青睐你，你是选择继续坚持下去，还是选择躺平呢？</p><p>而一个人最宝贵的财富，也许就是在做一件事情时，能够清楚地意识到随机性和运气在其中的占比，并心平气和地接受这个事实</p><p>需要意识到的另一个事实是：随机性会带来坏的事情，但也可能会带来好的事情，而在我们努力没达到一定程度前，我们连面对好的随机性的资格都没有，也可能会随时被坏运气冲垮；这也意味着需要做好2 个准备</p><p><strong>（1）抓住好运气的能力</strong><strong>（2）对冲坏运气带来的风险</strong></p><p>抓住好运气的能力，意味着我们要不断地提高自己的各项能力，即使现阶段不能给你带来即刻的回报；比如说现在要提拔你，你觉得你的管理能力是否能够hold住现有的团队？你的专业能力是否能带领整个团队攻克当前遇到的问题？比如说web3现在如火如荼，这里面是否真的有好的项目，你是否有能力去分辨其中各个项目的价值，而不是去当绿油油的韭菜？</p><p>对冲坏运气的能力，意味着我们要能够尽量识别出未来可能发生的风险，比如说工作上的风险，身体健康的风险，经济上的风险等发生时，你有做好兜底的方案吗？</p><p>面对随机性，有时候会让人绝望，因为即使你做了准备，对最终的结果可能也是毫无意义的；但面对随机性，我们唯一能做的也是好好地<strong>活在当下</strong>(虽然被说烂了，但的确是真理)，放下一些不必要的执念和无意义的比较，与身边的人愉快相处，认真安排好每一天的活动，用心去感受每一天的心境</p><p>因为一直瞻前顾后，容易陷入对过去的后悔和对未来的担忧中，这种焦虑带来的是所有非工作状态的生活都被填满；尤其当你做的是一个寻求机会的事情时，准确地规划是很难的，当你试图用理性来假设和分析时，很多时候回过头再看，这些假设跟真实的差异会很大，但这样的分析往往会令人陷入悲观主义，因为往往假设会越做越谨慎，似乎一定要万无一失才能开始行动</p><p><strong>既然随机性不可避免，而过分追求确定性可能会让我们瞻前顾后、步步惊心，还不如学着接受并享受生活的随机性；既然预定要飞向意大利的航班，最终有可能让你降落在荷兰，还不如好好享受荷兰的风光，对自己说一句：<ahref="https://zhuanlan.zhihu.com/p/435160088">欢迎来到荷兰</a></strong></p><p>最后，借用《<ahref="https://book.douban.com/subject/5366382/">夜航西飞</a>》里的一段话来回答开头的问题，虽然前方的35 岁路口被迷雾遮挡，但是相信走进去，就会云开雾散~</p><blockquote><p>我学会了如果你必须离开一个地方，一个你曾经住过、爱过、深埋着你所有过往的地方，无论以何种方式离开，都不要慢慢离开，要尽你所能决绝地离开，永远不要回头，也永远不要相信过去的时光才是更好的，因为它们已经消亡。过去的岁月看来安全无害，被轻易跨越，而未来藏在迷雾之中，隔着距离，叫人看来胆怯。但当你踏足其中，就会云开雾散。我学会了这一点，但就像所有人一样，待到学会，为时太晚</p></blockquote><hr /><p>文中相关的一些播客</p><ul><li><ahref="https://www.xiaoyuzhoufm.com/episode/6267c0d7bf39836fd02b7718">大厂裁员的原因、方案和连锁反应</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/629c936ad02ea2b34ca8868e">离开大厂的中年人，何去何从</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/60f51c310023d1e387ddac77">跟少楠聊聊大厂和创业，以及如今的独立开发者生活</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/61af575182cdf82712002fb7">跟少楠聊聊做flomo 的新体会，以及什么是 indie</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/61f0165d21c23a45ed5d65e5">跟61 聊聊他曲折又坦然的创业故事</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/619e0da61adca419b5f8f2a5">跟牙刷味聊聊打工和创业之外的第三条路</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/5f15bf9b6d76607427c80341">跟多抓鱼的猫助聊聊二手生意和创业态度</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/6268efd6bf39836fd02b778a">跟浩翔聊聊离开大厂的「返贫」现象和背后的思考</a></li><li><ahref="https://afdian.net/p/a270675253ac11eb90c452540025c377">识别运气，并享受生活的随机性</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/61b87b96c308e3900b9bdc02">愿我们都做一条脱钩的鱼</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/628d64070e30c626186839c2">孟岩：最好的投资，是投资自己</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;35
岁这个槛，似乎是悬在互联网人头上的达摩克利斯之剑，一直在各大媒体上被鼓吹放大，虽不明真假，但也让人不寒而栗；而持续了三年的疫情加上
2022 随之而来互联网裁员潮，王兴那句开玩笑似的 “2019
可能会是过去十年里最差的一年，但却是未来十年里最好的一年”
似乎一语成谶。&lt;/p&gt;
&lt;p&gt;走在奔三的路上，凝望这前面那个迷雾般的 35
岁路口，焦虑就一直萦绕在心头；伴随着的是一系列的疑问：大厂为什么要裁员？所谓的
35 岁危机从何而来？只有互联网才有这个危机么？普通人只能眼巴巴地等待着 35
岁到来然后被裁掉？我们能做些什么？&lt;/p&gt;
&lt;p&gt;当我最开始问出自己这一串问题时，焦虑中带着点绝望，因为前方的路虽然处于迷雾，却又似乎一眼能望到头；但是准备写这篇文章，心里又平静了很多，也许是经过这一个多月的调研和自我教育，看到了生活的可能性和随机性，接受了与焦虑为伴这个事实。本文算是写给自己的心理按摩，文章可能会有点发散，祝开卷有益。&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&quot;https://wulc.me/imgs/fog.jpg&quot; height=&quot;70%&quot; width=&quot;70%&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="闲话几句" scheme="https://wulc.me/categories/%E9%97%B2%E8%AF%9D%E5%87%A0%E5%8F%A5/"/>
    
    
    <category term="闲话几句" scheme="https://wulc.me/tags/%E9%97%B2%E8%AF%9D%E5%87%A0%E5%8F%A5/"/>
    
  </entry>
  
  <entry>
    <title>投资这件事(3)-买与卖</title>
    <link href="https://wulc.me/2022/07/02/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B(3)-%E4%B9%B0%E4%B8%8E%E5%8D%96/"/>
    <id>https://wulc.me/2022/07/02/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B(3)-%E4%B9%B0%E4%B8%8E%E5%8D%96/</id>
    <published>2022-07-02T08:51:23.000Z</published>
    <updated>2023-07-16T15:28:28.080Z</updated>
    
    <content type="html"><![CDATA[<p>从年初了解 <a href="https://youzhiyouxing.cn/materials">有知有行</a>开始，断断续续看了不少上面的内容: 听完了里面投资第一课, E大干货合集、投资知识体系里的文章也基本是已读状态，一直处于输入的状态;感觉是时候该 connect the dots，形成一个更系统的框架融入自己的知识体系中,于是便有了这个系列的文章</p><p>这个系列的文章绝大部分内容来自于有知有行，也会有一些笔者深究后调研的内容，且按照笔者的理解划分为：认知与心态、概念与常识、买与卖三大模块。妄图将投资这个大话题以及有知有行的编辑们整理的上百篇文章浓缩到这篇小小的笔记中，自然无法面面俱到，所以这篇文章还是会挑选笔者关注的一些内容，更详细的内容可参考有知有行以及本文里的相关引用。</p><p>本文是买与卖部分，也是实操部分；投资赚取的收益本质上就四个字：<strong>低买高卖</strong>，虽然只有四个字，但是如果要做好这个事情非常难，本文试图为这个没有标准答案的问题寻找一些可参考的解。</p><p>这个系列前面两部分的内容可参考</p><ul><li>《<ahref="https://wulc.me/2022/05/04/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%281%29-%E8%AE%A4%E7%9F%A5%E4%B8%8E%E5%BF%83%E6%80%81/">投资这件事(1)-认知与心态</a>》</li><li>《<ahref="https://wulc.me/2022/06/18/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%282%29-%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%B8%B8%E8%AF%86/">投资这件事(2)-概念与常识</a>》</li></ul><span id="more"></span><p>如果将“低买高卖”进一步拆解，我们能够进一步拆成以下几个直观问题</p><ul><li>买什么</li><li>什么时候买, 买多少</li><li>什么时候卖, 卖多少</li></ul><p>而这几个问题又涉及到实操中常说的资产配置、仓位控制、估值等实操部分，下面会详细介绍这几部分，并在最后尝试回答上面几个问题。</p><h2 id="资产配置">资产配置</h2><p>资产配置本质上就是在做分配，即把我们需要投资的金额分配到各种投资标的上，具体的投资标的在上一篇文章《投资这件事(2)-概念与常识》中已经提到了，基本就是：股票(A股、美股、港股)、债券(利率债、信用债)、黄金、大宗商品、现金等；每个大类里还可以细分，比如A股可以分成大盘小盘，再加上消费医药这样的长牛指数，美股可以分大盘小盘，美国医药美国消费，美国房地产。在E 大其主导的长赢计划中，把其投资的标的细分如下</p><p><img data-src="https://wulc.me/imgs/ETF_150.png" height="50%" width="50%"></p><p>上图从内开始第二圈的类别，分别是：<strong>A股、货币、债券、海外新兴市场股票、海外成熟市场股票、商品</strong>。</p><p>第三圈更加细分，在以上大类中，再次细分为：<strong>A股价值股、A股大盘股、A股中小盘股、A股行业股、国内债券、海外债券、港股、海外互联、欧洲、美国、原油、黄金</strong>。</p><p>这就是资产配置，关键在于<strong>区分大类，配置比例</strong></p><p>资产配置的一个重点是资产相关性，即需要<strong>将资产分配到相关性低的品种</strong></p><p>在《<ahref="https://youzhiyouxing.cn/materials/706">详解家庭资产配置</a>》中，有一张资产相关性的参考图，表里的数字表示资产之间的相关性，相关系数的计算方法比较多，笔者猜测这里是使用了<ahref="https://zh.wikipedia.org/wiki/%E7%9A%AE%E5%B0%94%E9%80%8A%E7%A7%AF%E7%9F%A9%E7%9B%B8%E5%85%B3%E7%B3%BB%E6%95%B0">皮尔逊相关系数</a>，取值在-1 和 1 之间，表示从负相关到正相关，绝对值越大，相关性越强</p><p><img data-src="https://wulc.me/imgs/property_relation.png" height="70%" width="70%"></p><p>文章的的观点是把资金分散到相关性很低的品种中，这样当某个品种表现不佳时，另一个品种可以将我们的收益率保持在不差的水平，其实就是风险分散</p><p>文章里以上证 50 和中证 500 的相关性作为例子，说明了要同时持有大小盘这2 种类型的资产</p><blockquote><p>在某些时段，大、小盘股票会表现出不同力度的上涨，这种上涨是很难预期的。所以，<strong>最佳策略是同时持有大、小盘，动态平衡。谁涨得多就卖一些，买入涨得少的</strong>。在熊市初期与中期，尽量多持有大盘股指数。跌幅会比小盘股指数小很多。在估值回归到正常情况下，开始加大力度加仓小盘股。未来这部分投资的弹性会远大于大盘股。</p></blockquote><p>那 A 股的大、小盘具体有哪些选择？《<ahref="https://youzhiyouxing.cn/materials/706">相关性与资产配置（4）</a>》里指出，大的选50 和 300，小的选 500 和创业。另外，还提到了行业指数是否需要考虑</p><blockquote><p>我个人认为，做为宽基指数的补充，<strong>行业指数非常有必要配置</strong>。尤其是一些长期必然走牛的行业。这些行业的持有，应该比宽基指数更加坚定。<strong>不到出奇高估的时候，绝不卖出,宁愿做过山车也要持有</strong>。当然，可以用我们的策略平滑收益。比如目标市值。</p><p>当然，<strong>行业指数配置的比例要低于宽基</strong>。可以考虑的是医药、消费大类下的细分指数，或者干脆就是医药和消费指数。信息指数与创业板指数走势相关性0.99，确实没有必要重复配置。</p><p>另外像养老、环保这样非基础性行业，偏向概念性的指数，也可以在特定时间段配置</p></blockquote><p>这样，未来路线图已经清晰：50、300、500、创业、医药、消费。当然，你如果就选其中的几个也没有任何问题,比如你觉得就买50、500，或者 300、创业，都没有问题;关键在于，<strong>一定要大小搭配</strong></p><p>上面是 16 年的结论，而在 21 年，《<ahref="https://youzhiyouxing.cn/materials/706">详解家庭资产配置</a>》针对资产相关性的结论进化成了：<strong>相关性分析更多的应该是作用于大类资产配置，如股（国内外）、债、金、油等。具体到每一个小类品种配置，相关性分析的意义则小了很多</strong>。因为A股市场很多时候是齐涨共跌，只是每个品种涨跌幅度不同，这样就无法由相关性分析来体现差异性</p><p>另外，上面讲的基本上都是长期投资中的资产配置，而在有知有行中，则把这个范围拓展得更大，即把一个人的所有资产分为了四笔钱：<strong>长期投资、活钱广利、稳健理财和保险保障</strong>；也是其投资体系中的四大模块，本系列文章讲的基本都是长期投资的内容，其他部分内容可参考<ahref="https://youzhiyouxing.cn/topics/skeleton/nodes/31">投资知识体系</a></p><h2 id="仓位控制">仓位控制</h2><p>上面提到了要配置何种资产，紧接着的问题自然就是要配置多少，而这就涉及到尤为重要的仓位配置，这部分会介绍仓位配置的一些基本思路和原则，具体的仓位配置方法也会简单介绍，但是这里的方法也只是一个大的指导。</p><h3 id="涨跌都要舒服">涨跌都要舒服</h3><p>在《<ahref="https://youzhiyouxing.cn/materials/710">仓位控制的艺术</a>》提到，<strong>仓位是个性化的</strong>，没有一个仓位配置能适合所有人，因为每个人对风险和收益的要求不同。</p><p>而投资，首先心里要舒服。因为“你不舒服，你慌乱，你兴奋或者痛苦，就很容易犯大错”，文章给出的实践经验如下</p><blockquote><p>首先，你要问自己几个问题：如果我手上的股票或者指数，跌了40%，我会不会痛苦？如果我手上的股票或者指数，涨了40%，我会不会难过？你的股票跌了，你会痛苦，就说明你的仓位重了；反之，你的股票涨了，你痛苦，说明你仓位太轻。好了，现在遵照这两个问题答案，<strong>把你的仓位调整到最平衡的位置：也就是说，涨40% 和跌 40% 的时候，都不是那么难过</strong>。这时候，就合适了。</p></blockquote><p>在《<ahref="https://youzhiyouxing.cn/materials/758">你凭什么在股市赚钱</a>》中提到的“涨跌都舒服”,是同样的观点,同时也指出“很多朋友以为自己舒服了，结果市场跌一跌才发现并不了解自己。我早就跟你说过了，你很可能没有你自己想象的这么坚强。即使现在不难受，随着市场进一步下跌，你才有机会认识真正的自己”，这部分在系列文章的第一篇-认知与心态。里面讲的重新认识你自己是同样观点</p><h3 id="满仓与空仓">满仓与空仓</h3><p>在《<ahref="https://youzhiyouxing.cn/materials/710">聊聊动态再平衡</a>》和《<ahref="https://youzhiyouxing.cn/materials/711">贪字的二重定义</a>》都提到，满仓或空仓都不是非常理智的行为</p><blockquote><p>对于一个心智相对成熟的、愿意长期投资的投资人来说，「满仓」、「空仓」都不是应有的状态。不论你的本钱是10 万，50 万，100 万还是 5000万。满仓意味着你极度看好后市，空仓意味着你认为下跌不远。基于人类对于预测的没有天分，这样show hand 的赌博虽然可能赢，但无疑长期来看破产是不可避免。</p></blockquote><p>关于空仓，则提到有 2个误区，一是不要空仓等大底，因为没人能预测绝对的大底；另一个则是在极度高估的时候也要保留一些仓位；笔者对这里的第二点存疑，既然都知道是极度高估了，为什么还要留仓位，笔者没亲身经历过大牛市，但是看E 大的文章在 2015的狂热时候是都清仓了的，可能这里想表达的意思是总体狂热的市场里也有一些被低估的资产，可以持有这些资产?</p><blockquote><p><strong>空仓等大底，也是一种贪。只要是贪，就会有风险</strong>。「踏空」在72 倍 PE 不可怕，如果有些板块十几倍 PE 还不敢买哪怕1%，那么真的就有点风险了</p><p>估值过高的时候大量卖出，但<strong>至少留 15%仓位永不离场</strong>。朋友们，放心，<strong>长期看，指数会一路上扬</strong>。不信你看看深综指的走势。这15%不会让你赔钱。估值回到历史均值附近，开始少量买入。回到大底区域，重仓买入。其他时间，用各种方法保本，赚钱，等待大牛市。通常我的经验是，这样做一轮熊市到最低点总资产减少幅度不会超过15%。而牛市资产则会增加 N 倍。</p></blockquote><h3 id="足够的低成本仓位">足够的低成本仓位</h3><p>前面虽然提到投资赚取收益的关键在于低买高卖，但是而影响收益除了低买高卖，另一个很关键的因素，那就是具体买多少，在《<ahref="https://youzhiyouxing.cn/materials/709">建立足够的低成本仓位</a>》提到了这一点</p><blockquote><p>对于大多数普通人来说，进行金融投资活动的重点，我个人认为，应该是「建立足够的低成本仓位」。这里面有两个重点。</p><p>第一个是「足够的」。仓位不够，说什么都白搭。<strong>想要实质性地在金融投资中得到足够的回报，仓位一定要够</strong>。我本人除房产外，大概90%～93% 的可投资资产都在除现金等价物外的金融投资中。大概 70%～75%的资产都在 ETF计划中。这十几年的投资经历告诉我，足够的仓位才能在上涨中赚到足够的钱。</p><p>第二个是「低成本」。我对控制持仓成本有着异乎寻常的执着，哪怕有时候会错失一些机会，也在所不惜。<strong>低成本持仓带来的好处显而易见：除了会让你赚得更多，也会使你的心态非常平和</strong>。在上涨赚钱的时候更容易拿得住——大多数人赚不到钱的原因，就是某个品种一套十年，好不容易回本后马上卖出，再买入另一个套十年的品种。如果你的成本低，你就会更容易安安静静地等着你的持仓利润不断增长，让利润飞奔。</p></blockquote><h3 id="分配策略">分配策略</h3><p>终于到了具体的分配策略，看了几篇文章总结下来，基本思路就是先分配各大类的比例，然后根据每个大类当前的估值，分配在这个类中应投入的仓位</p><p>在《<ahref="https://youzhiyouxing.cn/materials/705">没人能替你做资产配置，除了你自己</a>》和《<ahref="https://youzhiyouxing.cn/materials/1157">细说资产配置</a>》中，就提到了该为每个大类配置的仓位比例</p><blockquote><p>在你的终极配置中，单个品种配置<strong>不要低于5%</strong>。低于这个数字对你的资产组合没有意义。然而也尽量不要高于20%，<strong>最多不能高于30%</strong>（如果你特别钟爱A股，可以把大、小股票分为单个品种，也就是不要多于60% 配置）。 在大类投资组合中，仓位在 5% ~ 10%以内，属于偏小，这样的仓位即使上涨较多，对总收益贡献也不会很大。而如果你的单一品种仓位超过30%，则一定是过高，万一有个风吹草动，会对你的组合造成非常大的影响。那么总体来说，建议持仓品种的<strong>仓位在15% ~ 20% 之间，大类品种不超过 6 ~ 7 个</strong>。</p></blockquote><p>上面的策略是给每个大类分配比例，在分配好大类的比例后，还需要考虑的是每个大类当前的仓位控制：即将分配给当前大类的15% ~ 20%的现金，具体该投入多少到大类对应的标的中？答案就是<strong>估值</strong></p><p>在《<ahref="https://youzhiyouxing.cn/materials/1144">如何避免底部「吃不饱」？</a>》，给了一个比较简易的仓位配置方法</p><blockquote><p>根据指数基金历史百分位，进行仓位控制。 如果目前<strong>在历史 50%的地方，则将仓位控制在 50%。 如果目前是历史 10%，那么给 90%仓位</strong>。 如果现在是历史 90%，那么就给 10%。 以此类推。这是中性投资者的仓位，激进与保守，可以分别 ±10%。</p></blockquote><p>而在《<ahref="https://youzhiyouxing.cn/materials/730">我们任何的买入，都要以估值为基础</a>》则更加细化这个方法</p><blockquote><p>仓位的确定是看全市场估值。要综合全市场 PE、PB 和加权 PE五年、十年数据。对于计划来说，<strong>大的原则是：100% -现处百分位</strong>，得出应该配置多少仓位。这是适合一般投资者的。</p><p>比如说，现在全市场估值是 75%，那么 100 - 75 = 25，则一般投资者应配置25% 仓位。对于计划来说，用得是更加保守的一种算法：在现处百分位还在 50%以上的时候，配置仓位减半。</p><p>那么，上面的公式就变成：(100 - 75) / 2 = 13%。也就是在历史 75%的时候，配置 13% 仓位。当现处百分位回到 50% 附近，则迅速将仓位补足到接近50% 的地方。比如可以补到 40%～45%。随着估值继续下降，则完全按照 100% -现处百分位的仓位配置。到了 35%以下，则将这个数字艺术性地放大。比如在历史 30% 的时候，应该配置 70%仓位，但可以在这个时候加大投入，配置 75% 乃至 80%。也就是说，<strong>在100% -现处百分位这个公式的基础上，估值高的时候保守配置，估值低的时候激进配置</strong>。</p></blockquote><h3 id="再平衡">再平衡</h3><p>在平衡在之前的文章《<ahref="https://wulc.me/2021/11/28/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%283%29-%E6%8A%95%E8%B5%84%E7%BB%84%E5%90%88%E6%9E%84%E5%BB%BA/">张潇雨的个人投资课(3)-投资组合构建</a>》中也提到了，在《<ahref="https://youzhiyouxing.cn/materials/707">设计适合你自己的资产配置组合</a>》提出了相同的方法论，并且提供了更多细节</p><blockquote><p>具体方法：用动态平衡的方式，操作优质行业 +优质增强指基（标准指基亦可，大小平衡，如300 + 500）+ 优质主动基金。</p><p>具体操作步骤如下：首先，确定你的<strong>调仓周期</strong>。最低不要低于三个月，最高不要超过一年。原因我不解释，我建议经验少的朋友可以六个月调整一次。其次，确定你的<strong>最高、最低仓位</strong>。我建议除非特别激进的朋友，<strong>股票仓位最好不要超过80%-85%。如果你只是个普通投资者，那么5:5 或者 6:4 都很适合</strong>。第三，确定你的品种。我的建议是增强或标准宽基指数基金（50、300、500、1000、创业、科创）与优质行业基金结合。有能力可以再去找几个优质主动基金加入配置。这里要注意，这只是我的建议，如果你学有余力，这部分的配置甚至可以延伸到个股上。买了好股票赚钱，同时可以有打新收益。只要是股票类资产，都可以算作仓位。只是我强烈建议70% 的普通投资者就不要买个股了。第四，考虑目前合适的仓位。这个可以考虑估值，也可以参考我经常会给出的仓位建议。第五，定期实施你的计划。</p></blockquote><p>在《<ahref="https://youzhiyouxing.cn/materials/1141">假如没有下一轮，自己该如何参考长赢进行投资？</a>》，提到类似观点，而且提到了更极致的动态比例的仓位配置方法，但同时风险也会更高</p><blockquote><p>固定比例配置根据自己的风险承受能力，确定各大类资产的基础配置比例。风险承受能力低，就多配置利率债。承受能力高，就多配置权益类资产，然后再平衡。<strong>再平衡从两个角度考虑：空间、时间</strong>。时间好理解，不要太频繁，也不要太久。我看3个月到半年比较合适。空间意味着你要给每个品种设置涨跌空间。比如，你给A股设置50% 配比，结果它几个月涨了 50%，占比已经超过60%。这时候你就要根据空间原则，将它的持仓占比降下来，卖出一些。</p></blockquote><blockquote><p>动态比例配置等你有了经验，就可以尝试动态配比。根据每类资产的便宜程度，一定范围内给它不同的占比。比如如你所说，A股估值极低的时候，你给70% 仓位，极高的时候给30%。如果你有能力，这样长期看效果会更好一点。但是要注意，这个对于投资人要求极高。没有经验没有能力，很可能弄巧成拙。所以要慎重。</p></blockquote><h2 id="估值体系">估值体系</h2><p>仓位控制中提到每一大类里的仓位控制依赖这个大类当前的估值，那如何估值是一个核心问题，这部分给出了一些参考方法</p><h3 id="识别顶部与底部">识别顶部与底部</h3><p>在《<ahref="https://youzhiyouxing.cn/materials/1144">如何避免底部「吃不饱」？</a>》中，提到了怎么识别顶部和底部区域，给出了一些可参考的标准，<strong>指数估值，以及估值历史百分位</strong>就是其中一个方法。这个方法是基于历史数据以及“合理”的股市数据，综合考虑一个市场以及一个指数处于合理，又或者过冷还是过热的情况。</p><p>这个方法极具指导意义，但不能只靠这个判断，因为还要考虑<strong>投资者情绪以及政策变化</strong>，包括货币政策、财政政策以及专门针对市场的政策。而E 大在判断 2015 的顶部和 2018 的底部时其实都依赖了这个估值指标, 即 PE 和PB</p><p>在《<a href="https://youzhiyouxing.cn/materials/732">回顾 2015年的哈迪斯之顶</a>》是这么说的</p><blockquote><p>中国股市自 1995 年以来，有过三次 <strong>PE 超过 60</strong>的尖峰时刻，分别是 2001 年、2007 年和 2015 年 其中，尤以 2015年风云变幻、诡异莫测。 6 月 15 日，两市全市场 PE 超过 72倍，远远将历史最高抛在身后。随后，暴雨倾盆，泥沙俱下。短短的三周时间内，PE居然已经跌到了历史均值附近！ 要知道，2001 年，阴跌整整 2 年，才在 2003年跌破 PE 均值，进入投资区域；2007 年 10 月创出最高后，在 2008 年 5月才跌破 PE 均值，进入投资区域</p><p><strong>A股整体 PE 60 倍，整体 PB 5.5倍以上，被我定义为「哈迪斯之顶」</strong></p></blockquote><p>而在《<a href="https://youzhiyouxing.cn/materials/737">2018年钻石底发车解说</a>》里，是这么说的</p><blockquote><p>今天数据没出来，但如果尾盘半个小时没有猫腻，那么今天A股全市场<strong>PB 应该会降至 2.5</strong>以下了。这是一个标志性的事件，意味着进入<strong>真正意义上的低估区域</strong>。根据我的评价体系，A股整体即将由「黄金区域」进入「钻石区域」。除非我的评价体系失效了，否则各位投资的A股即将进入一个极其难得的大底区域。这个区域从 2005 年至今，出现过四次。大致是 2005、2008、2012 和现在2018。十三年四次，十年三次，其实真的并不容易，各位且买且珍惜。</p><p>但是请注意，<strong>「区域」并不意味着不会再跌。区域也是有空间的</strong>。PB 从 2 跌到 1.5，不考虑业绩增长，也还有 25% 的空间，所以做好思想准备。有同学问，为什么不等 PB 到 1.5 再买？这么想的同学，2012 年将错过 2008年以后，近十年来唯一的超级大底。当时 PB 也只是到 2而已。三年后，创业板涨了 590%「钻石底」是一个底部区域，不存在预测某个点是大底的情况。预测某个点是大底这件事，不是傻子就是骗子才会干</p></blockquote><p>在《<a href="https://youzhiyouxing.cn/materials/731">A股的历史估值</a>》中，也提到了判断顶部和底部的一些参考指标</p><blockquote><p>一个<strong>指数的估值是否进入过去十年最高 10%区域</strong>，具有非常非常重要的意义。通常情况下，某个指数进入过去十年最高10% 区域，就是本人清仓区域。</p><p>从全市场加权估值（非市值加权，外部综合经济数据加权）来看，A股历史出现过4 次大顶，分别是1996、1997、2000、2007、2015。<strong>这三次大顶的高度几乎完全一致，超过45 的区域</strong></p><p><strong>大底则不完全相同</strong>。2005 年之前大底只是 30。2005年之后的大底全部在 20 左右或以下。分别是2005、2008、2012。2008比较特殊，杀的太厉害，居然杀到了 15 左右。</p></blockquote><p>这几篇没有给出全市 PE、PB 数据获取的参考地址，但是<ahref="https://legulegu.com/stockdata/market_pe">乐咕乐股</a>上分别提供了沪市和深市的数据，<ahref="https://data.eastmoney.com/gzfx/scgk.html">东方财富网</a>上也提供了近两年的市场估值走势情况，可以参考一下。</p><p>上面的例子虽然提供了顶部和底部的参考数据，但<strong>不是说当前的PE、PB的绝对值一定要比历史大底低才可进场</strong>，因为绝对的底部是无法预测的；《<ahref="https://youzhiyouxing.cn/materials/711">贪字的二重定义</a>》里是这么说的</p><blockquote><p>用我们跟踪超过 10 年的A股全市场 PE 来看，2008 年这个数字到过 17倍。如果在 2012 年你还希望 17 倍入场，那么到现在你都一分钱也赚不到——2012年大底，全市场 PE 值是 25 倍。同时，随着无风险利率的变化，我们不能用刻舟求剑的方法，去推导「大底」的估值应该是多少</p></blockquote><p>而在《<ahref="https://youzhiyouxing.cn/materials/1152">如果现在买还可能再跌，为什么不等估值更低时买？</a>》，也提到了类似的观点，笔者理解本质就是绝对的底的点难以预估，因为受到了太多因素的影响，只能大概率买在不贵的地方；另外，文章还提到一点笔者觉得比较值得借鉴：<strong>在进行一笔投资之前，我更愿意想到的是最多会赔多少，而不是赚多少。其实很多时候，困难之所以会成为困难，正是因为你没有做好准备。如果你做好了准备，那么困难来临的时候，通常会变成机遇。</strong></p><p>回到“避免底部吃不饱的”这个问题，通过数据、情绪、政策导向判断底部后，进行仓位布局是，还需要注意节奏问题，即“<strong>到了底部区域，你的节奏一定不能再继续慢慢买。因为金融市场，极度高估和极度低估都非常罕见</strong>，一旦出现，必须大力买入”。而在《<ahref="https://youzhiyouxing.cn/materials/711">投资要讲求节奏</a>》则更详细描述了控制节奏的一些方法,简单来说就是到了很贵或很便宜的时候要加速卖出/买入，否则投资节奏可以放缓</p><blockquote><p>交易节奏的速度。在<strong>上涨趋势良好的时候，你的卖出节奏要放慢</strong>。不着急，慢慢卖。留出空间——也就是说，第二份卖出和第一份之间要有空间。买入当然也是同理。在趋势向下的时候，第二份买入也要和第一份拉开空间。</p><p>那么，<strong>什么时候该加速买入</strong>？就是当你发现目标已经便宜到与你手上的仓位完全不匹配，要尽快建立仓位的时候，比如去年底我们做的。同理，当价格贵到手中仓位已经明显太大的时候，就不要再慢慢卖出。</p></blockquote><h3 id="pepb-的缺陷">PE、PB 的缺陷</h3><p>那 PE/PB 有没有缺陷？在《<ahref="https://youzhiyouxing.cn/materials/729">判断估值的方法</a>》提到了一个点，即PE、PB 不一定适用于个股，因为存在发展和周期的问题</p><p>文章没有详细展开讲，但是知乎上这个<ahref="https://www.zhihu.com/question/263996148/answer/1410965655">回答</a>针对这两点举了比较详细的例子</p><blockquote><p>企业发展其实有不同阶段，有<strong>创业期，成长期，繁荣期，衰退期</strong>。不同阶段，企业的估值可能会有比较大的变化。一般而言，<strong>创业期与成长期，企业快速发展，在这个时候也是容易给予高估值的时候</strong>。很简单，企业营业收入从无到有，基数低，增速相对就快，所以我们看到为什么创业板股给予高估就是这样的道理。有时候，PE高有其逻辑。如果你不能接受一定的高PE，事实上你也就排除了成长股的个股了。这类股确实是爆发力猛，十倍股往往从这其中出现，但大家也清楚，十倍股不是那么好抓的，高收益潜力的背后，其实是高风险，这对个人的能力要求极高。繁荣期，则对应的是企业的发展成熟阶段，一般慢慢发展也成了行业的龙头企业了。盈利稳定的情况下，市盈率可能会回落到20左右</p><p>很多新手投资者容易拿当前的估值比较低，就觉得他是好票。事实上并不是，在这里要讲一个价值陷阱的问题。<strong>价值陷阱特别容易出现在周期股中</strong>。很多<strong>上游原材料个股</strong>，因为原材料的涨价，业绩连续一年甚至持续多年上涨，所以股价也飙的老高，市盈率看起来可能只有个位数，很多人就认为估值低，可以买。但事实上，行业的反应可能往往令人大失所望，在这里列一个逻辑：原材料持续上涨——有利可图——很多人会去扩产——等到扩产产能出来之后——产品供大于求——价格开始出现下降——恶性竞争持续——企业利润出现下滑，利润下滑之后——市盈率一算就跟之前不一样了——可能变成市盈率大。对于周期股，我自己的心得是在低市盈率时卖出，在高市盈率买入，就是对于周期股来说，和我们平时的认知不同，他们不是估值越低越好，可能估值存在滞后性。</p></blockquote><p>但是，对于<strong>所有股票这个大群体来说，整体估值就非常重要，因为不可能所有的股票都高成长，也不是所有的股票都具备周期特征</strong>。如果一个市场上绝大多数股票都很贵，那么这个市场大多数人就很难赚钱。</p><p>PE、PB 不适用于个股，但是适用于市场的这个观点，在其他文章中《<ahref="https://youzhiyouxing.cn/materials/733">别做盛宴之后买单的那个</a>》也提到了，而个股的估值在《<ahref="https://youzhiyouxing.cn/materials/456">最直观的估值方法</a>》中有提到，这里就不展开了</p><h3 id="一些工具">一些工具</h3><p>这里介绍一些能看各类指数或者总体大盘估值情况的工具</p><ul><li>蛋卷基金上的<ahref="https://danjuanfunds.com/djmodule/value-center?channel=1300100141">指数排行</a></li><li>有知有行的<a href="https://youzhiyouxing.cn/data">温度计</a></li><li>且慢的<a href="https://qieman.com/idx-eval">每日估值</a></li><li>乐咕乐股的全市<ahref="https://legulegu.com/stockdata/shanghaiPE">指数估值</a></li><li>....</li></ul><h2 id="定投策略">定投策略</h2><p>定投在各个理财课程里都被塑造成一个个美丽的神话：每月省下一笔小钱做定投，三、五、十年以后突然发现变成了一大笔财富。</p><p>这个传说是如此美好：不需要学习高深的投资知识，不需要盯盘，只要每月省下一点钱，不知不觉中就能赚上大钱，以至于不少人对其趋之若鹜。</p><p>但结果真的如此吗？结论是不一定，下面就从几方面说明定投可能存在的一些陷阱</p><h3 id="定投不用择时">定投不用择时？</h3><p>经常听到的一个说法是定投可以随时开启，不用择时，但是《<ahref="https://youzhiyouxing.cn/materials/767">什么时候开启定投合适</a>》告诉我们开启的定投的时间很重要，文章模拟了四种情况下定投的收益，这四种情况分别是先跌后涨、先涨后跌、震荡上涨，震荡下跌,这四种情况模拟的定投结果如下</p><p>从收益的角度来说，定投最适合的行情是先下跌后上涨，其次是震荡下跌。因为这两种情况都能很好的利用定投平摊成本的特点，<strong>借助市场下跌摊低成本</strong>，等待行情回归时迅速回本并赚取收益；而最糟糕的情况则是先上涨后下跌，</p><p>回到标题里的问题，定投也要择时，但这里的择时不是要精确踩准一个时间点，而是选择一个大概率是底的地方开启，结合市场牛熊轮回的周期特性，<strong>熊市时更适合开启定投</strong>。</p><p>另外，《<ahref="https://youzhiyouxing.cn/materials/933">别纠结</a>》指出日定投、周定投、月定投实际对收益影响不大，不需要在这部分上考虑过多，还提到了过度交易这个现象</p><blockquote><p>为什么很多平台最后还是推出了「周定投」，甚至「日定投」呢？这主要是为了满足很多人心理上的需求——经常操作一下账户，似乎这样可以提高收益。行为金融学里，把人们这种喜欢频繁交易的现象称作：过度交易。而根据研究，多数时候，频繁的交易并不会带来更高的收益，反而增加了交易成本。</p></blockquote><h3 id="降低定投成本">降低定投成本</h3><p><strong>定投最大的特点是平摊成本</strong>——只要我们能把成本摊得越低，就越有助于我们提高定投的收益。这就是市场上常见的一些定投策略的基础思路：进一步摊低定投成本。</p><p>在《<ahref="https://youzhiyouxing.cn/materials/841">定投成本，还能更低吗？</a>》中，提到了降低定投成本的三种方法：均线偏离法、移动平均成本法和估值法。原理都是类似的：<strong>借助某种指标，判断目前市场的高低情况，在低位多投入，高位少投入</strong>；最大区别则在于所选取的市场高低判断指标不同。</p><p>这几种方法的细节对比这里不展开，文章最终推荐的是估值定投法，即基于PE、PB等估值指标进行定投，低估值时投入多份，高估值时少投入或不投入。具体的估值可以看前面估值体系里提供的一些工具</p><p>同时文章通过数据分析指出，<strong>合理卖出才是提高定投收益的更大杀器</strong>，那该在何时卖出？</p><h3 id="何时卖出">何时卖出？</h3><p>看到这个问题，基本上大家都会不假思索地回答在最高点卖出，但要识别牛市顶端肯定是很难的，我们也很难期望卖在牛市的顶端。</p><p>在《<ahref="https://youzhiyouxing.cn/materials/888">买得好不如卖得好？</a>》中，提了三种定投卖出的基础策略：目标收益率法、目标估值法、最大回撤法</p><p>这几种方法的细节对比这里不展开，文章推荐的方法是最大回撤法，因为前两种方法都存在着无法绝对估准的问题，因为<strong>每一轮牛市的涨幅都不同且不可预测，难以设置绝对的止盈目标和估值</strong></p><p>最大回撤法会设置一个<strong>可容忍的最大回撤幅度，当目标指数下跌超过该幅度，就卖出所有资产，结束定投</strong>。文章举了天天基金的慧定投的例子</p><blockquote><p>它先设置了一个目标收益率，但牛市究竟能上涨多少，这是不能测算的，为了让投资者能享受牛市更多的收益，慧定投在达到20% 的目标收益后，如果市场继续上涨则继续持有，一旦出现回撤，回撤幅度达到10%，就迅速卖出全部资产。</p><p>对比前两种方法，这种方法在该时间区间内，获得的累计收益率最高。原因是它<strong>充分利用了牛市过程中情绪性上涨不可预测的特点，转而判断牛市结束时点</strong>，避免了目标收益率设置不合理导致的过早卖出</p></blockquote><p>因此，文章的结论是：<strong>目标收益率 + 最大回撤法、目标估值法 +最大回撤法</strong>，实际中，天天基金的慧定投是这么做的，且会在低估的时候加大定投的金额。</p><h3 id="定投何种资产">定投何种资产？</h3><p>定投是一种灵活控制成本的投资模式，而如果要获取收益，本质上还是要投入到好的资产，在《<ahref="https://youzhiyouxing.cn/materials/924">定投依旧要选好资产</a>》中，提到了选择资产的2 个要素: <strong>长期收益情况和波动情况</strong>。</p><p>长期收益是定投收益的最大来源,而<strong>一个资产的价值高低从根本上来说还是其未来现金流</strong>决定的。以股票为例，未来的现金流来源首先是公司的盈利增长，其次是股息，最后是估值。再比如债券，未来现金流来源主要是利息。</p><p>另一个则是波动情况，一些定投的文章就主张定投要选高波动资产，《定投依旧要选好资产》指出这个说法对也不对。说对，是因为高波动资产确实能增加我们在低位买入的概率增加，从而摊低成本；说不对，是因为从最终结果来看意义并不大。</p><p>文中举了中证 500 和标普的例子，两者涨跌幅很接近，差不多都是 90%左右，但是，中证500的波动率要大得多，回测结果显示最终定投中证500的收益还被指数收益率稍低的标普500反超了，原因是中证500虽然波动率大，但我们<strong>没办法总是买在便宜的时候</strong></p><p>而回到具体的投资标的上，还是之前一直推崇的指数基金，因为主动型股票基金存在着基金经理不稳定的问题，但指数基金不受这个影响</p><blockquote><p>主动型基金基金经理变更的这个大问题，在指数基金身上是基本不存在的。因为指数基金的管理基本上是量化的，基金经理在里面起到的作用很小，不怕他离职。最差的情况是这只指数基金终止清盘，我们也可以很容易在市场上找到跟踪同个指数的产品替代。这也是为什么很多人说的指数基金「永远不会死」。</p><p>不过，在指数基金定投里还有一点要注意，就是最好选择宽基指数而非单一行业或主题指数。</p></blockquote><h2 id="网格策略">网格策略</h2><p>这里的网格策略，是一种<ahref="https://baike.baidu.com/item/%E6%B3%A2%E6%AE%B5/17666670">波段</a>策略。在《<ahref="https://youzhiyouxing.cn/materials/833">波段随谈</a>》中提到了波段的一些优势,包括心态上会更舒适，同时能增加安全垫等</p><blockquote><p>它会让你对下跌能够乐观接受甚至有些期盼。尤其是当实现一波收益后，你甚至盼着赶紧跌好让你再来一次，虽然你的长线持仓会有损失。这种心态的改变会让你的状态变得极度舒适。投资的时候，状态是否舒适非常非常重要。不舒适就有可能带来变态的心理以及变形的交易。</p><p>你买的品种趋势不好，中期会下跌。但下跌并非一路跌到底，中间会有无数反弹。你把反弹利润吃到了，你的安全垫就加厚了。当品种持续下跌后，你买了很多筹码，但由于过程中不断吃反弹利润，成本持续降低，最终在底部区间你只是极少浮亏甚至没有浮亏。</p></blockquote><p>同时，文章也指出“这不是赚大钱的路”,因为<strong>大钱是坚定持有中赚到</strong>的。这点你还不明白，以后就会懂。但是波段很必要，为什么？因为波段给你提供源源不断利润的同时，也能让你真正坚定持有未来赚大钱的仓位。</p><p>那网格策略具体是如何的操作？E 大有 2 篇文章详细介绍了这个策略</p><p>在《<ahref="https://youzhiyouxing.cn/materials/830">网格策略基础（1.0版）</a>》中，指出了网格策略的一些基本步骤</p><blockquote><p>第一步：确定交易品种。第二步：列出网格表格。表格中包括交易价格、交易金额、交易日期。第三步：做压力测试。 第四步：设置交易提醒。第五步：按照交易提醒进行交易。</p></blockquote><p>首先，<strong>做网格的品种，一定是有底的品种。也就是说，不会死的品种。</strong>什么会死？比如个股，这里不是说个股一定会退市，凉透了那种死。它如果基本面发生变化，这辈子也涨不回来了，在网格策略中，也算死了。而做网格最佳的品种，则是“那些没完没了的上下折腾，几年后回头一看我去你怎么一点都没动啊；这种品种简直可以说是网格策略的最佳伴侣，如果你能找到一个，基本上就等同于你找到提款机了。”</p><p>其次，一定要做好压力测试，因为“<strong>网格策略最关键的地方不是能赚多少钱，而是你可以知道最坏情况发生后，自己的账户会怎样</strong>”；具体做法文章描述如下</p><blockquote><p>设计交易表格的时候，根据具体情况，模拟最大下跌幅度。比如说，你现在要开始一个中证500的网格，那你就应该知道，下跌60%，几乎一定是最坏情况了。甚至下跌 50%也非常困难。那么你如果相对来说激进一点，就可以以 40%设计压力测试。保守一点，就按照 50% 或者 60% 设计。如果你真的不知道到底应该给多少最大下跌空间，你可以参考 ETF计划里面每次关于指数最大跌幅的判断。在那个基础上，再加 10%基本上就是铁底。</p></blockquote><p>具体的交易策略，就是列出网格表格,包括交易价格、交易金额、交易日期，然后随着下跌逐步购买，且在上涨时卖出,文章里是这么说的</p><blockquote><p>如果从 1 开始，以 5%幅度为一网，则买入价格分别为：1、0.95、0.9、0.85、0.8……卖出价格除第一网1.0 买入的要在 1.05 卖出外，其它每一网都是上一网的买入价格。即， 0.95买入的一网，1 元卖出；0.9 买入的，0.95 卖出，依次类推。</p><p>所以，你 1 元买入的部分，在 1.05 清仓，赚到 5% 利润。0.95 买到的，在1 元清仓，赚到 5.26%……最终，在 0.7 元买入的部分，0.75清仓，则这部分收益率就可以到 7.14%。</p></blockquote><p>可以看到，这里的策略有 2个关键点，一是<strong>开始的时机</strong>，文章指出是“价格略低于价值的时候”，但是这个很难有一个统一的标准，文章建议是观察ETF 计划，如果 ETF计划开始买入，说明这个东西不太贵；二是<strong>网格大小</strong>,文章给的参考值是普通的品种一般给 5%。波动大的品种(比如券商指数)给10%</p><p>另外，还提到了走势相似的品种不要重复开，比如说都是大盘股指数，50 和300 就别开 2 个网格了。</p><p>上面是 1.0 的策略，在《<ahref="https://youzhiyouxing.cn/materials/710">网格策略进阶（2.0版）</a>》则提出了进阶的策略，相对于 1.0 有了三个点的改建</p><ol type="1"><li>留利润，即每次的卖出时只拿回本金，剩余的利润继续放在里面</li><li>逐格加码，即约低估，买入的金额越多，这里跟定投时低估加倍定投原理一致</li><li>多级网格，即除了 5% 的网格，还可以可以再设置一个 15% 的中网，一个30% 的大网</li></ol><h2 id="小结">小结</h2><p>本文主要讲了投资中的实操部分：买与卖；在了解了本文所介绍的知识体系后，再回到我们在最开始提的几个问题</p><ul><li>买什么</li><li>什么时候买, 买多少</li><li>什么时候卖, 卖多少</li></ul><p>相信答案也就就很明确了，做好资产配置，买入相关性低的资产；在低估值的时候买，高估值的时候卖，指数的估值一般参考PE 和PB，更着重看其区间(历史百分位)而不是绝对值；而买卖多少依赖仓位控制中的分配方法，低估时仓位更重，高估时仓位更轻。</p><p>另外，本文还提到两种策略：定投策略和网格策略，前者偏向长期的投资，后者则更偏向短期的波段操作，里面都给出了一些实操建议。</p><p>即便如此，投资还是很难；因为上面只是说了一个大原则，或者说“正确的废话”，具体每个品类，PE、PB到了多少认为是低估值，也没有一个明确的答案，历史上每次的大涨和大跌时这两个值也不尽相同；又或者是即便是道理没错，面对真实的下跌80% 时，逆势加仓还需要有足够的勇气和子弹。</p><p>在笔者整理的过程中，虽然尽量把文章的内容尽量整理得脉络比较清晰，但总体感觉还是会比较混沌，没有绝对的真理或圣杯，几乎任何觉得有道理的建议或理论，都能找到反例来推翻；回到最终，你会发现还是一个“度”的问题，但是这个“度”的把控则是非常非常奇妙的，而这也许就是投资被称作一项艺术的原因？</p><p>投资里有个“盈亏同源”的概念，顾名思义，就是盈利与亏损都是出自同一个源头，或者说都是同一个原因造成的；其本质是也是在描述上面说的混沌的现象，市场是不确定的，无法预测的，要放弃对所谓确定性的追求，同时摸索出适合自己的选择判断体系；这几篇文章在做的事情就是尝试归纳E大、有知有行已经摸索出一套体系，不能称得上是完美，但是自洽，而且在真实的系统中验证过有效性的；当然有效的系统肯定不止一套，但是愿意这么系统地整理且公开的，笔者目前就找到这一套，也希望对你有用。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;从年初了解 &lt;a href=&quot;https://youzhiyouxing.cn/materials&quot;&gt;有知有行&lt;/a&gt;
开始，断断续续看了不少上面的内容: 听完了里面投资第一课, E
大干货合集、投资知识体系里的文章也基本是已读状态，一直处于输入的状态;
感觉是时候该 connect the dots，形成一个更系统的框架融入自己的知识体系中,
于是便有了这个系列的文章&lt;/p&gt;
&lt;p&gt;这个系列的文章绝大部分内容来自于有知有行，也会有一些笔者深究后调研的内容，且按照笔者的理解划分为：认知与心态、概念与常识、买与卖三大模块。妄图将投资这个大话题以及有知有行的编辑们整理的上百篇文章浓缩到这篇小小的笔记中，自然无法面面俱到，所以这篇文章还是会挑选笔者关注的一些内容，更详细的内容可参考有知有行以及本文里的相关引用。&lt;/p&gt;
&lt;p&gt;本文是买与卖部分，也是实操部分；投资赚取的收益本质上就四个字：&lt;strong&gt;低买高卖&lt;/strong&gt;，虽然只有四个字，但是如果要做好这个事情非常难，本文试图为这个没有标准答案的问题寻找一些可参考的解。&lt;/p&gt;
&lt;p&gt;这个系列前面两部分的内容可参考&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;《&lt;a
href=&quot;https://wulc.me/2022/05/04/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%281%29-%E8%AE%A4%E7%9F%A5%E4%B8%8E%E5%BF%83%E6%80%81/&quot;&gt;投资这件事(1)-认知与心态&lt;/a&gt;》&lt;/li&gt;
&lt;li&gt;《&lt;a
href=&quot;https://wulc.me/2022/06/18/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%282%29-%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%B8%B8%E8%AF%86/&quot;&gt;投资这件事(2)-概念与常识&lt;/a&gt;》&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="拾人牙慧" scheme="https://wulc.me/categories/%E6%8B%BE%E4%BA%BA%E7%89%99%E6%85%A7/"/>
    
    
    <category term="拾人牙慧" scheme="https://wulc.me/tags/%E6%8B%BE%E4%BA%BA%E7%89%99%E6%85%A7/"/>
    
    <category term="投资" scheme="https://wulc.me/tags/%E6%8A%95%E8%B5%84/"/>
    
  </entry>
  
  <entry>
    <title>投资这件事(2)-概念与常识</title>
    <link href="https://wulc.me/2022/06/18/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B(2)-%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%B8%B8%E8%AF%86/"/>
    <id>https://wulc.me/2022/06/18/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B(2)-%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%B8%B8%E8%AF%86/</id>
    <published>2022-06-18T08:51:23.000Z</published>
    <updated>2023-07-16T15:28:28.082Z</updated>
    
    <content type="html"><![CDATA[<p>从年初了解 <a href="https://youzhiyouxing.cn/materials">有知有行</a>开始，断断续续看了不少上面的内容: 听完了里面投资第一课, E大干货合集、投资知识体系里的文章也基本是已读状态，一直处于输入的状态;感觉是时候该 connect the dots，形成一个更系统的框架融入自己的知识体系中,于是便有了这个系列的文章。</p><p>这个系列的文章绝大部分内容来自于有知有行，也会有一些笔者深究后调研的内容，且按照笔者的理解划分为：认知与心态、概念与常识、买与卖三大模块。妄图将投资这个大话题以及有知有行的编辑们整理的上百篇文章浓缩到这篇小小的笔记中，自然无法面面俱到，所以这篇文章还是会挑选笔者关注的一些内容，更详细的内容可参考有知有行以及本文里的相关引用。</p><p>本文是概念与常识的部分，主要是笔者在学习过程中接触到的一些概念性的知识，对于熟悉的人来说，也许是“常识”，笔者则是在尝试将这些不熟悉的内容变为自己的常识，也希望对你有用。</p><p>第一部分的内容见 《<ahref="https://wulc.me/2022/05/04/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%281%29-%E8%AE%A4%E7%9F%A5%E4%B8%8E%E5%BF%83%E6%80%81/">投资这件事(1)-认知与心态</a>》</p><span id="more"></span><h2 id="周期">周期</h2><p>春夏秋冬，阴晴圆缺，万物皆有周期，市场也存在着周期，这部分主要讲市场周期的表现形式，产生原因以及应对方法。</p><h3 id="牛熊交替与轮动">牛熊交替与轮动</h3><p>市场是有周期，主要变现为股市每天的起起伏伏，或者是各个行业的此起彼伏；最常见的就是牛熊交替，行业轮动与风格轮动</p><p>以牛熊交替为例，《<ahref="https://youzhiyouxing.cn/materials/140">市场皆有周期：牛市特征、熊市特征</a>》里就讲了牛市和熊市的几个阶段</p><blockquote><p>「牛市三阶段」：第一阶段，只有少数特别有洞察力的人相信，基本面情况将会好转；第二阶段，大多数人都认识到，基本面情况确实好转了；第三阶段，每个人都得出结论，基本面情况将会变得更好，而且永远只会更好</p><p>「熊市三阶段」:第一阶段，只有少数深谋远虑的投资人才能意识到，尽管形势一片大好，基本面普遍被乐观看涨，但是基本面肯定不会一直顺风顺水；第二阶段，大多数人都认识到基本面正在越变越糟；第三阶段，每个人都相信基本面只会变得越来越糟。</p></blockquote><p>E 大的文章《<ahref="https://youzhiyouxing.cn/materials/687">什么是熊市，什么是牛市？</a>》里也提到类似的观点，这里就不赘述了，而牛熊交替，意味着市场总是在极度乐观和极度悲观中来回摆动，在《<ahref="https://youzhiyouxing.cn/materials/151">什么是钟摆意识？</a>》中，把这种现象描述如下</p><blockquote><p>证券市场中的情绪波动，就像一个钟摆的运动一样。这个钟摆来回摆动，形成一道弧线，弧线的中心点完美地描述了这个钟摆的「平均」位置。但是事实上，钟摆待在这个弧线的中心点位置的时间极短，一晃而过。相反，钟摆几乎大部分时间都在走极端，弧线两端各有一个极端点，钟摆不是在摆向极端点，就是在摆脱极端点</p></blockquote><p>除了牛熊交替形成的周期，行业轮动也会形成周期，《<ahref="https://youzhiyouxing.cn/materials/528">聊聊A股历史上的机构抱团事件</a>》里就提到了由于行业轮动以及机构投资者的考核机制、排名压力等因素，形成了各种「抱团」行为，文章里是这么说的</p><blockquote><p>按照我们的定义，持续加仓并持有一个板块接近至超过30%，视为「抱团」。类似的情况发生过四次，分别是： (1)2007Q1-2010Q1抱团金融，持续 13 个季度 (2)2009Q3-2012Q3 第一次消费抱团，持续 13个季度； (3)2013Q1-2016Q1 抱团信息科技，持续 13 个季度(4)2016Q1-当前第二次消费抱团，已经持续了 13 个季度；但如果从2017Q1算正式开始抱团，目前只持续了 10 个季度</p><p>每个板块的业绩推动自有其原因和逻辑，货币超发和信贷放量时金融板块业绩改善并大幅回升的动力；通胀升温是消费板块业绩大幅改善的动力；新技术和并购趋势是信息科技板块业绩大幅改善的动力。</p></blockquote><p>除了行业轮动，风格轮动也是常见的周期表现，《<ahref="https://youzhiyouxing.cn/materials/686">证券市场是轮回，是周期</a>》里提到从规模上可以将风格归为大、小两种</p><blockquote><p>证券市场上，是讲究「风格」的。比如<strong>从规模上讲，大、小就是两种风格</strong>。</p><p><strong>我们持仓中的50、红利（策略指数，可以归入大指数）、300、金融（行业指数，也算大指数）都算是「大股票指数」</strong>。</p><p>500 当然不算大指数，但在目前这个市场上，也不能算小指数。毕竟已经有3500 只A股，第 301～800怎么能算「小」呢。中证1000勉强算是小指数。我们买的创业板指数其实严格来说也不能算小指数，姑且把它列入。</p></blockquote><p>基于这个维度划分的风格是存在轮动的，表现如下</p><blockquote><p>「风格」是会不断轮换的。虽然这个轮换周期甚至可能长达十年，但一定会轮换。很多人<strong>在2012 年到 2014年，小股票动辄数倍涨幅而大股票纹丝不动的时候，戏称大蓝筹是「大烂臭」</strong>，甚至写出万字雄文论证大股票将永远退出A股历史舞台。当然，后面发生的事大家都知道了。</p><p><strong>2017年以来，蓝筹股走出了一波行情。颇有一些近视的同学，又开始坚定否认小股票的投资价值</strong>。「大的就是好的，漂亮50 最好，小股票永远没戏了。」</p></blockquote><p>同样地，如果去分析美国的股市，也会发现相同的现象，观察美股历史（因为美股历史较长，数据极其丰富翔实，所以用它举例），你会发现非常明显的大小轮动记录。也就是说，大股票和小股票通常会各领风骚数年，最终两者超长期涨幅不会差太多，甚至小股票会稍微略高一点</p><h3 id="什么导致了周期">什么导致了周期</h3><p>周期是如何产生的？ 《<ahref="https://youzhiyouxing.cn/materials/186">为什么市场会有周期？</a>》里提到，市场周期主要由三个周期影响决定——经济周期、企业盈利周期和情绪周期</p><ul><li>经济周期</li></ul><p>经济周期是某个国家、或者整个世界在一定时间内的经济产出情况，增长或衰退。一个经济体的长期经济发展情况，通常是由人口出生率、劳动生产率、科技发达程度等等这样的因素决定</p><ul><li>企业盈利周期</li></ul><p>即使 GDP的变化不大，企业盈利水平的波动也可能会很大，造成这种现象的原因有多个，文章里提到了两个原因：经营杠杆和财富杠杆，这里就不张开讲了</p><ul><li>情绪周期</li></ul><p>市场是参与者行为的总和，而人心的变化，往往会导致市场出现非常极端的变化，而这就是情绪周期。文章认为前面两个周期变化，都比不上情绪周期对市场波动的影响大文章里举了「漂亮50」的例子，旨在说明人们对这些大蓝筹股的情绪的转变</p><p>至此，文章指出了一次完整的周期如下</p><blockquote><p><strong>市场的气氛和叙事开始变化 &gt;&gt;导致投资者开始追捧某一类股票 &gt;&gt;随着追捧股价节节走高印证了牛市的故事 &gt;&gt;更多的人蜂拥而至并让市场产生这种景气不会消失的错觉 &gt;&gt;市场气氛开始掉转 &gt;&gt; 投资者接连出逃股价大幅下降 &gt;&gt;公司股价长时间的一蹶不振……</strong></p></blockquote><p>经济形势好的时候，企业家过度盲目地投资再生产，<strong>银行等金融机构在经济上升周期的信用宽松（容易贷款）也助长了这种行为，这些在经济好的时候进一步放大了企业的盈利</strong>。</p><p>反应到市场周期上——媒体都是好消息，企业盈利屡超预期，一片欣欣向荣。这时候投资者的心理和情绪就接管了现场。「这样的景象一定能持续下去，黄金十年不是梦」，于是股票价格大涨。</p><p>某个时候、某个因素导致企业盈利不及预期，而这时最后的接盘手也已经进场，于是股市开始下跌。<strong>经济形势良好时候的经营和财务杠杆，此时变成了企业的包袱，企业的盈利迅速减少甚至亏损</strong>。股市进一步下跌，媒体上都是坏消息，投资人认为这样的景象一定会持续下去，经济要完，于是抛售股票。企业裁员、投资者身家缩水，大家纷纷勒紧裤腰带，减少不必要的消费，企业的收入和盈利进一步降低……直到开始下一个周期。</p><p>因此，经济周期、企业盈利周期、市场情绪周期，波动逐级放大，但<strong>终会收敛回归到长期趋势本身，这个长期趋势，也就是一个国家经济和企业盈利的增长</strong>。但是这三个周期，以及各种其他周期（比如信贷周期）与因素的叠加，造成了整个市场的起伏波动，而人心在这里的作用尤其之大。</p><h3 id="经济机器是怎么运行的">经济机器是怎么运行的</h3><p>上面虽然在探讨周期是如何产生时最后提到了债务周期，但是没有详细说，而Ray Dalio 的《<ahref="https://youzhiyouxing.cn/materials/680">经济机器是怎样运行的</a>》里面则详细分析了债务周期是如何影响经济周期的，并且从宏观经济的角度，用通俗的语言解释了经济运作原理，值得一看</p><p>关于 Ray Dalio，张潇雨的播客里也介绍过这位大佬，<ahref="https://www.ximalaya.com/sound/35106165">#12：（奇葩的）华尔街大佬与人生导师Ray Dalio</a>，主要讲了 principle 对其的指导意义</p><p>文章指出世界经济运行主要由三个因素驱动：1.生产率的提高 2.短期债务周期3.期债务周期，这三个因素共同组成了一个经济发展的模型</p><p><img data-src="https://wulc.me/imgs/EconomicMachine.jpg" height="50%" width="50%"></p><p><img data-src="https://wulc.me/imgs/EconomicMachine2.jpg" height="50%" width="50%"></p><p>下面则是这个经济模型里的一些要素和发展规律</p><ul><li>信贷</li></ul><blockquote><p>信贷是经济中最重要的组成部分。如果借款人保证偿还债务，而贷款人相信这一承诺，信贷就产生了。任何两个人都可以通过协定，凭空创造出信贷。现实生活中大部分所谓的钱，其实都是信贷。美国国内的信贷总额大约为 50万亿美元，而货币总额只有大约 3万亿美元。<strong>信贷可以使收入增长在短期内超过生产率的增长，但在长期内并非如此</strong>。信贷如果造成超过偿还能力的过度消费，就是不良信贷。</p></blockquote><ul><li>短期债务危机</li></ul><blockquote><p>信贷会导致支出的增加，且信贷可以立刻凭空产生；而如果支出和收入的增长速度超过所出售的商品的生产速度，价格就会上涨，我们把价格的上涨称为通货膨胀。央行不希望通货膨胀过高，因为这会导致许多问题。<strong>央行在看到价格上涨时就会提高利率，随着利率的上升，有能力借钱的人就会减少，同时，现有的债务成本也会上升</strong>，每个月信用卡的还款额会增加。由于人们减少借债，并且还款额度增长，所以剩下来用于支出的资金将会减少，因此支出速度放慢，而由于<strong>一个人的支出是另一个人的收入，环环相扣，人们的收入将下降。由于支出减少，价格就会下跌，我们称之为通货紧缩，经济活动减少，经济便陷入衰退</strong>如果衰退过于严重，而通货膨胀不再成为问题，央行将降低利率，使经济活动重新加速。随着利率降低，偿债成本下降，借债和支出增加，出现另一次经济扩张<strong>短期债务周期通常持续 5～8年</strong>，在几十年里不断重复。但是请注意在每个周期的低谷和高峰后，<strong>经济增长和债务都超过前一个周期</strong>。因此在长期内，债务增加的速度超过收入，从而形成长期债务周期</p></blockquote><ul><li>长期债务危机</li></ul><blockquote><p>尽管人们的债务增加，但贷款人会提供更宽松的借贷条件，这是因为<strong>大家都以为形势一片大好，因为仅注意最近出现的情况</strong>。最近出现的情况是什么呢？收入一直在增加，资产价值不断上升，股票市场欣欣向荣，现在是繁荣时期，用借来的钱购买各类资产，很划算。<strong>当人们过度借贷消费时，泡沫便产生了。</strong>债务与收入比例称为债务负担，只要收入继续上升，债务负担就可以承受。于此同时资产价格迅猛上升，人们大量借钱来购买资产，因为投资促使资产价格日益升高，人们感觉自己很富有，因此即使积累了大量债务，收入和资产价值的上升帮助借款人在长期内保持良好的信用。但是这种情况显然无法永久持续下去。<strong>债务负担不断增加使偿贷成本越来越高，到了一定的时候，偿贷成本的增加速度超过收入</strong>，迫使人们削减支出，由于一个人的支出是另一个人的收入，收入开始减少，而偿贷成本继续增加，导致支出继续减少，周期开始逆转。这时便到达了长期债务的顶峰，债务负担变得过重。美国和欧洲在 2008年就发生了这一情况。日本在 1989 年和美国在 1929年因同样原因发生了这一情况</p></blockquote><p>最后讲的例子，其实就是次贷危机(2008),日本房地产泡沫(1989)和美国的大萧条(1929)；这个时候经济会进入去杠杆化时代</p><blockquote><p>在去杠杆化过程中，人们削减支出，收入下降，信贷消失，资产价格下跌，银行发生挤兑，股票市场暴跌，社会紧张加剧，整个过程开始下滑并形成恶性循环在衰退中，可以通过降低利率来刺激借贷。但是在去杠杆化过程中，由于利率已经很低，低至零，从而丧失刺激功能，因此降低利率不起作用。美国国内的利率在1930 年代的去杠杆化期间下降到零，在 2008 年也是如此。</p></blockquote><p>为了对去杠杆化，通常采用以下四种办法</p><ol type="1"><li>削减支出（紧缩）</li><li>减少债务（债务违约和重组）</li><li>财务再分配</li><li>发行货币</li></ol><p>这四种办法的的基本原理和因果关系如下</p><blockquote><p>削减支出会导致收入下降，当收入下降速度超过还债的速度，因此债务负担实际上更为沉重。削减支出的办法引起通货紧缩。<strong>企业不得不削减成本，这意味着工作机会减少，失业率上升</strong>。这导致下一个步骤，即必须减少债务。</p><p><strong>借款人不还钱，存款人会担心银行没钱，于是纷纷取出存款，银行受到挤兑，个人、企业、银行出现债务违约</strong>，这种严重的经济收缩，就是萧条。萧条的一个主要特征是人们发现原来属于自己的财富中很大一部分其实并不存在。很多贷款人不希望自己的资产消失，同意债务重组。<strong>债务重组意味着贷款人得到的还款减少，或偿还期延长，或利率低于当初商定的水平</strong>，无论如何，合约被破坏，结果是债务减少，贷款人希望多少收回一些贷款，这强过血本无归。</p><p>在去杠杆化过程中，政府的预算赤字飙升，原因是政府的支出超过税收。政府必须加税或者举债以填补赤字。但是要从哪里拿钱？<strong>从富人手中，通过征税把财富从富人那里转到穷人手中</strong>。</p><p>因为支出的很大一部分是信贷，但是萧条时期信贷消失，所以人们钱不够花，那么怎么办?央行发行更多货币,央行通过用这些货币<strong>购买金融资产，帮助推升了资产价格，从而提高了人们的信用</strong>，但是这仅仅有助于那些拥有金融资产的人。因此，为了刺激经济，央行和政府必须合作。央行通过<strong>购买政府债券，其实是把钱借给政府，使其可以通过刺激计划和失业救济金，来增加购买商品和服务的支出</strong>，这增加了人们的收入，也增加了政府的债务，但是这个办法将降低经济中的总债务负担。</p></blockquote><p>文章指出去杠杆化是一个把高债务水平变化到低债务水平的过程。为了使经济再次恢复正常，这个通货再膨胀的阶段大约要<strong>持续7～10 年，因此有失去的 10 年这个说法</strong></p><p>最后，文章给了三条建议,其本质都是要不要过渡依赖信贷，而是要依赖生产率的提升(而不是信贷)来提升收入</p><blockquote><p>第一，不要让债务的增长速度超过收入。因为债务负担最终会将你压垮；第二，不要让收入的增长速度超过生产率。因为这会使你最终失去竞争力；第三，尽一切可能提高生产率。因为生产力在长期内起到最关键作用。</p></blockquote><h3 id="个人如何面对周期">个人如何面对周期</h3><p>如果说上面是宏观经济的角度去分析周期产生原因以及一些应对措施，那 E大下面的几篇文章里讲的就是从个人投资者的角度去看这个周期以及一些应对的手段</p><p>《<ahref="https://youzhiyouxing.cn/materials/686">周期如同春夏秋冬</a>》就从个人投资者的角度，谈了对周期的看法，以及对当时(2019年)所处周期的判断</p><blockquote><p>就像花开有期，每个品种都有它的起伏周期。<strong>从周期的角度讲，你应该做的是尽量识别每个大类的春夏秋冬，然后根据大致的天气状态，增减衣服，舒舒服服地活下去</strong>。</p><p>这几年，消费、公用事业走得非常好，去年以及今年债券走得不错，今年黄金异军突起。这所有的现象都说明我们处在典型的——宏观经济下行周期。(笔者附，指的是经济不好时股票也不好，债券黄金等资产更受青睐?)在这个周期中，受宏观经济影响小的消费、医药（本来医药这两年应该表现非常好，不过行业遭遇新政冲击表现不及预期，但其实已经非常不错）、现金流强的公用事业等板块就成了抱团取暖的避风港。</p><p>接下来呢？简单地说，下一个周期将是逐渐走出宏观经济下行的周期，那个周期股票一定表现很好。其中表现最好的一定不会再是消费或者公用事业，而是金融与科技类这些高弹性、有想象力的板块。债券表现不会太差，因为流动性还在。在目前这个周期表现非常好的贵金属会表现相对来说不会依然这么亮眼。当你发现上述情况发生，你就应该知道宏观经济已经走入了下一个阶段。不必看太多宏观经济数据，因为只有<strong>资本市场才是最敏感最领先的指标。股票先于宏观数据，而债券又会先于股票，这是因为做股票的人非常敏感，而做债券的人更敏感</strong>。至于下个阶段什么时候到来，我不知道，但我认为，在合适的时候应该慢慢的为下一个阶段做准备</p></blockquote><p>面对牛熊交替，《<ahref="https://youzhiyouxing.cn/materials/687">什么是熊市，什么是牛市？</a>》中指出无法判断熊市或牛市何时回来，<strong>你能把握的就是自己账户里的资金、持仓品种，以及自己的心态情绪,要买入便宜的东西，分配好资产，踏踏实实等着更便宜或者价值回归</strong>。除此，还提到需要耐心</p><blockquote><p>金融投资中的权益类投资，尤其我们这种自诩为「价值投资」的方式，它绝不是这个月1%，下个月 1%，今年 12%，明年12%……权益类投资不是这样的，这样的叫做固定收益，或者 P2P，或者麦道夫。权益类投资的特点就像春夏秋冬。有的时候发大财，有的时候平平无奇，有的时候黯然神伤。</p></blockquote><p>而面对风格的轮动，《<ahref="https://youzhiyouxing.cn/materials/686">证券市场是轮回，是周期</a>》给出如下建议</p><blockquote><p>我给各位的建议，是<strong>投资万万不可短视</strong>。这个短视的意思，不仅是看不到长久的未来，更是被短期的历史所迷惑。熊市的短视中看一切都是利空，一切都是灰暗再无希望；牛市的短视中一切都是利好，股市永无天花板；大股票表现好就是漂亮50 永远涨涨涨；小股票表现好就是成长股一生牛牛牛。证券市场是轮回，是周期。大周期套小周期，大轮回里有无数小轮回。<strong>千万千万别被最近发生的事所迷惑。</strong></p></blockquote><p>另外，资产配置的重要性，也能通过周期的角度说明，即除了权益类资产，还要配置债券、石油、黄金等资产，因为<strong>这些品种的周期与股票不同，而多个相关性很低的品种相叠加，会带给我们被熨平的周期，让我们四季如春，资产不断新高</strong>。最常见的就是股债轮动，</p><p>而对于熊市或者说下跌，《<ahref="https://youzhiyouxing.cn/materials/688">我们热切盼望的是下跌</a>》中是这样说的</p><blockquote><p><strong>没有危机是不会出现让你暴富的大底的</strong>。这也是为什么会出现大底，以及为什么大底没几个人敢买的原因——因为出大事了。</p><p>行情最差的时候，很多人预期会更差，因为形势看起来真的很差，而且看起来会更差。这个时候，很多之前看多的人会卖出，很多看空的人会继续看空。之前看多坚持不卖的人已经算好，然而他们已经没钱买了，除了股息。</p></blockquote><h2 id="投资标的">投资标的</h2><p>这里谈到的投资标的主要是指金融类资产，常见的基本上可以分为三大类</p><p>(1)权益类资产：股票，基金等(2)固收类资产：定期，国债，企业债，央行票据，债券基金等(3)现金类资产：现金，银行存款，货币基金等</p><p>权益类资产指的是你拥有这个资产全部或者部分所有权，也享有这部分资产产生的收益；固收类资产一般是债券+定期；现金类的则是常见的各种货币基金，这三类资产风险和收益都是从高到低。</p><p>除了上面说的三大类资产，黄金，原油和房地产也是常见的投资标的，但是这里着重讲权益类资产。</p><h3 id="指数与个股">指数与个股</h3><p>无论是有知有行团队还是 E 大，都更推崇指数而不是个股，在《<ahref="https://youzhiyouxing.cn/materials/714">指数到底哪里好？</a>》、《<ahref="https://youzhiyouxing.cn/materials/712">为什么我很少谈论个股？</a>》、《<ahref="https://youzhiyouxing.cn/materials/713">指数与股票的区别</a>》、《<ahref="https://youzhiyouxing.cn/materials/527">指数基金的五大优势</a>》几篇文章里，总结了指数的一些优势，笔者将其归纳为估值、风险、收益、成本这四个方面。</p><ul><li>估值</li></ul><p>指数投资与个股投资最大的不同，是有一个大致可估算的区间</p><blockquote><p>比如之前说的下跌 80%原则，就是价格区间。比如钻石坑或者哈迪斯顶，就是价值原则。知道了顶和底，你就可以开心的设计你的策略了。如果你知道它极大概率不会跌破某个价格，你就可以以那个价位为底，设计一整套或者几套长期或者短期交易的策略。</p></blockquote><p>但是股票则是很难预估出高点和低点</p><blockquote><p>股票如何估值？PE？PB？ROIC？现金流折现？内含价值？马化腾差点 100万卖掉腾讯，结果因为没人买而作罢这种事我会乱说？小马哥都没法对自己的公司正确估值，一般人……</p><p>我认为股票的低点不是最低点。没有人能预测股票的最低点。买股票最好的时机，我认为是突破布林线中轨的时候。最好是一根大阳线突破，伴随成交量。当然，成交量突破中轨前就要有……这很重要。这时候还不要买，等一等。也许股价会回抽，回抽确认中轨有效的时候，全力买进！</p></blockquote><ul><li>风险</li></ul><p>指数可以认为是“不会死”的品种，这是由指数的自动更新迭代的机制决定的，《<ahref="https://youzhiyouxing.cn/materials/813">安全的指数投资</a>》是这么说的：<strong>只要交易所不关门，只要基金公司不倒闭，哪怕这只基金清盘了，都没事——基金清盘，扣除一定费用后，你的钱会按照净值还给你。股票退市了你可什么都没有了</strong></p><blockquote><p>指数会有一个自动更新迭代的机制，比如每年，或者每半年，甚至更加频繁地重新编制。大部分指数重新编制成份股时不会大动干戈，通常只改变其中的20%，比如对于 50 只成份股的指数来说，每次大概变动就 10 只，先剔除 10只，再纳入新的 10只。走人的股票是不符合指数编制要求的，而请进的是那些符合的。所以一旦成份股中有公司亏损，或者甚至业绩不佳就会有可能被轰走。在一个经济正常发展的国家里，永续的指数长期就是上涨的。</p></blockquote><p>因此，指数具备优胜劣汰的天然属性，这一点在《<ahref="https://youzhiyouxing.cn/materials/715">沪深300十大权重股变化的两点感想</a>》中也提到了，即2021年的沪深300已经与十年前完全不同，不是当年的「金融300」指数了</p><ul><li>收益</li></ul><p>这部分其实在上面的风险中提到的指数自动更新迭代机制中也提到了，</p><blockquote><p>个人始终认为基金是老百姓最好的投资工具。不管股票基金债券基金还是货币基金。本人的基金金额是股票的8 倍。我研究了半天，基金的表现始终还是比我好。</p></blockquote><p>在《为什么我很少谈论个股》中，讨论了为什么牛市中大多数人干不过指数</p><blockquote><p>第一，<strong>指数本身就是股票组成的，简单来说，一定有一半股票跑不赢全市场指数</strong>。如果是权重股行情，那就不用说了，80% 股票跑不过大指数。</p><p>第二，<strong>大多数人都是不停的交易</strong>。你自己看成交量。牛市换手率在 100%-200%之间。半年所有股票就能换手一次，你就知道多少人在不断的买进卖出了。一般都是买<strong>进强势股，卖出弱势。按照均值回归，可想而知大概率是买了就跌</strong>，卖了就涨了。你不换？你不换你手里的就是不涨。服不服？你换了才涨。</p><p>第三，<strong>低位是没人买的</strong>。大多数人是越涨越兴奋。场外观望的也是越高越买。买当然要买强势的，结果就是gg。</p></blockquote><ul><li>成本</li></ul><p>这里主要指个人投入精力的人力成本，包括选股、盯盘等花费的精力</p><p>指数的优点是，对于选股能力不强的朋友（90%的散户）来说，可以不用去学习枯燥的会计知识、跟踪瞬息万变的公司变化，只要大致看看历史估值，找个低位买入即可。</p><p>但是股票需要学习更多的概念，还需要做到“能选出好的股票、能买在低位、能卖在高位、有坚定的信念在赔钱的时候相信它会涨、回本后坚信还能涨”；这里的每一步都涉及到比较多的细节，这里就不赘述了，更详细可参考文档里的内容。</p><p>另外，这篇长文《<ahref="https://mp.weixin.qq.com/s/8Xhx5hN3xLJU6Oeo4GP94w">股票交易背后的残忍真相</a>》里也花了很长篇幅说明个股投资存在的风险，里面还涵盖了很多股票交易的现象，推荐读一下</p><h3 id="a-股指数">A 股指数</h3><p>在《<a href="https://youzhiyouxing.cn/materials/715">常聊的 A股指数</a>》，E 大提到了其主要关注的 A股的指数(2021/01)：沪深300、中证500、创业、科技、消费、医药；其中前两者属于大盘宽基指数，后三者都可归类为行业指数，这些指数都比较好理解，；而有知有行则专门为<strong>红利指数</strong>这个关注度没那么高的指数写了三篇文章</p><p>《<ahref="https://youzhiyouxing.cn/materials/795">红利指数系列（一）：深证红利为什么风景独好？</a>》《<ahref="https://youzhiyouxing.cn/materials/824">红利指数系列（二）：标普红利的高开低走</a>》《<ahref="https://youzhiyouxing.cn/materials/865">红利指数系列（三）：普通却实用的中证红利</a>》</p><p>红利指数是一个根据股票的股息和分红来进行编制的指数，市场上红利指数有很多，即便是主流的红利指数，也分为<strong>上证红利、深证红利、中证红利、标普红利</strong>这4个，并且这四个指数虽然在名称中都有「红利」二字，都将自己定位于寻找股息率高、分红稳定的股票，但其实他们四个差别很大，这与4个指数的编制方式关系较大。文章提到这点笔者比较认可:<strong>很多人有误区，觉得选主动型基金才需要关注基金经理的投资理念和选股逻辑，指数不需要。事实上，指数基金也是同样需要分析，因为指数的编制方法决定了它的选股策略。</strong></p><ul><li>深圳红利</li></ul><p>红利指数的<strong>一般排名规则就是按照股息率从高到低</strong>进行排序，但深证红利却是考虑了股票过去三年累计分红金额（绝对值）占整个深市分红总金额的比例，这个比例越高，排名越靠前，跟通俗来说就是它考虑是分红金额这个绝对值，而不是股息率（<strong>股息率= 每股分红 /每股价格</strong>），这样的编制方式会对那些每股价格高但是股息率低的股票有优势，即<strong>深证红利偏向于大盘股</strong></p><p>选完成分股后，该考虑每只成分股的权重了，也就是指数的加权方式。深圳红利采用的加权方式<strong>不是股息率加权，而是自由流通市值加权</strong>（其他三个红利指数采用的都是股息率加权）。即哪个股票的自由流通市值大，权重就高。作为一个红利指数，加权的指标却不是红利而是市值</p><p>因此，从上面的编制方法可知，深证红利的<strong>红利属性较弱</strong>，跟我们常规认为的红利指数有很大的不同。红利只是它筛选的指标之一，除此之外，它还要看日均成交额、经营状况、现金流等数据。文章认为“深证红利不太像一个红利指数，更偏向于一个基本面指数”</p><ul><li>标普红利</li></ul><p>标普红利全称是「标普中国A股红利机会指数」，其编制方式是建立一个成分股备选池，这个备选池需要满足过去3 年盈利增长必须为正、过去 12个月的净利润必须为正的要求。然后，所有入选的股票按照年度（过去 12个月）股息率排名选出最高的 100只股票，按照股息率加权构成指数。在构成指数的过程中，为了分散，规定了每只股票权重不超过3%，单个行业不超过 33%。</p><p>但是标普指数公司只给了这些介绍，并<strong>不公布历史持仓</strong>，导致大家没办法分析，根本不知道这个指数具体怎么选股，而这种编制方式存在几个隐患</p><p>(1)成分股的股息稳定性不好;标普红利想寻找A股市场上具有稳定高分红能力的公司,但事实上它<strong>只看过去一年的股息率排名。过去一年的周期太短了</strong>，这么短的周期，会选中一些出于特殊原因提高自身股息率的公司(2)<strong>周期股占比太高</strong>;标普红利选股逻辑会使得它持有很高比例的周期股,容易在经营业绩很好、分红多的时候纳入周期股，但周期过去后，这些个股的股价会大幅下跌。而股价下跌会进一步导致这类产品股息率一直很高，很难从指数中剔除出去，指数就会被这类成分股的股价下跌所拖累。(3)对垃圾股的容忍度高; 并没有像其他红利指数那样剔除 ST等垃圾股，而是在所有A股中进行选择 (4)指数样本调整频率高;标普红利每半年调整一次样本，调整频率比其他红利指数高,本来就是按照过去一年的股息率排名选股，成分股变动已经挺大了，再加上半年调整一次，这就导致成分股变动更大</p><ul><li>中证红利</li></ul><p>中证红利的成分股是从沪深A股中进行选择，不对某一市场和赛道过于依赖。作为对比上证红利是从沪市中选择，深证红利是深市中进行选择。</p><p>虽然标普指数和中证红利都是从整个 A股中选择，但是相比于标普指数的编制方式导致成本股变动过大，中证红利在这方面好了很跟标普红利比，中证红利是按照过去<strong>两年的股息率</strong>进行加权的，考察周期更长。另外，为了避免公司的特别行为，它要求公司过去两年<strong>连续分红且每年的税后现金股息率都要大于0</strong>, 具体的编制方式为</p><blockquote><p>过去两年连续现金分红且每年的税后现金股息率均大于 0,按照过去两年的平均税后现金股息率由高到低进行排名，选取排名在前 100名的股票</p></blockquote><p>文章在这部分给的建议是<strong>中证红利跟其他红利指数比，很普通，但具有市场代表性，如果你想投资红利指数，请选择中证红利</strong>。</p><h3 id="海外指数">海外指数</h3><p>投资过程中容易有<ahref="https://wiki.mbalib.com/wiki/%E6%9C%AC%E5%9C%9F%E5%81%8F%E5%A5%BD">本地偏好</a>，即只投资自己所处区域对应的金融市场，但是从资产配置的角度来说，把资产合理配置到<strong>相关系数很小的投资品种</strong>中，才能有效平滑风险，关于资产配置会在后续的买与卖中详细展开</p><p>E 大早在《<ahref="https://youzhiyouxing.cn/materials/716">聊聊海外市场</a>》中就提到，在全球配置的过程中，<strong>成熟市场+新兴市场</strong>比较合理，A股无疑是个新兴市场，那么将A股与美国、欧洲甚至香港的资产统一配置。</p><p>在里面提到了投资海外市场的一个工具， QDII(Qualified DomesticInstitutional Investor) 基金，简单来说就是海外市场的基金，基本分类跟 A股其实也差不多，《<ahref="http://fund.eastmoney.com/a/202004011439644931.html">关于QDII基金的一切看这一篇就够了</a>》里讲了 QDII 基金发展的一些历史以及 QDII基金的一些常识，推荐读一下</p><p>QDII 基金的种类跟 A股的基金差不多，有主动股票型、指数型、混合型、债券型、另类投资型(包括商品型、房地产信托型、绝对收益型、资产配置型FOF)等。而QDII-指数型基金，是QDII基金中最重要的工具性品种，覆盖了多个重要的海外市场股指，比如<strong>恒生指数、标普500、纳斯达克100、英国富时100、德国DAX、日经225</strong>等，此外，还覆盖了部分海外医药行业指数，如标普500医疗保健等权重、标普全球1200医疗保健、纳斯达克生物科技等</p><p>值得注意的是，除了正常的股市波动的风险，QDII 基金还存在 2个额外的风险</p><p>(1)<strong>汇率风险</strong>;QDII基金都是出海投资的，到海外市场投资就得换外币，持有外币资产就必然要面对汇率波动的风险。而汇率有涨有跌，汇率波动带来的影响也有正面、有负面。人民币贬值，对基金净值产生积极影响，人民币升值，对基金净值产生负面影响。(2)<strong>外汇限额带来的流动性风险</strong>;国家采取外汇配额制，基金公司所获配的外汇额度在一定时期内都是固定的。如果QDII基金申购踊跃，导致外汇额度被耗尽，那要想再新增申购，就只能等别人赎回腾出额度才行。比如近来各路资金老想抄海外股市、原油大跌后的底(2020)，大量资金涌入导致大半QDII基金因为没有额度而暂停申购</p><p>对于第二个问题，如果基金本身可上市交易，那在<strong>折溢价率合理的前提下，通过二级市场来达成策略计划倒是一种应对方案</strong>。</p><h3 id="指数基金与主动型基金">指数基金与主动型基金</h3><p>选择股票基金的时候通常有 2种类型：指数基金和主动基金；选择哪一种是个值得思考的问题</p><p>这里的「主动」指的是其选择投资标的，部分或完全由基金管理团队决定，由于基金的信息披露制度是周期性（基金季报）、不完全性（部分股票），非及时性的（季度过去20多天公布季报），所以你<strong>不可能知道一只主动管理基金过去做什么（部分知道），现在在做什么，未来会做什么</strong>。</p><p>因此，孟岩在《<ahref="https://youzhiyouxing.cn/materials/541">如何选择主动型基金？</a>》中提到了选择主动型基金的难度：如果只依靠基金经理过去的业绩去选择基金时，会存在下面2 个问题</p><p>(1)在 07年回测时发现一个有趣的现象，选择每年排行靠后的基金，第二年通常可以跑赢大部分同行，这岂不是意味着可以通过买某年排名后几名的基金来战胜市场了？后来发现，造成这个「结果」的「原因」是：由于<strong>市场风格切换的原因，在某一年成功「赌」到某个风格的基金经理通常会排名市场前列</strong>，大仓位「赌错」的基金经理则会排名靠后。当第二年市场风格切换的时候，排名靠后的基金经理的业绩则又排名前列。(2)由于基金经理的变动比较频繁，并且存在多人管一只基金、离职造成业绩空档等现象，因此通常会采用市场拟合等各种方式去修补一个基金经理的业绩曲线。这样进一步带来了研究的不准确</p><p>而在《<ahref="https://youzhiyouxing.cn/materials/527">指数基金的五大优势</a>》中，就提出了指数基金相对于的5 个优点，认为指数基金更适合普通投资者。</p><blockquote><ol type="1"><li><strong>可预测的投资对象</strong>。指数基金过去和现在投资了什么我们一清二楚；而且指数基金将会如何投资，我们也一清二楚;可预测的投资对象会带来一个巨大的优势：<strong>可估值</strong>。所以大家才会看到指数市盈率，股息率等信息</li><li><strong>永续 +上涨</strong>。指数会有一个自动更新迭代的机制，比如每年，或者每半年，甚至更加频繁地重新编制。一旦成份股中有公司亏损，或者甚至业绩不佳就会有可能被轰走。在一个经济正常发展的国家里，永续的指数长期就是上涨的。</li><li>注意力区别。相比选择被动管理基金，那些选择主动管理基金的投资者更容易被短期业绩影响，在买入基金之前的选择标准就喜欢考虑短期业绩</li><li><strong>制度风险低</strong>。主动基金有可能会出现老鼠仓或利益输送的现象，而指数基金不会</li><li><strong>管理费、托管费低</strong>。指数基金的管理费率相比主动管理类型的基金就低很多，托管费也低一些。有的指数基金，特别是ETF基金会多一个标的指数许可使用费，费率很低。</li></ol></blockquote><p>而 E 大在《<ahref="https://youzhiyouxing.cn/materials/713">指数与股票的区别</a>》和《<ahref="https://youzhiyouxing.cn/materials/714">指数到底哪里好？</a>》里都提到了更推崇指数基金的原因，原因跟上面的类似</p><blockquote><p><strong>主动基金的问题就在于决定它成绩好坏的环节过多</strong>。有时候过去的成绩好你并不知道它的基金经理是运气好还是实力强，你也不知道这个实力强的基金经理明天还会不会继续管理这只基金。总之，一切都是未知。</p><p>我投资指数基金的两个最重要原因： 第一，指数基金是真正的几乎 100%「权益类资产」。<strong>主动基金赋予基金经理的权力太大，可以不断增减仓位。而配置资产这件事我自己完全可以完成，我购买指数基金就是为了配置我资产中「权益类」资产</strong>。我买10% 的指基，就希望有 10% 的权益类资产；如果主动基金把仓位变成80%，我的权益类资产变成 8%了，我还怎么配置资产？第二，<strong>指数基金可以估值</strong>。指数基金发展到今天，类别已经很多。低估、成长、价值、行业……我可以通过对每个类别进行估值，并计算业绩增速，根据模型投入不同的资金。而主动基金则完全无法估值，你根本不知道这只基金的基金经理下个月会买卖什么股票。你所有的宝，都压在基金经理和基金公司的身上。简单地说，指数基金持有的股票是有「规则」的，主动基金没有。没有规则的东西很难把握。</p><p>长期看，一定有 20%～30%的主动基金表现会比指数强，即使你能在指数基金上低买高卖，也一定有10%～20% 的主动基金长期表现更好。如果你能够找到这些在未来表现出色的10%～20%主动基金，那么你就适合投资主动。否则，被动指数投资是很适合你的。</p></blockquote><p>另外，文章还着重提到了“<strong>在股市赔钱，大概率不是因为你买了指数还是主动，而是因为你牛市入场，熊市出场</strong>”,而相比投资主动还是被动来说，建立你自己的投资体系才是真正重要的事。</p><h3 id="选择基金还需要考虑什么">选择基金还需要考虑什么</h3><p>前面讲了指数与个股、指数基金与主动性基金的一些区别，且更推崇普通投资者投资指数基金，那在选择时还需要考虑哪些因素。</p><p>E 大在《<a href="https://youzhiyouxing.cn/materials/714">我选择指数的2 个思路</a>》给了 2 个选择指数的参考指标</p><blockquote><p>第一个是<strong>绝对跌幅</strong>。我个人的定义是<strong>最高点到最低点绝对跌幅是跌到 20%～32%（跌到20%～32%。也就是说下跌68%～80%）</strong>。任何指数到了这个区域我都会大力布局。第二个是<strong>连跌时间</strong>。在A股，<strong>连跌三年</strong>被我看做黄金机会。一个是空间，一个是时间。</p></blockquote><p>而常说的指数往往也分为<strong>宽基指数和行业指数</strong>，顾名思义，前者投资的是整个大盘，后者则是某个行业，在《<ahref="https://youzhiyouxing.cn/materials/197">如何选择好资产中</a>？》，给出的策略是：<strong>通过以沪深300和中证500为主，其它类似消费、医药、信息、红利等指数基金为辅的方式，形成自己的资产组合</strong>。其实就是宽基指数和行业指数相结合的方法，这跟E 大在在前面提到的 6种指数也是不谋而合的，至于具体的仓位配置，会放到买与卖中讨论。在《<ahref="https://youzhiyouxing.cn/materials/562">为何普通人应投资多行业均衡配置的基金</a>？》里也提到了类似观点，这里就不展开了。</p><p>虽然前面都是在推崇指数基金，但是如果要选择主动基金，孟岩在《如何选择主动型基金？》中还是给了一些参考；这个过程与其说选择主动基金，不如说是在选择主动基金经理</p><blockquote><p>在《聪明的投资者》中，格雷厄姆认为：要想在一生中获得投资的成功，并不需要顶级的智商、超凡的商业头脑或秘密的信息，而是需要一个稳妥的知识体系作为决策的基础，并且有能力控制自己的情绪，使其不会对这种体系造成侵蚀。</p><p>我的公式：知识 x 情绪 x 意愿</p><p><strong>知识</strong>你需要了解一个基金经理的投资哲学和系统。而看人比看公司，要更难。我们可以根据基金经理的访谈、文章等信息来判断他是否具备完整、自洽、符合投资大道的投资哲学，以及拥有进化这个系统的开放心胸和方式。然后再根据他在历史上的业绩、季报中股票的选择和调整来判断他是否在按照自己的「知」来进行「实践」。<strong>情绪</strong>观察一个人和组织，最好的方式是当「极端事件」发生的时候。比如 2018 年 10月市场风声鹤唳的时候，基金经理是否能够平和、稳定、甚至发出一些乐观的声音;除了个人的情绪，我们还需要考察基金公司对情绪带来的影响。<strong>意愿</strong>「投资系统」也有了，「情绪控制」也能做到，那如何判断你委托、依靠的人能100%的站在你的角度为你着想和服务呢？我想可能有三种方式：名的绑定、利的绑定、时间</p></blockquote><p>主动基金最关键在于基金经理，但选择主动基金时对及基金本身还是有一些指标可供参考的，在《<ahref="https://youzhiyouxing.cn/materials/796">同一个基金经理，不同的基金，到底选哪个好？</a>》里就讲了一些可参考的指标</p><ul><li>基金规模</li></ul><p>规模太小的话，会存在清算的风险，对于投资者来说，基金一旦清算，那就会从浮亏变成实亏，规模<strong>小于5000 万</strong>的基金，最好不要碰。</p><p>而规模太大也会有问题，这里的大指的是<strong>超过百亿</strong>的基金；基金行业的规定，<strong>一只基金持有一家上市公司市值不得超过基金资产净值的10%；此外，基金持有这只股票的仓位不能超过这家公司股份的10%</strong>。所以规模太大的话，就要把每只股票的仓位降低，同时也会多配更多的股票，但基金经理可能没有那么多精力去调研那么多家公司，而且市场上好公司本来就不多。</p><ul><li>仓位集中程度</li></ul><p>仓位集中的股票起伏都比较大，<strong>谨慎选择规模大，仓位集中的基金</strong>，这类基金的风险会比较大。仓位分散的基金可能在市场震荡或者下跌的时候也分散了风险，业绩更具稳定性。而通过基金的重仓股票，也能初步的判断这只基金的投资风格以及投资的范围</p><ul><li>机构持有比例</li></ul><p>在基金资料页面我们可以看到持有人结构比例，一般有个人和机构两大类，机构持有者指的是企业、社会团体、事业法人等组织，个人的话就是散户。</p><p>受机构青睐的产品说明是比较优质的，因为他们投资的不是自己的钱，而是关系到整个机构和整个团队的，投资前都会比较谨慎，会对基金公司以及基金经理做好充分的调研。所以在比较持有人结构上，文章建议选择机构资金占比多的，因为<strong>遇到股灾的时候，相对机构来说，个人投资者可能更容易受情绪影响，会出现频繁申赎的情况</strong>，资金频繁的进出会影响到基金的净值波动。</p><ul><li>新基金</li></ul><p>不建议买新基金，因为新基金的往往在牛市发行的频率较高，容易在高点建仓，同时手续费比较贵，很多都不打折</p><h3 id="非权益类资产">非权益类资产</h3><p>这里要讲的非权益类资产主要是四大类：债券、原油、黄金、房地产</p><p>在《<ahref="https://youzhiyouxing.cn/materials/1142">E大是如何看待各个大类品种的特性？（上）</a>》和《<ahref="https://youzhiyouxing.cn/materials/1150">E大是如何看待各个大类品种的特性？（下）</a>》中提到其资产配置的种类和对一些资产的看法</p><p>E大的资产配置主要分为了<strong>A股、境内债券、成熟市场股票、新兴市场股票、境外债券、原油、黄金、房地产</strong>，在且慢上可以看到其具体的配置标的和比例</p><p>同时谈到了对这些资产的一些看法，这里主要摘录非权益类资产部分</p><ul><li>债券</li></ul><p>债券是可估值资产，比如说现在十年期国债收益率 3.2%，你就知道，它就比2% 的时候有投资价值。</p><p>历史十年期国债收益率的波动范围，大致是 2.5%~5%之间，可以根据这个配置你的债券资产。配置时需要注意 2 点</p><ol type="1"><li>信用债与利率债</li></ol><p>利率债大多是国债、国开债等国家发行的债券。它们更多的与利率水平相关，不用考虑信用问题，因为几乎是刚性兑付的。而信用债的收益率会高，但偿付信用是依据发行债券企业的信用。</p><p>这样你就应该理解，<strong>在经济危机中，只有利率债会一枝独秀。因为那几乎是唯一可以确定保本的资产</strong>。</p><ol start="2" type="1"><li>债券影响因素</li></ol><p>债券的走势几乎只与两点有关：<strong>收益率和流动性</strong></p><p>所谓流动性就是货币当局释放的货币多少。<strong>债券投资的最佳时期，就是当局释放大量货币，然而经济又没有起色的时候。这个时候钱多了，但经济不好人们不敢买股票，结果债券价格就会大涨。</strong></p><ul><li>黄金</li></ul><p>黄金的波动特性是巨幅波动，类似于涨十年，跌十年，然后再涨十年这种</p><p>通过回顾历史，发现每次美联储降息都预示着美国经济将出现一些问题，股市有可能下跌。在这种流动性被释放，而经济和股市又出现问题的时候，黄金自然成为很多投资者的选项。</p><p>所以黄金的一个投资时间点： <strong>流动性释放 +预期不好，避险功能被激活</strong></p><p>原油和房地产文章里涉及的不多，同时在资产配比里也不高，这里就不详细张开了</p><h2 id="几道计算题">几道计算题</h2><p>前面都是讲一些概念性的东西，这里则是从数学的角度去讲一下投资中的几道算术题，通过数字能够对股市中的涨跌更加敏感。在《<ahref="https://youzhiyouxing.cn/materials/1088">E大：投资中的六道数学题（上）</a>》就提到了几个让人在初看时就搞混的题目</p><h3 id="涨-10-跌-10">涨 10% ≠ 跌 10%</h3><p>在投资中能常听到的一道数学题是</p><blockquote><p>如果你持有的股票下跌 33%，那么需要上涨 50%才能回本；如果你持仓的基金下跌 50%，那么上涨 100% 才能打平。</p></blockquote><p>从这道数学题上我们可以总结出一条投资经验：<strong>永远不要让你的资产大幅缩水，否则，回到高位，再创新高将是非常困难的</strong></p><h3 id="section">1.8×0.6 &lt; 1.05×1.05</h3><p>以下两种场景中选择一种作为你未来的投资收益率，你会选哪个？</p><p>(1)第一年赚 80%，第二年赔 40%，第三年赚 80%，第四年赔 40%…… (2)每年赚5%。</p><p>也许很多人在看到第一个选项，直观感觉就是第一年赚 80%，第二年赔40%，那两年合计能赚 40%，每年 20% ，当然比 5% 强。</p><p>但是在了解到前面提到的涨跌幅不能直接等价，我们会发现在偶数年，第一种情况的年化收益率是4% 左右，还真不如第二种的每年 5%。更极端一些，如果单数年赚 90%，双数年赔50%，那么长期收益率居然是负的</p><p>另外，这个也适用于基金经理和散户朋友</p><blockquote><p>各类基金经理有多少吗？至少有上万人。这上万人绝大多数因为没有名气，所以管理的基金规模都不大。当他们在某年赚到很多钱的时候，其实赚的绝对数字很小。比如10 个亿规模，赚 100%，规模到了 20 个亿，赚了 10 个亿。这样他在牛市成为冠军基金经理，名气大增，申购量暴增 5 倍、10倍。于是，他管理了 100 亿资金。好的，熊市来了，这时候当他赔40%，那么两年合计，到底赚了多少钱呢？ 亏损 40 亿 - 盈利 10 亿 = 消失 30亿。 然而，他第一年赚 100%，第二年赔40%，其实两年合计收益率还是正的。但是，30 亿就这么消失了。实际上，<strong>当他的规模到了 100 亿以后，只要下跌 10%，之前牛市赚到的100% 利润就已经消失殆尽了</strong>。</p><p>这个道理，也同样适合散户朋友。当你用一点点小钱在牛市中赚了幅度很大的钱，然后开始信心十足的转移储蓄加码买入的时候，很有可能是在消灭财富的前夜。</p></blockquote><p>这也是 E大一直在文章里强调的<strong>“熊市不赔钱或者极少亏损，牛市大致跟上指数”</strong>的原因。如果几轮市场周期你都做到了，你赚到的钱是那些大起大落的人永远也赚不到的。</p><h3 id="section-1">80 - 50 ≠ 30</h3><p>E 大有一个 7080 定律，即<strong>一个不会死的品种极限跌幅在80%</strong>。这就引出了一个问题，假如在腰斩，也就是下跌 50%的地方买入，到了跌幅 80% 的地方，你的亏损幅度是多少？</p><p><strong>答案并非你认为的 80% - 50% = 30%，而是60%</strong>；计算也很简单，假如原来是 10 块，跌到 5块的时候买入，则跌到 2 块时，对于你而言，亏损是 (5-2)/5 = 60%</p><p>同理，你在同样品种已经下跌 60% 的地方买入，到了下跌 80%的时候并非浮亏 20%，而是 50%。在已经下跌了 70% 的地方买入，到了下跌 80%的时候并非浮亏 10%，而是 33.33%。</p><p>这里说明了一个道理，那就是<strong>从 0 到 -10% 的距离，与 -70% 到-80%的距离完全不同</strong>。这也是为什么熊市越到后来越惨烈的原因，那个时候财富的缩水远超一般人的承受能力，即使账面只变动了几个百分点。<strong>在熊市的末期，大多数一路抄底的人都会彻底崩溃。因为他们的损失只比站在山顶上的人小一点而已</strong></p><p>另外，这道数学题也说明了一个道理，不要轻易抄底或者说接飞刀，如果基线跌幅在80%，那你抄在了 60%上，可能的跌幅还有 50%，而 E 大的文章里是这么说的</p><blockquote><p>对那些非常狂热急于抄底的朋友说几句。没错，在股市上确实有所谓的<strong>「别人贪婪我恐惧，别人恐惧我贪婪」这句话。但实际上这是在很极端的时候才好用</strong>。在大多数情况下，市场是聪明的，市场大多数时候不是傻子。如果你认为市场大多数时间是傻子，那你才是傻子。而且，你永远逆潮流而动，最终的结果就是被蜂拥而至的群众们踩在脚下。所以，还是要对市场和群众保持敬畏</p></blockquote><h3 id="概率与赔率">概率与赔率</h3><p>在投资中，我们通常关注的是收益率，而在《<ahref="https://youzhiyouxing.cn/materials/17">概率之外，多数人不会的赔率思维</a>》中，把这个收益率更细地拆成了概率和赔率，文章是这么说的</p><blockquote><p>投资是基于概率和赔率的游戏。</p><p>所谓概率，指的是一个事件发生的可能性有多大；所谓赔率，指的是这件事发生后盈利或亏损的程度。好的投资是两个因素共同作用的。</p><p>用一个简单的公式来表达：<strong>投资收益 = 概率 x 赔率</strong>。</p><p>如果只注重概率，当遇到极端事件时可能会赔光；如果只注重赔率，那我们可能会浪费掉很多还不错的「积小胜为大胜」的投资机会。</p></blockquote><p>文章给了一个博彩业的如何利用赔率和概率，来达到坐庄永不亏损的目的</p><blockquote><p>世界杯决赛，德国对英格兰。赌球玩家们开始下注了：买德国队赢的资金合计有120 万，买英格兰队赢的合计有 80 万。如果你是庄家，你需要操控这场比赛来获利吗？你需要准确预测结果来获利吗？答案是：不需要。赌局里有个因素叫「赔率」。赔率为 1.2，表示玩家投入 100 元，赌对了会拿到120 元（包含 100 元下注本金）。 假设德国队赢的赔率是X，根据上面的资金分布，德国队赢时庄家要支付的资金是 120 x X万，赔给买德国队赢的玩家。 只需要保证120 x X &lt; 120 + 80 ，即 X &lt;1.67，你就一定不会亏钱。 同样地，英格兰队赢的赔率是 Y，只需要保证 80 x Y&lt; 120 + 80 ，即 Y &lt; 2.5 ，你就不会亏钱。当然咯，你还可以设定一点「安全边际」。把德国队赢的赔率设为1.50，英国队赢的赔率设为 2.25： 则有如下结果 德国队赢，你有 120 + 80 -120 x 1.50 = 20 万利润； 英国队赢，你有 120 + 80 - 80 x 2.25 = 20万利润； 决赛没有平局，<strong>无论哪边赢，你都能锁定 20万</strong>。</p></blockquote><p>文章还提到了长期资本(<ahref="https://www.investopedia.com/terms/l/longtermcapital.asp#:~:text=Long-Term%20Capital%20Management%20%28LTCM%29%20was%20a%20large%20hedge,prevent%20financial%20markets%20from%20collapsing.">LTCM</a>)忽视了概率小，但是赔率高的情况而导致了最终消失的例子。长期资本的投资策略是单次获利收益不高，但是获利概率很大，因此通过LTCM加杠杆的办法扩大收益。但最终因为俄罗斯债务危机，走向了破产清算的末路。</p><h2 id="宏观常识">宏观常识</h2><p>虽然在之前的《<ahref="https://wulc.me/2021/11/14/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%281%29-%E5%B8%82%E5%9C%BA%E8%A7%84%E5%BE%8B/">张潇雨的个人投资课(1)-市场规律</a>》提到宏观迷信这个问题，即宏观经济在投资中所起作用并非那么大，不需要整天研究宏观经济。但是在学习了一段时间后，发现了“股票的长期增长来源于经济的增长”，不禁对之前的结论产生了一些怀疑。</p><p>后来在E大的《<ahref="https://youzhiyouxing.cn/materials/689">宏观经济跟股票走势有关系吗？</a>》中看到了比较好的分析和比喻</p><blockquote><p>人们通常关心哪些被认为与股市有关的宏观数据？我想无非是这几个：GDP、CPI和 PMI（欧美很重要的就业数据在中国完全无用）。我仔细比较了这几个数据与A股走势的关系，非常惊讶地发现：宏观数据与股票走势几乎没有任何关系——除了PMI ，这个数据与A股关联度不错</p><p>为什么宏观经济数据与股市走势如此让人摸不着头脑？看起来毫无关联性？在我看来，<strong>宏观经济是一个人，而股市是一条狗</strong>。他们就像主人牵着狗出去遛弯，有时候狗会跑得很快，有时候狗又会停下来对自己感兴趣的东西闻来闻去。而此时，主人的速度虽然有快有慢，但他跟狗不会是同样的快慢，所以他们之间会时远时近。</p><p>1996 年、2006 年、2007年，就是这条狗发现了自己感兴趣的异性，疯狂地试图挣脱主人手里的绳子往前跑；而到了2005 年、2008年，它又碰上了打狗队，害怕地躲在主人身后很远很远。这样，有趣的问题就出现了，如果你试图用主人的行走速度去判断狗应该在哪里，就是一件非常可笑的事。</p><p>其实，<strong>整件事中你最应该关注的不是主人的速度，而是一样真正有意义的东西，那就是——那根绳子</strong>。你知道主人在哪儿，你就知道狗即使落后或超出，它的极限会在哪儿。这根绳子才是真正有价值的东西。</p><p><strong>这根绳子是什么？估值。</strong></p><p>当然，还有很重要的东西决定狗的跑动，比如吸引狗的骨头（投资者的预期）、狗的精神状态（货币量）。</p></blockquote><p>在《<ahref="https://youzhiyouxing.cn/materials/690">是什么决定了股市的涨跌</a>》提到的例子也能用来说明这一点</p><blockquote><p>当你用很短的时间，透支了很长时间成长的时候，你就需要用更长的时间来还债。2001年股市 PE 到了 68 倍，之后 5年虽然中国经济稳步增长，指数照样跌了一半就是这个道理</p></blockquote><p>所以，前面提到的结论并没错，但宏观经济与股市的关系绝非简单的线性关系。用宏观经济指导股市投资恐怕越错越远。世界上绝大多数正常发展的国家，股市都会一路向上。而我们要做的不要再去盯着上证指数是2200 点还是 3200点了(宏观经济与实际投资回报关系不大是是一个原因，而上证指数本身的编制方式是另一个原因)。想办法找到那个万年长青的企业，或者找到一个组合完善的组合才是重要的。</p><p>那为什么这里还要提宏观经济呢？因为了解宏光经济一些相关的知识，能然我们对钱的流动有更好的认知，会让我们更好判断出当前的“人”在哪，速度是快是慢等。</p><h3 id="银行体系">银行体系</h3><p>这里主要介绍现代银行体系，了解这些会对新闻里常说的央行加息、货币紧缩等词汇背后的含义更加清楚</p><p>在《<ahref="https://mp.weixin.qq.com/s/RqcrNwlzoMnR4p-M57UAPA">我们真的了解钱吗?</a>》详细讲了货币的演变历史，很有意思，这里摘录其中关于的关于商业银行的部分，也推荐看对应的<ahref="https://www.bilibili.com/video/BV1N34y187z2?spm_id_from=333.999.0.0">视频</a></p><p>银行分为两种，<strong>商业银行和中央银行</strong>，的区别如下</p><blockquote><p>商业银行就是咱们普通老百姓平时存钱，办理贷款业务的银行。一般都是股份制，有机构，或者私人参与，不完全由国家控股，所以它的利益诉求，是为了盈利，也就是说赚钱和发展是它们的首要目的。主要业务就提供<strong>储蓄和贷款</strong>;主要的盈利方式，就是吸收居民的存款，然后给个人或者企业放贷，然后赚中间的息差</p><p>中央银行，是一个国家公共机构,目的是，<strong>调控好国家的宏观经济，监管金融市场，保证国家金融制度良好的运行</strong>。如中国的中央银行全称叫做【中国人民银行】，常听到的【央行】或者【央妈】就是指它；美国的中央银行，全称叫做【美国联邦储备系统】，也就是常听到的【美联储】</p></blockquote><p>中国的商业银行，其中靠前的六家大型商业银行，<strong>工商、农业、中国、建设、交通、邮储，属于国家控股的国有商业银行</strong>，所以它们除了追求自身盈利之外，同时也承担了配合落实国家货币政策的职责。而往下一级的商业银行比如我们比较常见的中信、招商、华夏、平安等等并非完全国有，所以侧重点更偏向于自身盈利和发展。</p><p>美国的商业银行大部分都是机构持股，政府持股的比例相对较少所以美国的商业银行基本都是以自身盈利赚钱发展为主要目的，所以立场方面非常的清晰。</p><p>央行的主要职能包括</p><ul><li>印钞，发行货币；比较好理解不展开</li><li>作为政府的银行；代理国库的收支，以及代理政府债券的发行，为政府提供贷款，保管管理国家的黄金以及外汇储备等</li><li>监管其他商业银行、制定调整货币政策等</li><li>与其他商业银行进行存、贷、拆借等业务</li></ul><p>这里着重讲最后一点，即央行和其他商业银行的业务往来，主要有以下三种</p><p>(1)为商业银行做最后贷款人即商业银行的钱如果都贷款出去了，这个时候如果有很多储户来取钱，商业银行里的钱不够的话，银行的信任就会出现问题，这个时候央行就会贷款给商业银行，帮助兜底。</p><p>(2)处理全国商业银行的票据清算大致的意思是每一家商业银行在央行都有自己的独立账户，我们平时日常的个人或者企业跨行转账的时候，收付的票据以及资金清算这些数据最终都会传导到央行统一处理</p><p>(3)集中收取存放所有商业银行的存款准备金商业银行每收到一笔存款，都要把这笔存款拿出一小部分放在央行，而放在央行的这部分钱就叫做<strong>存款准备金</strong>，这个比例就是存款准备金率,控制这个准备金率能控制商业银行创造出来的货币量，或者说市场上流通的货币量，文章举了下面的一个例子</p><blockquote><p>假如现在商业银行里一分钱就都没有，而这个时候你存了100元现金在银行里，你的银行的账户里就有了100元存款。假设存款准备金率是10%那么按照这个比例，你现在存的这 100 元，商业银行就要放 10块钱在央行，那么剩下的 90 元商业银行就可以拿去放贷。 假如这 90元贷给了你的朋友，你的朋友拿到钱以后，用这笔钱去服装店买了一件衣服,而服装店老板赚到这笔钱以后，又会把这 90元，存进商业银行。于是现在服装店老板的银行账户里，也有了 90 元那么现在商业银行里的存款总数，就变成了你的 100 元加上服装店老板的 90元，总共是 190 元 现在把这个例子继续下去,商业银行收到了服装店老板的 90元存款以后，又会拿出 90 元的 10%，也就是 9 块钱放在央行,那么它又有了 81块钱可以放贷，而这 81块钱贷出去之后，又会被人存回商业银行，然后商业银行又会继续放贷。就这样循环到最后<strong>你会发现最初你存进去的100元，经过商业的银行不断的放贷操作，最终扩张10倍,变成了1000元</strong></p><p>这个倍数就叫做<strong>货币乘数</strong>;而这1000元里面，只有你最开始存进去的那100元才是真正的纸币，所以这100元，我们称之为“<strong>基础货币</strong>”,而剩下的那900元，就只是个数字而已，并没有对应的纸币，这种没有纸币对应的钱，我们称之为“<strong>派生货币</strong>”而这最多就只能扩张10倍，是由于存款准备金率是10%决定的，这个率越低，能扩张的倍数就越大（笔者附，这里的计算基于无穷级数<span class="math inline">\(\sum_{n=0}^{\infty} x^{n} =\frac{1}{1-x}\)</span>）</p><p>目前我国基础货币+派生货币总量一共是233万亿左右,而这其中基础货币的数量又占多少呢？答案是：只占了很小一部分，大概<strong>七分之一不到</strong>；就是说咱们社会上流通的钱大部分其实都是派生货币，只是个数字而已，并没有对应的纸币。这也是为什么<strong>银行最怕挤兑</strong>了</p></blockquote><h3 id="利率">利率</h3><p>这里的<ahref="https://zh.wikipedia.org/zh-sg/%E5%88%A9%E7%8E%87">利率</a>，直观理解就是常说的利息，或者获得资金的成本；如存款利率是银行向存款人获取资金的成本，贷款利率则是贷款人向放贷人（一般为银行及金融机构）获取资金的成本；在宏观经济中，利率常常会作为一个调控经济的手段，<strong>一般来说，利率上升时，各方获取资金的成本上升，会抑制积极性，而利率降低时，获取资金的积极性提高，投资扩大，刺激经济</strong>。</p><p>常说的 <ahref="https://www.zhihu.com/question/29708481">降准与降息</a>中的降息，指的就是降低利率，两者的更详细的区别和含义如下</p><ul><li>降准：降低存款准备金率，这个概念在上面有一个详细的例子说明；降准会让商业银行有更多可放贷的钱</li><li>降息，就是降低存款基准利率或者贷款基准利率，投资者存款收益就变少了，于是会更愿意将钱取出来用于投资，例如购买股票、房子。相应的，企业和个人的贷款成本也会降低，从而使更多的人愿意贷款去做投资</li><li><strong>降准是放钱出来，增加了市场资金量，而降息并没有增加市场资金，只是改变人们的资金投向，鼓励人们更多的去消费和投资</strong></li><li><strong>降息比降准影响更大，市场对利率也更加敏感</strong>；市场货币量的变化，影响主要是对金融机构；而价格的调节，则是直接影响整个市场</li></ul><p>在这个视频里《<ahref="https://www.bilibili.com/video/BV1S3411g7Gh?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&amp;vd_source=0ecf29444015c908a45366cf8b9a4909">【干货】关于利率，你需要知道的那些事儿</a>》，则更详细地把利率拆成了<ahref="https://zh.m.wikipedia.org/zh-hans/%E6%97%A0%E9%A3%8E%E9%99%A9%E5%88%A9%E7%8E%87">无风险利率</a>，风险溢价和银行的油水三大部分；并指出央妈主要调控的是无风险利率（十年期国债收益率）这部分，并且指出了利率与通胀、债券、股市等关系，这里直接讲结论，</p><p>1.利率与通货膨胀：长期低利率容易导致通货膨胀，这时候中央银行往往会提高利率2.利率与债券：长期利率是拿债券价格反算出来的,两者成反比关系，所以利率涨了，债券价格会掉(具体公式可以参考视频)，这是比较明确的关系3.利率与股票：加息初期对股市是利空的，但是长期没有非常明确正相关或负相关；这里举了一个地球与月球的例子很精彩4.利率与房地产/黄金，关系都是不确定的</p><p>而在《<ahref="https://youzhiyouxing.cn/materials/1123">E大是如何对多类品种、信息保持有效关注的</a>》中，也提到了类似观点</p><blockquote><p>利率会传到到各个大类资产上。 首先会影响债券。<strong>利率上升，债券价格会下跌。 利率下降，债券价格会上涨</strong>。然后是股票，然后是商品。</p><p>利率又与通货膨胀紧密联系。 通常情况下，恶性通胀会导致利率上涨。这样就尽量少一些持有债券和股票。多持有金银等贵金属。缓慢的通胀，利率水平较低，则可以多持有一些债券和股票。通货紧缩可以多持有债券、少持有商品和股票。</p></blockquote><h3 id="通货膨胀">通货膨胀</h3><p>通货膨胀是一个耳熟能详的概念，大概意思就是钱不值钱了，但是当我们要更深入的去理解通胀，你会发现它比我们所看见的其实要更加复杂。因为在实际的过程中，钱这个东西是流动的，只有当钱流到流到某一个市场的时候，这个市场的东西才会涨价</p><p>比如流到了汽车市场，汽车就会涨价，流到的生活用品市场生活用品就会涨价。所以在真实的情况中，每一个市场的通胀都是不一样的</p><p>常见的衡量通胀的指标是 <ahref="https://zh.m.wikipedia.org/zh-hans/%E6%B6%88%E8%B2%BB%E8%80%85%E7%89%A9%E5%83%B9%E6%8C%87%E6%95%B8">CPI</a>(ConsumerPrice Index)，但是在 《<ahref="https://mp.weixin.qq.com/s?__biz=MzkzNDE3NDgzMw==&amp;mid=2247484104&amp;idx=1&amp;sn=884a6b977dac9aede84d8b93a1f92cc1&amp;chksm=c2400bd6f53782c06dceea5d3a7ee8b076c74920b723e33b4224d3187e4c05d7969b898db13e&amp;scene=21#wechat_redirect">你为什么总是那么穷</a>》和 《<ahref="https://mp.weixin.qq.com/s?__biz=MzkzNDE3NDgzMw==&amp;mid=2247485277&amp;idx=1&amp;sn=2fdcdb00665a62487e985fd0b935b65c&amp;chksm=c2400e43f5378755b03dde5f386b3ab957e1502fd8653d31d6a91d877a6002c6eac3a0edb12f&amp;scene=21#wechat_redirect">我们真的了解钱么</a>》指出用<strong>M2 - GDP</strong> 评估更为合理，M2 可以简单理解为全社会所有的钱,结合上面的银行体系概念，<strong>M2=全社会所有的基础货币+派生货币</strong></p><p>CPI的数据是准确的，我们平时买的猪肉，大米，以及生活用品，确实只涨了这么多。但是，它只能反映出一部分，因为各国的<strong>CPI往往没有把金融资产这一项计算在内，而现实中最大的通胀往往就发生在这个领域</strong></p><p>文章举了如下例子</p><blockquote><p>08年到现在十几年的时间里,标普500指数从一千多点，一直上涨到了现在的四千多点，翻了三倍多,而这背后很大的一部分原因就是"通胀" 去年到今年仅仅一年的时间,比特币的价格从不到一万美元，暴涨到现在的五万多美元，这其中有部分原因也是因为通胀。因为去年疫情到现在美国疯狂印钱超发了大量的货币，而这些钱又大量流入金融资产导致了金融资产价格上涨。所以无论是股市，比特币，这些金融资产的上涨其实都是一种通胀现象。</p><p>而<strong>这种金融资产的通胀，在我国的载体则是房子</strong>。从08年到现在我国的房地产价的大幅上涨，这背后很大一部分原因，其实也是因为通胀。超发的货币大量流入房地产行业循环，所以造成房地产价格大幅的上涨。</p></blockquote><p>那为什么我国的通胀会发生在房地产呢？</p><p>上面的银行体系中提到了货币是如何增发的，在总体 M2中派生货币占了很大一部分，而能派生出来的原因银行的放贷，或者说<strong>信贷扩张是货币增发的源头</strong></p><p>那我们最大的信贷源头，是哪里呢？那就是房地产了，过去这么多年贷款最多就是房企，和居民购房贷款，比如我们去看08年以前，你会发现贷款买房的人是很少的，但08年信贷政策大力开放之后，大家都开始贷款买房，这种大规模的信贷扩张，是支撑各个地方这些年的房价上涨的重要因素之一。</p><p>《我们真的了解钱么》是这么描述这个现象的</p><blockquote><p>房价不断上涨，房地产行业发展旺盛，房企又会不断贷款加大投入盖房子而由于房地产关联的上下游行业非常之多，所以房地产行业发展旺盛的会间接带动很多上下游相关企业向银行贷款的需求居民、房企、上下游无数行业，这些需求加在一起，就产生了大规模的信贷扩张，也就超发了大量的货币。所以房地产其实本质上就是一台巨大的印钞机。在正常情况下，这台巨大的印钞机超发出来的货币是可以传导到其他消费市场的。打个比方：房企发展的好，不断建房子，房地产上下游关联的这些行业从业者，以及持有多套房产的群体收入也会增加，收入增加，家庭消费支出也会随之增加，钱就会传导到其他消费市场，结果应该是整个市场一起发生通胀。应该表现如下图<img data-src="https://wulc.me/imgs/currency_circulation.jpg" height="30%" width="30%"></p><p>但真实的情况是，<strong>大部分人赚到钱之后，又继续拿这些钱去买房子</strong>了，这样就形成了一个循环，因为房价不断上涨，所以大部分人又都把钱拿去买房子，大量资金不断涌入楼市，显示中的货币变成了这个样子<img data-src="https://wulc.me/imgs/currency_circulation2.jpg" height="30%" width="30%"></p></blockquote><p>那为什么美国的资产通胀主要发生在股市呢？文章也提到了一个区别是在于货币的传导机制不同</p><blockquote><p>我国主要是通过信贷的扩张的方式增发货币，增发出来的钱大多数只是数字。而美国增发货币，那真的就是实打实的印钱美国的商业银行并非国有，所以它们的诉求是自身盈利为主。所以当市场出现风险时，商业银行为自己的安全不会大量发放贷款。所以美国在很多时候无法像我们一样通过信贷扩张去增发货币。但是钱总得往外放出去啊。那怎么办呢？既然商业银行不愿意帮忙，那就是<strong>央行亲自下场买东西把钱放出去</strong>。美国金融市场上有大量的美国国债，房产抵押债券，这样的债券资产，而美联储就会直接印钱，然后用这些印出来的钱，直接在金融市场上大量购买美国的国债，和其他债券资产。这样钱就进入了金融市场，造成了金融资产的不断上涨。08年美国金融危机股市暴跌，美国政府就是用这样的方式把美股拉了回来；去年疫情美股暴跌，熔断了4次,美国用的也是同样的套路直接印钱，向金融市场直接注入大量基础货币。才把美股暂时拉回来了。不过美国这样疯狂的印钱迟早是会出问题的,今年美国的消费市场通胀就非常厉害，物价大幅上涨，这都是疯狂印钱的后果<strong>与我国的房地产一样的逻辑，本来钱是可以通过金融市场传导到其他市场的。但是因为大量货币输入，股市不断上涨，又会导致资本不断回流到金融市场，大量的资金在金融市场内循环，膨胀，于是就有了我们看到美国股市超过10年的大牛市</strong></p></blockquote><p>看完中美不同的通货膨胀，我们能够得到这个结论：<strong>通胀一直存在，但是通胀的存在是不均衡的，并且这种不均衡在现代金融体系的催化下会愈演愈烈</strong>。在我国，这种现象表现为大家房价涨的太快，所以自己买不起，其实背后更底层的逻辑是：很多人在拿并没有怎么通胀的工资，去买已经大幅通胀的房子，当然会觉得很困难；在美国也是如此，持有金融资产的群体资产大幅的增长，而没有金融资产的人群收入则长期低迷；</p><p>所以需要充分认识到：<strong>钱就像水，当钱流到哪里最多，在哪个领域循环，相对应哪里就会出现更多的投资机会</strong>，但是当下房地产的大趋势已经过去，当房子开始逐渐失去投资价值，金融属性开始慢慢减弱，那么分化的拐点就已经不远了。到了那个时候，大量的资金自然会去寻求回报更高的资产领域，文章指出未来长期投资大方向会看好A股的发展</p><p>在《<a href="https://youzhiyouxing.cn/materials/766">你是跑赢 CPI的穷人吗？如何正确理解通货膨胀</a>》，则对持有何种金融资产来应对通胀提出如下观点：在短期内（持有 1年）股票、债券和短期国债都很难有效地对冲通货膨胀风险。但是从长期来看（持有 30年)），<strong>股票的实际收益率几乎不受通胀影响</strong>，而债券收益率被远远抛在后面</p><h2 id="小结">小结</h2><p>本文主要讲了投资中的一些概念与常识，包括周期的表现、成因和应对方法，常见投资标的分析，几道容易犯错的计算题以及一些宏观常识，内容不是非常成体系(因为都摘录了笔者不是非常熟悉的部分~)，也无法立刻教会你如何去投资，甚至看完后可能隔几天就忘了；但是为笔者理解这个世界提供了更丰富的角度，套用那句“投资是认知的变现”，这部分就是在拓展认知，帮助我们从更多视角去了解整个社会的财富分配以及运作机制，即便无法立马变现，了解这些这些底层逻辑，也是挺有意思的，而随着个人财富的积累，相信这些知识也有能“变现”的那一天。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;从年初了解 &lt;a href=&quot;https://youzhiyouxing.cn/materials&quot;&gt;有知有行&lt;/a&gt;
开始，断断续续看了不少上面的内容: 听完了里面投资第一课, E
大干货合集、投资知识体系里的文章也基本是已读状态，一直处于输入的状态;
感觉是时候该 connect the dots，形成一个更系统的框架融入自己的知识体系中,
于是便有了这个系列的文章。&lt;/p&gt;
&lt;p&gt;这个系列的文章绝大部分内容来自于有知有行，也会有一些笔者深究后调研的内容，且按照笔者的理解划分为：认知与心态、概念与常识、买与卖三大模块。妄图将投资这个大话题以及有知有行的编辑们整理的上百篇文章浓缩到这篇小小的笔记中，自然无法面面俱到，所以这篇文章还是会挑选笔者关注的一些内容，更详细的内容可参考有知有行以及本文里的相关引用。&lt;/p&gt;
&lt;p&gt;本文是概念与常识的部分，主要是笔者在学习过程中接触到的一些概念性的知识，对于熟悉的人来说，也许是“常识”，笔者则是在尝试将这些不熟悉的内容变为自己的常识，也希望对你有用。&lt;/p&gt;
&lt;p&gt;第一部分的内容见 《&lt;a
href=&quot;https://wulc.me/2022/05/04/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B%281%29-%E8%AE%A4%E7%9F%A5%E4%B8%8E%E5%BF%83%E6%80%81/&quot;&gt;投资这件事(1)-认知与心态&lt;/a&gt;》&lt;/p&gt;</summary>
    
    
    
    <category term="拾人牙慧" scheme="https://wulc.me/categories/%E6%8B%BE%E4%BA%BA%E7%89%99%E6%85%A7/"/>
    
    
    <category term="拾人牙慧" scheme="https://wulc.me/tags/%E6%8B%BE%E4%BA%BA%E7%89%99%E6%85%A7/"/>
    
    <category term="投资" scheme="https://wulc.me/tags/%E6%8A%95%E8%B5%84/"/>
    
  </entry>
  
  <entry>
    <title>投资这件事(1)-认知与心态</title>
    <link href="https://wulc.me/2022/05/04/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B(1)-%E8%AE%A4%E7%9F%A5%E4%B8%8E%E5%BF%83%E6%80%81/"/>
    <id>https://wulc.me/2022/05/04/%E6%8A%95%E8%B5%84%E8%BF%99%E4%BB%B6%E4%BA%8B(1)-%E8%AE%A4%E7%9F%A5%E4%B8%8E%E5%BF%83%E6%80%81/</id>
    <published>2022-05-04T08:51:23.000Z</published>
    <updated>2023-07-16T15:28:28.114Z</updated>
    
    <content type="html"><![CDATA[<p>从年初了解 <a href="https://youzhiyouxing.cn/materials">有知有行</a>开始，断断续续看了不少上面的内容: 听完了里面投资第一课, E大干货合集、投资知识体系里的文章也基本是已读状态，一直处于输入的状态;感觉是时候该 connect the dots，形成一个更系统的框架融入自己的知识体系中,于是便有了这个系列的文章。</p><p>这个系列的文章绝大部分内容来自于有知有行，也会有一些笔者深究后调研的内容，且按照笔者的理解划分为：认知与心态、概念与常识、买与卖三大模块。妄图将投资这个大话题以及有知有行的编辑们整理的上百篇文章浓缩到这篇小小的笔记中，自然无法面面俱到，所以这篇文章还是会挑选笔者关注的一些内容，更详细的内容可参考有知有行以及本文里的相关引用。</p><p>本文是认知与心态的部分，主要是投资前的心理建设部分，包括对待财富、投资的认知，投资时的心态管理(收益与风险的预期、投资的时间周期)等。</p><span id="more"></span><h2 id="关于财富">关于财富</h2><p>财富的意义不用赘述，绝大部分人的绝大部分时间都花在了这件事上，这里主要讲2部分内容，一是聊聊财富自由这个老生常谈的话题，二是为了达到自由往往需要经历的财富积累环节。</p><h3 id="多少钱才算自由">多少钱才算自由</h3><p>财富自由，是一个老生常谈的问题，每个人对这个问题都有自己的答案。对于当前笔者而言，<strong>财富自由不意味着能得到什么东西，而是意味着拒绝什么</strong>，比如说拒绝一份强度高但是成长性弱的工作、拒绝在生病时因囊中羞涩而得不到治疗的窘境等，不被某些东西约束，才是笔者认为的自由。</p><p>而看着各种把杠杆拉满去买房，因为失去现金流而断供的例子，比如知乎上的<ahref="https://www.zhihu.com/question/305583541/answer/561830151">年底被车企裁员，房贷还不起怎么办？</a>回答，以及笔者在写这篇博客时,各大互联网公司因为裁员而导致断供的各种新闻，笔者就有个疑问：把未来三十年未知的现金流作为赌注去拉满杠杠，来买个落地安身之处，因为房贷而活得小心翼翼，算是真的自由吗？</p><p>另外，从个人角度来看，当前的财富是否能够让其自由，本质上跟这个人的欲望有关，E大的微博 《 <ahref="https://weibo.com/5687069307/Kff5FkuD0?ref=collection&amp;type=comment">一个人缺不缺钱与欲望相关</a>》也里讲了类似的观点,“欲望如果太多，无论你拥有多少，你都是缺乏的、焦虑的”</p><p>然而，这个问题的吊诡之处在于，人是欲望驱动的动物，缺少了多巴胺带来的那种冲动，人很容易裹足不前，那该怎么破？这篇文章《<ahref="https://youzhiyouxing.cn/materials/1210">要多有钱我们才会感到满足？——满足的多世界理论</a>》给出了一个思路，笔者的理解就是通过自我察觉，<strong>问清楚自己到底是什么在驱使你的欲望：是你的真我，还是被规训的思想？</strong></p><p>关于这部分，在《<ahref="https://youzhiyouxing.cn/materials/110">金钱的价值究竟是什么</a>》中也给出了类似的观点，同时给了一个衡量标准</p><blockquote><p>很多人觉得财务自由遥不可及，得几千万，还有说几个亿的，其实根本不用那么多。不说什么大富大贵，单单是让自己的“睡后收入”超过目前的工作收入，让我们有能力选择更适合自己的事业、可以根据意愿选择和谁在一起度过时光，对于生活就已经是巨大的助力。</p><p>财务自由为的不是想要什么就有什么，而是当有东西不想要的时候，你能有底气拒绝。人的欲望永无止境，但是拒绝糟心事，真的没多难。</p></blockquote><h3 id="财富的积累">财富的积累</h3><p>获取财富的途径从本质来说就是提供他人需要的服务，或者通俗点说就是卖东西，知乎上的<ahref="https://www.zhihu.com/question/37050422/answer/95982957">这个回答</a>概括了常见的四种手段：卖信息、卖钱、卖他人的注意力、卖自己的时间。当然，这里说的只是个人的财富积累，如果放到更宏观的范围，财富来源于生产效率的提升，这部分可参考《<ahref="https://youzhiyouxing.cn/materials/182">钱是从哪儿来的</a>》</p><p>常说的打工人就是在卖自己的时间，除了这个途径外，对于绝大部分人，比较可行的方法，只能是稍微节约一点，然后拿着一点本金去投资，也就是上面说的卖钱。而卖钱其实也依赖着你的积累下来的本金，所以财富的积累是一个绕不过去的问题</p><p>如何做好财富的积累？《<ahref="https://youzhiyouxing.cn/materials/849">关于财富和消费</a>》和《<ahref="https://youzhiyouxing.cn/materials/847">尽早投资，慢慢变富</a>》都给出了一些建议，笔者整理如下</p><ul><li><strong>积少成多</strong>;无论你的收入是多少，除非真的特别特别少，每次拿到任何收入，都强制性存起来至少20%,然后用适当的精力稍微学点理财的知识，选择一些相对安全的方式，把你的钱投出去，股票、基金、债券、余额宝，甚至房地产……然后好好工作，继续提升自己，多挣点，然后多存点，多投点……</li><li><strong>尽早开始</strong>;一个是复利(复利其实并没有那么神奇，后面会详细说)，一个是给自己尽早试错的机会，《<ahref="https://youzhiyouxing.cn/materials/99">为什么说投资要趁早</a>》</li><li><strong>开源</strong>：要么在本行业努力，争取做到前列，拿到更高的回报。要么利用业余时间做一点自己喜欢的副业，增加收入。主业+ 副业 +金融投资，一个人变成三个人，财富积累自然快。收入越多，结余越多，距离自己的目标就会更近。</li><li><strong>节流</strong>；不要被消费主义洗脑，消费主义的形式太多了无法一一列举，具体可以参考这个问题下的回答,<ahref="https://www.zhihu.com/question/59001664">有哪些专门为中产阶级量身定制的消费陷阱？</a></li><li><strong>理性投资</strong>。辛苦积累的财富，迅速消失只有四个方式：黄、赌、毒，以及乱投资。</li></ul><p>虽然上面的两篇文章强调了财富积累的重要性，但是也强调了存钱、节流这个环节过犹不及</p><blockquote><p>不要存太多。除非你收入特别高，真的花不完。一般的工薪阶层，不要存超过40%。我这人最相信「平衡」两个字。<strong>生活是用来享受的，金钱是我们的奴隶，不是我们的主人。在先把那部分投资的钱存好后，剩下的就用来好好生活，享受人生。为了投资，牺牲生活，得不偿失</strong>。终有一天，你会发现，你的工资与你的投资收益相比，已经微不足道了。</p><p>不要很痛苦地做一件事。比如说很痛苦地坚持攒钱，很痛苦地面对亏损，很痛苦地学习和投资，很痛苦地工作等等。因为持续痛苦地做一件事，大概率不会有太好的结果。也许在你的心中，坚持这件事的未来是非常光明的。但是，也许<strong>你的意志并没有你自己想的那么坚强。终有一天，稻草压倒了骆驼，爆发出来的负面情绪可能会让你觉得过去的坚持都是无用、可笑的</strong></p></blockquote><p>另外,关于财富的积累，知乎上的这个回答也很好，基本也包含了上面说的开源节流的思想，同时也外延了婚姻、生娃等抉择，强烈推荐阅读，<ahref="https://www.zhihu.com/question/23444019/answer/28016620">23 岁到35 岁该如何实现资产增值？如何不陷入结婚生孩子买房的恶性循环中？ -李艾维的回答 - 知乎</a></p><h2 id="关于投资">关于投资</h2><p>为什么要投资，为了赚钱啊；前面也提到了，搞钱的手段里，卖钱是普通人最可行的途径之一，而《<ahref="https://youzhiyouxing.cn/materials/847">尽早投资,慢慢变富</a>》里面给了如下这个说法，其实就是强调了常说的被动收入的重要性</p><blockquote><p>穷这个字，底下是个「力」字。富呢？底下是个「田」字。什么意思呢，意思就是，你朝九晚五，辛苦劳作，每天起得比鸡早，睡得比狗晚，最后大概率还是穷。因为你是在出卖体力，手停口停。然而有资产的人呢，有房的收房租；有股票的拿股息，碰上牛市翻几倍；有公司的雇一帮人为自己挣钱……当你的资产大到一定程度，你就变成了「富」人，因为你有了「田」，于是你可以恬不知耻不劳而获地成为社会的寄生虫了。</p></blockquote><h3 id="神奇的复利">神奇的复利？</h3><p>说到投资，往往少不了的一个概念就是复利，几乎所有的投资入门的文章都在强调着复利的重要性，但是复利真的有那么神奇吗？</p><p>在这之前，我们先看下由复利这个概念衍生出来的一个励志公式，即每天进步一点点，一年后的变化是巨大的，<code>1.01^365 = 37.7834</code>，反之则是<code>0.99^365 = 0.02551</code></p><p>这个公式初看时也许能给人打满鸡血，但是仔细思考便会发现其中的 2个逻辑漏洞</p><ol type="1"><li>指数级增长要求每天都在昨天基础上提升 1%,这显然是不现实的，加法增长更加符合个人的成长</li><li>增长是有饱和区，或者说瓶颈期的，增长到一定阶段大概率会出现疲软阶段,增长曲线会是 s 型而不是指数型的</li></ol><p>《<ahref="https://youzhiyouxing.cn/materials/101">你看到的神奇复利都是骗人的</a>》里，就针对这个问题做了拆解，我们可以把复利公式拆成如下形式</p><p><code>复利 = 本金 × (1 + 收益率)^时间</code></p><p>可以看到，关键因素在本金、收益率和时间，对这三个因素进一步分析，便能得到如下结论</p><blockquote><ol type="1"><li><p><strong>足够多的本金很重要</strong>。本金的增加并不是理财能带来的，是要你不断努力去从外部获取。现在市面上<strong>各种沙雕的理财培训，坏就坏在他们只给你讲复利的重要性，却从来不告诉你，你那点本金，复利上天也没多少</strong>。</p></li><li><p><strong>时间周期要拉得足够长</strong>。“一年里，每天都比前一天进步1%“”这件事情是极不合理的。你可能会说，我每天能比昨天多背 5个单词啊？不难啊？抱歉，这是线性叠加，不是复利。而且，不光不是复利，你还会背的越多，忘的越多。<strong>365次方的确是非常美好的想像，可惜现实生活中并不存在。比较合理的算法，应该是用「年」 为单位。这样你会发现，要达到 365次方，你大概需要十辈子</strong></p></li></ol><p>(3)<strong>收益率往往被高估</strong>。做任何复利增长的曲线的时候，都会假设一个10% 或者 15% 这样的增长率。但是，在真实世界中，你不但找不到 20%的利率，你也找不到 15% 的利率，你甚至找不到 10% 的利率。</p></blockquote><p>这里并不是要否定复利这个概念，而是需要强调如果你真的相信复利增长曲线，那你就应该接受一个现实：<strong>变富是需要慢慢实现的</strong>（这部分后面会详细说）。这个慢慢，可能是三年五年、更可能是十年二十年的持之以恒丝毫不敢懈怠。</p><h3 id="管理好预期收益率">管理好预期收益率</h3><p>预期很重要，预期过高，带来的是失落，预期较低，带来的也许是意外的小惊喜，这是个公理，不止适用于投资</p><p>前面提到计算复利时收益率往往被高估，那在投资中的预期收益率是多少才合理呢呢？《<ahref="https://youzhiyouxing.cn/materials/185">股票的预期收益率应该是多少？</a>》里从宏观经济出发分析了这个值，先说结论：<strong>8%～10%的长期年化收益率是可以预期的</strong></p><p>首先是“长期年化”这个词，这个把时间拉到以年为维度，身边经常能听到有人赚20%、50%，动辄翻倍的也不在少数，这里很有可能是 1 个月或 1笔买卖的收益，但均摊到一年，未必就是这么多，甚至可能是负的。</p><p>而从宏观经济角度来说，整个经济体的增长，是每个企业、每个劳动者共同努力不断创造财富的结果，量化的指标就是GDP（国内生产总值）。过去 20 年，中国 GDP 年均增速在 9% 左右。如果把 GDP增速理解成「所有大大小小的企业增长速度的均值」，那么投资到运营水平更高的企业也会获得一些超额收益。文章里给的经验，8%～10%的长期年化收益率是可以预期的。</p><p>8%～10% 的估算逻辑就是这样来的，而如果进一步深挖，文章里使用 ROE(<ahref="https://www.investopedia.com/terms/r/returnonequity.asp#:~:text=Return%20on%20equity%20%28ROE%29%20is,the%20return%20on%20net%20assets.">Returnon Equity</a>) 这个指标来做了估算，ROE通俗来说就是股东放在公司的每一块钱，能产生多少的回报。所以查理·芒格说过，一只股票的长期回报率，基本会和企业长期实现的ROE 靠拢，文章里举了一个咖啡店的例子，值得一看。</p><p>文章还提到了长期坚持“低买高卖”，并且系统性地选到表现比较好的公司，我们就有可能把预期收益率拉高到12%～15% 的水平。那15%的长期收益率高不高？其实非常高了。股神巴菲特这么多年的长期收益率，也差不多就是12%～15% 的水平</p><p>另外，E 大的文章《<ahref="https://youzhiyouxing.cn/materials/660">请把预期收益率降下来</a>》提到了类似的观点，这里不赘述了，只摘录下面这段对笔者比较有启发的话</p><blockquote><p>别跟别人比赛。不要在熊市中安慰自己，大盘跌了60%，我只赔了55.5%。我跑赢了大盘。那没有任何意义。不要在牛市里懊恼，大盘涨了100%，我只赚了80%，我真是个loser。看看新闻，那么多人发了大财，为什么不是我？<strong>记住，你要的是绝对收益。要比，你只需要跟自己比——我的资产，有没有比上个月、上个季度、去年增加了？</strong></p></blockquote><p>这段话其实跟张潇雨的播客 《<ahref="https://www.xiaoyuzhoufm.com/episode/61518f2a64cb39f688d0786b">场上没有别人</a>》里的观点很相似，那就是投资可能是每个人一生中最能掌控的事情之一，这个过程不需要排名，不需要跟外部比较，只需要对自己诚实。</p><h3 id="接受慢慢变富">接受慢慢变富</h3><p>看了上面的对复利的拆解和预期收益率，我们不得不接受一个事实：那就是变富的过程会很漫长。上面的《你看到的神奇复利都是骗人的》里也提到了：巴菲特的巨额资产，绝大部分都是在他50 岁以后赚到的</p><p><img data-src="https://wulc.me/imgs/InvestMent_Buffett.jpg" height="50%" width="50%"></p><p>《<ahref="https://youzhiyouxing.cn/materials/98">接受了慢慢变富，才能越来越有钱</a>》里提到了这个观点</p><blockquote><p>投资和做其他生意相比，优势绝不在于来钱快，投资的优势在于可以一直做下去，而且可以慢慢越做越大。而大部分做生意的人，来钱都比投资快，但很难长久，即使可以做的久，也基本保持在一个规模，没法越做越大。</p><p>所以我们做投资要发扬投资的优点，就是要有耐心慢慢来，把财富越积越多，而速度恰恰是投资的缺点。而很多人完全搞反了，只想快速赚一把就走人，这完全是避开了投资的优点，而发扬了投资的缺点，逆势而行。</p></blockquote><p>想要接收慢慢变富，行动上有几点笔者觉得较为重要：闲钱投资、别加杠杆和停止内耗</p><ul><li>闲钱投资</li></ul><p>想要有好的心态，一定要用闲钱投资，什么是闲钱？就是短期内亏了也不会影响生活的钱，这一点非常重要，否则心态上很容易崩，也很容易造成主动亏损。这一点在半佛2018 的 live 《<ahref="https://www.zhihu.com/lives/927612860245364736">2018，如何通过投资理财让自己过得更好？</a>》里听到过，时至今日仍然印象</p><ul><li>别加杠杆</li></ul><p>另一点就是不要加杠杆了，还是上面的那个live，印象深刻的一句话是“<strong>投资里，从 1 块到 100，1 万，1000万都是有可能的，但是从 0 到 1 是不可能的</strong>”，E 大的文章 《<ahref="https://youzhiyouxing.cn/materials/661">只要本金还在，就有无数机会</a>》也是相同的观点</p><ul><li>停止内耗</li></ul><p>在播客《<ahref="https://youzhiyouxing.cn/materials/1003">孟岩对话张潇雨：在投资这件事儿上就别折磨自己了</a>》里,提到了如下观点，也是笔者认为心态上比较重要的一点</p><blockquote><p>我们在生活中不要自己找新的事情折磨自己，给自己找麻烦。什么意思呢？就是我总觉得好多人学投资，是苦大仇深的，是来这翻身来了。周围的人都不理解自己，投资变成了一个出口。努力学习没有问题，但没必要卷，<strong>没必要非要在这件事情上证明什么。因为你证明不了什么。而是要在这个过程中去了解自己、舒展自己</strong>。在一个没有那么多内耗和磨损的情况下去做这些事情，这个事情才会越做越顺，越做越好。同时，在这个过程中学会不去苛责自己，不去过度地评价自己，想那么多有的没的。这个是非常非常重要的。</p></blockquote><h3 id="价值投资长期投资">价值投资？长期投资？</h3><p>在投资里，经常能听到的一个词就是价值投资，同时也常伴随着的另一个词是长期投资；那价值投资里的价值指的是什么？多长时间的投资才算长期投资？价值投资是否意味着长期投资？</p><p>如果用 Wikipedia 上对<ahref="https://zh.m.wikipedia.org/zh-hans/%E5%83%B9%E5%80%BC%E6%8A%95%E8%B3%87">价值投资</a>定义，主要特点就是对于买入价格与公司资产估值之间的差距必须有足够安全边际</p><p>在 E 大比较早之前写的《<ahref="https://youzhiyouxing.cn/materials/665">我所理解的价值投资</a>》，定义也是类似的</p><blockquote><p>价值投资，不必然是长期投资，不能用时间长短来衡量；价值投资，不必然是低市盈率投资，不能用市盈率来衡量；价值投资，必然是以远低于股票内在价值的价格买入，要学会如何衡量企业真正的内在价值；价值投资，必然是以保住本金为前提，以足够的安全边际为度量衡，取得合理的投资回报。</p></blockquote><p>更通俗来说就是低买高卖，但是这个事情很难，难在哪里？文章里给出的答案如下(但是笔者觉得更难的是比较难判断是当前是贵了还是便宜了，这部分在买与卖会介绍一些参考指标)</p><blockquote><p>就难在一个字：忍。</p><p>贵的时候，忍着不买。不管别人如何冷嘲热讽，坚持内心的标准。只要不够便宜，我就是不买。</p><p>不贵的时候，忍着不卖。抗拒自己所有的人性，拿着自己看好的标的。死死拿着，哪管你大浪滔天？</p></blockquote><p>值得注意的是，价值投资并不是唯一的投资方式，也不是最好的投资方式，或者说没有最好的投资方式。常常被自诩为价值投资者们嗤之以鼻的趋势投资，在E 大上面的文章和 《<ahref="https://youzhiyouxing.cn/materials/666">我所理解的趋势投资</a>》中，是这么说的</p><blockquote><p>趋势投资不去管价值，主要任务是判断趋势，趋势延续就继续持有/空仓，趋势改变就卖出/买入。在趋势投资者的眼中，价格有时候倒是高了更值得买入。比如雪球的28策略，你会发现历史收益也会很不错。</p><p>价值和趋势我不能说谁一定好，适合你自己就好。但是，有一点请注意。<strong>千万不要某个品种一路上涨你总是狠不下心去追，结果它涨了很多后跌了一点趋势已变的时候你就抱着价值投资的信心接了进去。然后它一路暴跌已经很有价值的时候你又变成了趋势投资者，觉得趋势很差不如卖掉以后走势好了再买</strong></p><p>价值投资者的势，应该是对于一个国家，一个地区，一个公司真正大势的把握。</p></blockquote><p>而说到长期投资，各种投资课程、投资大师，都会强调长期投资、长期持有、长期规划的重要性，多久才算长呢？《<ahref="https://youzhiyouxing.cn/materials/188">投资多久才算长期？</a>》针对美股和A 股的数据做了回测，给出的大致结论无论是美股还是 A股，持有 10年以上，收益都是正的。</p><p>如果说长期投资能拿到收益，那为什么长期投资还那么难坚持呢？文章给出了2 个原因</p><p>(1)<strong>投资回报在时间上的分布不均匀</strong>，即主要收益是由 1%的交易日贡献的(所以需要保证“当闪电劈下来的时候，你最好保证自己在场”)。这导致了不管对于市场，还是对于个股，很可能我们大部分时间都在进行无聊的等待，而真正的上涨（或者下跌），只是在很短的时间内发生的。换句话说，等待相当煎熬，所以很多人就会选择卖出，然后去追新的热点(2)<strong>市场总是轮动的</strong>，这里的轮动，指的可能是资产表现的轮动，可能是投资风格的轮动，也可能是行业板块的轮动等等，其实也就是周期的一种体现（关于周期在后面的概念与常识中会讲到），这导致了当前市场最受到追捧的那个主题，和你喜欢或者擅长的主题不一致，那么再坚定的人，也会对自己的持仓产生怀疑。</p><p>了解了这些后，文章给了如下建议</p><blockquote><p>长期投资需要的时间。这些因素都是客观的，并不会因为我们希望快速变富而产生变化。唯一能控制的，是投资的本金。因此，对我们来说，可能更重要的事情是，<strong>放下焦虑、专注在工作和生活上，在我们自己不断变得更好的同时，去收获更多的工资、股权等其它收入。与此同时，做好资产配置，根据自己的兴趣慢慢地拓展能力圈，在合理的范围内提高我们能获得的收益率</strong></p></blockquote><p>而如果针对基金这个投资标的，《<ahref="https://youzhiyouxing.cn/materials/100">基金投资应该持有多长时间？</a>》给了更详细的数据的回测和分析，给出的结论如下</p><blockquote><p>回到「基金应该持有多长时间」这个问题，答案如下：</p><p>（1）我们需要刷新一下「长期持有」的概念，<strong>8年以上</strong>才是真正意义上有稳定绩效表现的「长期投资」，即至少持有 2个以上完整的周期。 （2）如果你还接受不了 8年以上的周期，那么你可以<strong>考虑持有 4～5年（回报效率最高），而且，务必做个「战略性择时」，千万别在估值高点买入基金</strong>！（3）在合适的点位买入，并持有足够多的周期，这是基金投资成功的关键。</p></blockquote><p>了解上面的价值投资和长期投资后，我们知道两者没有必然的联系，很多价值投资者在下跌时自称的长期投资，很多时候都是在自欺欺人而已</p><h2 id="重新认识你自己">重新认识你自己</h2><p>很多时候，我们都认为自己对自己都是非常了解的，但事实上并非如此; 2022年上半年，股市有了几次大跌，孟岩在 03/17 的写的《<ahref="https://youzhiyouxing.cn/materials/1198">恐惧</a>》里面有段话是这样的</p><blockquote><p>在牛市的时候填写调查问卷，大家都觉得下跌 30%完全能够承受，但真的到了熊市，即使只跌了 15%，可能你已经非常恐慌了。</p><p>另外，在风险测评问卷上填写下跌 30% 很简单，但你很容易低估真的下跌 30%会对你的心理造成什么样的影响。我们可以在脑海中做压力测试，但无法测试当我们投资失败回到家，看到家人失望表情时的心情。</p></blockquote><p>出现这个问题可能原因是多重的，比如说可能仓位控制不合理，杠杆太高等；而其中的一个不可忽略的原因就是我们其实并没有真正认识自己，或者说不清楚极端环境下自己会作出何种表现</p><p>文章的结尾写到：“恐惧是真实的，也是宝贵的。它是一种微妙的身体信号，也是检验我们是否真的相信的试金石。记住那些恐惧的时刻，让恐惧穿过自己”。其实就是建议我们在极端情绪下进行自我察觉，学会体会自己的情绪，与自己的情绪和平共处。E大的《<ahref="https://youzhiyouxing.cn/materials/750">聊聊投资中的那些恐惧</a>》里则提到了面对这些恐惧一些更详细的方法</p><blockquote><p>从小仓位开始，训练自己能享受盈利。不要怕回吐利润。坚定一点：只要你买的不贵，最终一定会一路向上。</p><p>面对资本市场的危机，我的建议： 首先，不要慌。第二，冷静地看自己手里的东西。有没有可能死的，有没有特别贵的。如果有，找机会处理掉。第三，保命。 第四，找机会进场捡漏。如果没有能力识别，就不捡，保命。第五，坚持不慌。一开始不慌，最惨的时候更不慌。再次审视手里的东西。跌得很惨，但是会不会死。不会就不用慌。尝试捡漏。</p></blockquote><p>另外，关于察觉并自己的情绪，推荐读一下这个回答，<ahref="https://www.zhihu.com/question/20789554/answer/132621010">怎样进行良好的情绪管理？</a>，里面提到的三步法值得实践一下</p><p><img data-src="https://wulc.me/imgs/Emotion_control.jpg" height="50%" width="50%"></p><p>回到投资上，《<ahref="https://youzhiyouxing.cn/materials/524">认识你自己，才是投资这件事的终极乐趣</a>》里也提到类似的问题</p><blockquote><p>无论是什么样的投资，要赚钱的路径只有一个：在价格低的时候买入，价格高的时候卖出。有趣的是，大多数散户回过头观看自己的行为，结果常常是反过来：他们在价格高涨时杀入市场，迅速下跌时期匆匆离场。也就是说，他们在高买低卖。</p><p>是恐惧驱动了我们的大部分行为。经历过才知道，真正能做到低买高卖绝非容易。它需要在还没有媒体宣传和大众舆论的时候就有独立思考的精神，需要耐得住寂寞，忍受住波动，需要不执着，拿得起放得下，需要随时准备承认自己错了，需要远见、信心、谦逊、坚持……</p></blockquote><p>另外，文章还提到了一个观点：<strong>无论是有限游戏还是无限游戏，属于你的机会，一辈子就那么几次。我所说的机会，是长时间，相对意义上改变结局的大机会。大的机会是时代造就的，不是你自己。</strong>那这些机会长啥样呢？文章给了几个例子：</p><ul><li>信息不对称，特指找到和自己相关的，熟悉的市场</li><li>市场失效，一个新兴市场在刚开始常常是不够有效的</li><li>技术、算法和投资理论，但文章指出了“投资圣杯”根本不存在，任何投资理论都是暂时的，且没有高低贵贱之分</li></ul><p>至此，文章提出说真正的圣杯是<strong>对于自我的了解</strong></p><blockquote><p>向内看。在大部分人向外求索的时候，你能明白那不可能成为真正的钥匙，最多只能让大家站在同一起跑线上，而真正的「圣杯」是对自我的了解，那本身就是一种优势</p></blockquote><p>此外，文章里提到的创业的例子，笔者比较有共鸣，因为笔者前一段时间也常常在问自己，为什么懂得很多道理,但是仍过不好这一生？原因就是知易行难，懂得的成本太低了，但是真正执行的成本太高了，这个成本意味着长期坚持，意味着要反馈频次低的情况下重复做着同一件事，这需要一种愚。</p><blockquote><p>在创业的那几年，我读过很多书，见过很多人，也曾试图找规律，到底什么样的创业者才能成功？聪明的？学历高的？创业经验丰富的？有人格魅力的？能忽悠的？……</p><p>终于有天我体会到：太聪明的人，并不适合创业。因为他们能在很短的时间内分析出利弊，甚至计算出成与不成的概率。他们能设计出漂亮的商业模式，能说服一流的投资人，能招到很好的团队。<strong>可是，他们不够愚痴，不够执拗</strong>。</p><p>世界上的聪明人那么多，如果机会是能分析出来的，为什么轮到你？最顶尖的创业者，一定在某种程度，某些方面有一种傻劲儿。他们并非料事如神，占尽先机。他们一定在一段或长或短的时间里，做了所有聪明人都不愿意做的事。他们是所有理性人中的非理性者，把脑子无法算计的东西，甩手交给了心。</p><p>这种傻来源于什么呢？</p><p>某种热爱。某种感性。某种直觉。</p></blockquote><p>回到主题，投资这个过程，也是一个不断自我觉察的过程；金融市场，也是一个认识自我的绝佳修炼场，场上只有你自己，在那些大跌和大涨的日子里，体会自己的恐惧和狂喜，重新认识你自己。</p><h2 id="小结">小结</h2><p>本文主要讲了投资前的一些心理建设部分，主要包括对财富、投资的理解，对投资时长、收益率的预期，如何通过投资去重新认识自己等。</p><p>如果说投资是一场游戏，收益是我们的得分，那么在游戏前，做好心理建设和必要的认知，放下焦虑，才能享受这场游戏的美妙，也能从这场游戏中重新认识自我。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;从年初了解 &lt;a href=&quot;https://youzhiyouxing.cn/materials&quot;&gt;有知有行&lt;/a&gt;
开始，断断续续看了不少上面的内容: 听完了里面投资第一课, E
大干货合集、投资知识体系里的文章也基本是已读状态，一直处于输入的状态;
感觉是时候该 connect the dots，形成一个更系统的框架融入自己的知识体系中,
于是便有了这个系列的文章。&lt;/p&gt;
&lt;p&gt;这个系列的文章绝大部分内容来自于有知有行，也会有一些笔者深究后调研的内容，且按照笔者的理解划分为：认知与心态、概念与常识、买与卖三大模块。妄图将投资这个大话题以及有知有行的编辑们整理的上百篇文章浓缩到这篇小小的笔记中，自然无法面面俱到，所以这篇文章还是会挑选笔者关注的一些内容，更详细的内容可参考有知有行以及本文里的相关引用。&lt;/p&gt;
&lt;p&gt;本文是认知与心态的部分，主要是投资前的心理建设部分，包括对待财富、投资的认知，投资时的心态管理(收益与风险的预期、投资的时间周期)等。&lt;/p&gt;</summary>
    
    
    
    <category term="拾人牙慧" scheme="https://wulc.me/categories/%E6%8B%BE%E4%BA%BA%E7%89%99%E6%85%A7/"/>
    
    
    <category term="拾人牙慧" scheme="https://wulc.me/tags/%E6%8B%BE%E4%BA%BA%E7%89%99%E6%85%A7/"/>
    
    <category term="投资" scheme="https://wulc.me/tags/%E6%8A%95%E8%B5%84/"/>
    
  </entry>
  
  <entry>
    <title>Long Tail Problem In Item Recommendation</title>
    <link href="https://wulc.me/2022/04/04/Long%20Tail%20Problem%20In%20Item%20Recommendation/"/>
    <id>https://wulc.me/2022/04/04/Long%20Tail%20Problem%20In%20Item%20Recommendation/</id>
    <published>2022-04-04T08:08:44.000Z</published>
    <updated>2023-07-16T15:28:28.162Z</updated>
    
    <content type="html"><![CDATA[<p>长尾问题在推荐/广告系统是一个较为常见的问题(这里主要针对 item的长尾)，原因可能比较多，笔者理解的主要原因是由于系统存在 feedbackloop(即训练数据由模型产生，同时又会被模型用于训练)的特性，在没有外部干预的情况下，马太效应会天然导致头部效应的现象比较严重，少部分的item 主导了整个系统。</p><p>比如说推荐系统中，很多视频/文章并没有展示机会，在训练集中压根没出现过，高热的视频/文章在不同的用户中排序都比较靠前，进而得到多次被推荐的机会；在广告系统中，部分计划的消耗会特别高，而一些计划压根投不出去；这导致了用户或者广告主体验不佳，而这种现象往往也会被归为生态问题。</p><p>既然没有干预时，系统天然的特性导致了头部效应(或者说二八效应)比较严重，那强行干预系统的分布能不能改变这个问题？答案是可以的，而且目前绝大部分的方法都是在做这一类事情，常用手段往往有2 种</p><p>（1）策略层面，根据系统和业务特性设计规则，比如说对长尾的 item有特定的扶持，强行让这些 item 能触达到更多的用户（2）模型层面，<strong>核心思想就是让模型能更好地学习到 long tail item的 representation</strong>，因为这个问题的根本原因就是 long tail item的样本过少，进而导致模型学习的不好；而具体的手段比较多，这部分会在后面详细介绍。</p><p>这篇文章主要介绍的几篇paper都是模型层面的，因为策略层面的往往需要根据实际业务需求来拍一些规则，模型层面的一些方法更为通用。</p><span id="more"></span><h2 id="dual-transfer-learning-framework">Dual Transfer LearningFramework</h2><p>这个方法来自 google 的一篇 paper, <ahref="https://arxiv.org/abs/2010.15982">A Model of Two Tales: DualTransfer Learning Framework for Improved Long-tail ItemRecommendation</a></p><p>paper 名字中提到的 dual transfer learning，分别是 model-level 和item-level 的 transfer learning，简单来说，前者让样本少的模型(few-shotmodel)的参数尽可能往样本多的模型(many-shotmodel)的参数靠拢(这里根据样本量分为 2 个模型来建模)，后者则是让 longtail item 的 representation 与 head item 的尽可能接近，这里的representation 其实就是上面提到的 few-shot model 和 many-shot model吐出来的 embedding，因此 paper 提出的总体框架如下如所示</p><figure><img data-src="https://wulc.me/imgs/DualTransfer_MIRec.jpg" alt="MIRec" /><figcaption aria-hidden="true">MIRec</figcaption></figure><p>上图中的一些符号含义如下</p><!-- ![notation][3] --><p><img data-src="https://wulc.me/imgs/DualTransfer_Notataion.jpg" height="50%" width="50%"></p><p>从上图中可以看到，根据样本量分为了 many-shot model 和 few-shot model两个模型来分别建模，核心是 meta-level knowledge transfer 和 curriculumtransfer，分别对应前面的 model-level 和 item-level, 下面分别介绍</p><h3 id="model-level">model-level</h3><p>其思想比较简单，就是要学习一个 meta learner <spanclass="math inline">\(\mathcal{F}\)</span>, 其输入和输出都是 few-shotmodel 的 parameter，监督信号是输出的 parameter 要与 many-shot model 的parameter 接近，最终作用方式是在 loss 上</p><p>base learner 的 loss 是常规的 softmax loss，<spanclass="math inline">\(r(u,i)\)</span> 取值为 1/0 表示是否有 feedback(如click 等)</p><!-- ![base learner][4] --><p><img data-src="https://wulc.me/imgs/DualTransfer_baselearner.jpg" height="50%" width="50%"></p><p>meta learner <span class="math inline">\(\mathcal{F}\)</span>则是采用了 mse 的 loss，并且作为一个 regularization 项加到 few-shotmodel 原始的 loss 上，则最终 few-shot model 的 loss 如下公式(5)所示</p><!-- ![meta learner][5] --><p><img data-src="https://wulc.me/imgs/DualTransfer_metalearner.jpg" height="50%" width="50%"></p><p>meta learner <span class="math inline">\(\mathcal{F}\)</span>具体的结构有很多种，这里采用的是简单的 fully connected layer</p><h3 id="item-level">item-level</h3><p>这部分主要通过 <a href="https://arxiv.org/abs/2007.12865">curriculumlearning</a> 来训练模型，curriculum learning的基本思想是在训练时组织好样本进模型的顺序，前面的综述的链接里的话是这么说的</p><blockquote><p>Curriculum learning (CL) is a training strategy that trains a machinelearning model from easier data to harder data, which imitates themeaningful learning order in human curricula. As an easy-to-use plug-in,the CL strategy has demonstrated its power in improving thegeneralization capacity and convergence rate of various models in a widerange of scenarios such as computer vision and natural languageprocessing etc.</p></blockquote><p>回到 paper 里，这部分主要做的则是构造好上面提到的两个 trainingdataset：<span class="math inline">\(\Omega^{*}\)</span> 和 <spanclass="math inline">\(\Omega(k)\)</span></p><!-- ![many-shot dataset][7] --><p><img data-src="https://wulc.me/imgs/DualTransfer_manyshot_dataset.jpg" height="50%" width="50%"></p><p><span class="math inline">\(\Omega(k)\)</span>的构造方法如下，这部分样本包含 2 部分 item，一部分是 <spanclass="math inline">\(I_{h}(k)\)</span> 中那些刚好有 k 个sample 的item，另一部分则是 <span class="math inline">\(I_{t}(k)\)</span>中的全部 sample</p><!-- ![few-shot dataset][8] --><p><img data-src="https://wulc.me/imgs/DualTransfer_fewshot_dataset.jpg" height="50%" width="50%"></p><p>paper 里称这么做主要有以下 2 个原因，但是笔者觉得核心还是把 long tailitem 的样本单独出来，不至于被 head item dominate</p><blockquote><ol type="1"><li>tail items are fully trained in both the many-shot model andfew-shot model to ensure the high quality of the learned itemrepresentations in both many-shot and few-shot models (2）In thefew-shot model training, the distribution of tail items relatively keepsthe same as the original distribution. It can alleviate the bias amongtail items that brings by the new distribution</li></ol></blockquote><h3 id="training-serving">training &amp; serving</h3><p>因此，总体的 training 流程如下图所示,可以分为两个阶段，阶段一是通过常规的方法训练 many-shotmodel，阶段二则是通过 many-shot model 的 parameter 和 meta learner来训练 few-shot model</p><!-- ![train][9] --><p><img data-src="https://wulc.me/imgs/DualTransfer_training.jpg" height="50%" width="50%"></p><p>而最终模型 serving 时，则是会对两个 model 输出的 score做一个常规的加权</p><!-- ![serving][10] --><p><img data-src="https://wulc.me/imgs/DualTransfer_prediction.jpg" height="50%" width="50%"></p><h3 id="experiment">experiment</h3><p>paper 里的实验用了 2 个公开的数据集，MovieLens1M 和Bookcrossing，采用的评估指标是Hit Ratio at top K (HR@K) 和 NDCG at top K(NDCG@K) ，这里的 HR@K 其实就是召回率</p><p>实验预期的目标是在总体效果不变差的前提下，提升 long tail item的表现；因此上面的两个评估指标 HR@K 和 NDCG@K 分别在all item、head item和 tail item 上进行了评估</p><p>paper 里的实验着重回答了以下四个问题</p><blockquote><p>RQ1: How well does the dual transfer learning framework MIRec performcompared to the state-of-the-art methods? RQ2: How do differentcomponents (meta-learning and curriculum learning) of MIRec performindividually? Could they complement each other? RQ3: How does ourproposed curriculum learning strategy compare with the alternatives?RQ4: Besides downstream task performance, are we actually learningbetter representations for tail items? Could we see the differencesvisually?</p></blockquote><p>第一个问题是跟其他的 sota 方法比较，结论是 paper提出的最好，具体数据这里就不贴了</p><p>第二个问题是做了一个消融实验，结论是单独的 meta-learning 或curriculum learning 都是正向的，且加起来效果最好</p><p>第三个问题是对比不同的 curriculum learning strategy 对 training 和validation 时的 loss 的值的影响；主要对比了 head2tail 和 tail2head两个策略，前者先用 head item 训练，再用 tail item训练，后者则刚好相反，这部分效果如下图所示，也可以归纳出以下 3点结论</p><blockquote><ol type="1"><li>Compared to the tail item loss in different curriculums (column 3),our proposed curriculum can bring a two-stage decent for both thetraining and validation loss</li><li><strong>When the model is trained based on only head/tail items, thevalidation performance for the other part of items decreases</strong>.The different changes of head and tail loss indicate the largevariations between head and tail items</li><li>It is easily to get validation loss increases if the model istrained purely based on head/tail items, as shown in first column of thefirst two rows</li></ol></blockquote><figure><img data-src="https://wulc.me/imgs/DualTransfer_CL_compare.jpg"alt="CL compare" /><figcaption aria-hidden="true">CL compare</figcaption></figure><p>第四个问题是对学习出来的 embedding 进行可视化，主要想说明通过 paper的方法学到的方法在可视化上后区分性也比较强，不过只做了两个 case分析，数据有限，这里就不贴出来了</p><h2 id="self-supervised-learning-framework">Self-supervised LearningFramework</h2><p>这个方法来自 google 的另一篇 paper <ahref="https://arxiv.org/abs/2110.04596">Self-supervised Learning forLarge-scale Item Recommendations</a>, 也是在解决 item的长尾问题，提升的点也主要在 representation learning 上，如 paper描述所示</p><blockquote><p>The framework is designed to tackle the label sparsity problem bylearning better latent relationship of item features. Specifically, SSLimproves item representation learning as well as serving as additionalregularization to improve generalization. Furthermore, we propose anovel data augmentation method that utilizes feature correlations withinthe proposed framework.</p></blockquote><h3 id="ssl-framework">SSL Framework</h3><p>paper 提出的总体的 framework如下图所示，基本符号的含义都在图片下方的注释里，</p><!-- ![ssl framework][13] --><p><img data-src="https://wulc.me/imgs/SelfSupervisedLearningFramework.jpg" height="50%" width="50%"></p><p>而上图中的 <span class="math inline">\(x_i\)</span>、<spanclass="math inline">\(x_j\)</span> 表示训练时一个 batch中的两条样本(推荐中的样本往往有三种含义，query/item/query-itempair，paper 里特指的是item)，这里的核心思想是<strong>同一条样本经过不同的变换后的representation 应该还是相似的，不同的样本则相反</strong></p><p>因此，通过 <span class="math inline">\(h, g, \mathcal{H},\mathcal{G}\)</span> 得到的 representation 中，<spanclass="math inline">\((z_i, z_i^{&#39;})\)</span> 是正例，而 <spanclass="math inline">\((z_i, z_j^{&#39;})\)</span>是负例，因此，对于一个包含 <span class="math inline">\(N\)</span>条样本的 batch 中，第 <span class="math inline">\(i\)</span> 条样本的self supervised 的 loss 形式如下</p><p><span class="math display">\[\mathcal{L}_{self}(x_i) = -\log\frac{\exp(s(z_i, z_i^{&#39;})/\tau)}{\sum_{j=1}^{N}\exp(s(z_i,z_j^{&#39;})/\tau)}\]</span></p><p>上面公式中的 <span class="math inline">\(\tau\)</span>为一个超参(softmax temperature),<span class="math inline">\(s(z_i,z_j^{&#39;})\)</span> 为两个 embedding 的 cosin 相似性，即 <spanclass="math inline">\(s(z_i, z_j^{&#39;})=&lt; z_i,z_j^{&#39;}&gt;/(||z_i|| \cdot ||z_j^{&#39;}||)\)</span></p><p>总体的 batch 内的 self supervised loss 为</p><p><span class="math display">\[\mathcal{L}_{self}(\lbrace x_i \rbrace;\mathcal{H}, \mathcal{G}) = - \frac{1}{N} \sum_{i=1}^{N} \log\frac{\exp(s(z_i, z_i^{&#39;})/\tau)}{\sum_{j=1}^{N}\exp(s(z_i,z_j^{&#39;})/\tau)}\]</span></p><p>得到 embedding 的两个 emcoder： <spanclass="math inline">\(\mathcal{H}\)</span> 和 <spanclass="math inline">\(\mathcal{G}\)</span>，在 paper中是共享参数的(这部分在后面讲模型结构时也会提及)</p><p>而如果两种 data augmentation 方法 <spanclass="math inline">\(h\)</span> 和 <spanclass="math inline">\(g\)</span> 也是相同的话，上面的 <spanclass="math inline">\(\mathcal{L}_{self}(\lbrace x_i \rbrace;\mathcal{H}, \mathcal{G})\)</span>会退化成如下形式，此时损失函数的目标是不同样本的相似性 <spanclass="math inline">\(s(z_i, z_j^{&#39;})\)</span> 尽可能小</p><p><span class="math display">\[-\frac{1}{N} \sum_{i=1}^{N} \log\frac{\exp(1/\tau)}{ \exp(1/\tau) + \sum_{j \ne i}\exp(s(z_i,z_j^{&#39;})/\tau)}\]</span></p><h3 id="two-stage-data-augmentation">two-stage data augmentation</h3><p>这里主要讲上面框架提到的两种 data augmentation 方法： <spanclass="math inline">\(h\)</span> 和 <spanclass="math inline">\(g\)</span> ，paper 称这个方法的关键在于：<strong>Agood transformation and data augmentation should make minimal amount ofassumptions on the data such that it can be generally applicable to alarge variety of tasks and models</strong>.</p><p>paper 里采用的方法则是 mask, 这里借鉴了 bert 的思想，但是这里没有sequence 的概念，因此这里 mask 掉的是 item feature，实际使用的是一个two-stage 的方法，即 masking + dropout, 两个方法主要操作如下</p><blockquote><p><strong>Masking</strong>. Apply a masking pattern on the set of itemfeatures. We use a <strong>default embedding</strong> in the input layerto represent the features that are masked. <strong>Dropout</strong>.Forcategorical features with <strong>multiple values,we drop out each valuewith a certain probability</strong>. It further reduces inputinformation and increase the hardness of SSL task.</p></blockquote><p>至于具体的 mask 方法，paper 里没有采用随机mask，而是基于特征之间的互信息(<ahref="https://en.wikipedia.org/wiki/Mutual_information">mutualinformation</a>)来进行 mask，核心思想是 <strong>mask掉相关性较强的特征</strong>，paper 这样做的原因是<code>the SSL contrastive learning task may exploit the shortcut of highly correlated features between the two augmented examples, making the SSL task too easy</code></p><p>具体的方法的方法是每次每次随机选择一个 feature <spanclass="math inline">\(f_{seed}\)</span>，通过预先计算好的互信息选择与这个feature 最相关的 <span class="math inline">\(k/2\)</span> 个feature，最终 mask 掉的是这 <span class="math inline">\(k/2 + 1\)</span>个 feature</p><h3 id="training-serving-1">training &amp; serving</h3><p>前面的 self supervised loss（ <spanclass="math inline">\(\mathcal{L}_{self}(\lbrace x_i\rbrace)\)</span>）只是一个辅助的 loss,</p><p>而主任务的 loss 是计算 query-item 的 loss，paper 这里采用的是 batchsoftmax loss，形式跟self supervised loss其实是一样的，只是计算相似性从item-item 变为了 query-item，具体形式如下</p><p><span class="math display">\[\mathcal{L}_{main} = -\frac{1}{N}\sum_{i=1}^{N} \log \frac{\exp(s(q_i,x_i)/\tau)}{\sum_{j=1}^{N}\exp(s(q_i, x_j)/\tau)}\]</span></p><p>则总体的 loss 为</p><p><span class="math display">\[\mathcal{L} = \mathcal{L}_{main} +\alpha \mathcal{L}_{self}\]</span></p><p>则最终的模型如下所示，注意这里的 3 个 item twoer 的参数是共享的</p><figure><img data-src="https://wulc.me/imgs/SelfSupervisedTraining.jpg"alt="train" /><figcaption aria-hidden="true">train</figcaption></figure><p>至于 serving，由于只是加了一个 auxiliary loss，所以按正常预估即可</p><h3 id="experiment-1">experiment</h3><p>实验主要回答了如下 4 个问题</p><blockquote><p>RQ1: Does the proposed SSL Framework improve deep models forrecommendations?</p><p>RQ2:SSL is designed to improve primary supervised task throughintroduced SSL task on unlabeled examples. What is the impact of theamount of training data on the improvement from SSL?</p><p>RQ3: How do the SSL parameters, i.e., loss multiplier <spanclass="math inline">\(\alpha\)</span> and dropout rate in dataaugmentation, affect model quality?</p><p>RQ4: How does RFM perform compared to CFM? What is the benefit ofleveraging feature correlations in data augmentation?</p></blockquote><p>RQ1，通过与其他 3 个 baseline 进行了比较，采用了 2个公开数据，评估指标是 MAP@10/50 和 Recall@10/50, 跟前一篇 paper一样，做了总体 item、head item 和 tail item 各自的评估</p><p>RQ2 主要回答数据量对 SSL的影响，结论是数据量越多，效果越好，感觉这个结论比较符合直觉，不知道paper 为什么要单独拎出来说</p><p>RQ3 主要回答 <span class="math inline">\(\alpha\)</span>大小对效果的影响，paper 里对比 spread-out regularization loss 和 paper提出的 self supervised loss，结论是取相同的值时均是 self supervised loss效果更好，关于 <a href="https://arxiv.org/pdf/1708.06320.pdf">spread-outregularization loss</a> 可参考这篇 paper，也是一种 constrasiveloss，但是没有 data augmentation</p><p>RQ4 主要回答随机 mask 的方法(RFM) 和基于相关性 mask的方法(CFM)哪种效果更好，结论是CFM在四项指标上效果均优于 RFM</p><p>此外，paper 还补充了在线 ab 实验，结论也是比较显著的</p><h2 id="小结">小结</h2><p>本文主要介绍了从模型层面缓解长尾问题的两篇 paper，两篇 paper的核心思想都是要更好地学习到长尾 item 的 representation</p><p>第一篇提出了一个 dual transfer framework(model-level + item-level),通过 2 个模型分别建模 head item 和 tail item，在 model-level 令 tailitem 的模型参数往 head item 的模型学习，而在 item-level 通过 curriculumlearning 组织样本进模型的顺序，serving阶段需要用两个模型的预估分融合</p><p>第二篇 paper 则提出了 self-supervised learning framework, 通过in-batch 的 data augmentation 方法(mask + dropout)，增加一个 auxiliaryloss，其目标是同一个 item 经过变换后的 embedding 应该是相似的，不同 item的则相反；离线和在线的实验都验证了有效性。</p><p>笔者感觉实际业界中，第一种方法的成本要高于第二种，而第一种方法没有做在线的ab 实验不知道具体在线效果，且第二种方法这种通过 in-batch样本来构造新的样本对的 self-supervised learning，普适性会更好</p><p>除了推荐领域的，CV 领域也有一篇关于长尾问题的综述，<ahref="https://arxiv.org/abs/2110.04596">Deep Long-Tailed Learning: ASurvey</a>，总体的方法论会更全，思路也涵盖了上面说的两篇 paper，但是 cv跟 recommendation 还是有不少差异的(比如 recommendation 的 item 数往往比cv 的要多得多)，具体在业务的应用也不确定，这里就不详细展开了。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;长尾问题在推荐/广告系统是一个较为常见的问题(这里主要针对 item
的长尾)，原因可能比较多，笔者理解的主要原因是由于系统存在 feedback
loop(即训练数据由模型产生，同时又会被模型用于训练)
的特性，在没有外部干预的情况下，马太效应会天然导致头部效应的现象比较严重，少部分的
item 主导了整个系统。&lt;/p&gt;
&lt;p&gt;比如说推荐系统中，很多视频/文章并没有展示机会，在训练集中压根没出现过，高热的视频/文章在不同的用户中排序都比较靠前，进而得到多次被推荐的机会；在广告系统中，部分计划的消耗会特别高，而一些计划压根投不出去；这导致了用户或者广告主体验不佳，而这种现象往往也会被归为生态问题。&lt;/p&gt;
&lt;p&gt;既然没有干预时，系统天然的特性导致了头部效应(或者说二八效应)比较严重，那强行干预系统的分布能不能改变这个问题？答案是可以的，而且目前绝大部分的方法都是在做这一类事情，常用手段往往有
2 种&lt;/p&gt;
&lt;p&gt;（1）策略层面，根据系统和业务特性设计规则，比如说对长尾的 item
有特定的扶持，强行让这些 item 能触达到更多的用户
（2）模型层面，&lt;strong&gt;核心思想就是让模型能更好地学习到 long tail item
的 representation&lt;/strong&gt;，因为这个问题的根本原因就是 long tail item
的样本过少，进而导致模型学习的不好；而具体的手段比较多，这部分会在后面详细介绍。&lt;/p&gt;
&lt;p&gt;这篇文章主要介绍的几篇
paper都是模型层面的，因为策略层面的往往需要根据实际业务需求来拍一些规则，模型层面的一些方法更为通用。&lt;/p&gt;</summary>
    
    
    
    <category term="计算广告" scheme="https://wulc.me/categories/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    
    <category term="计算广告" scheme="https://wulc.me/tags/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    <category term="机器学习" scheme="https://wulc.me/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>A Hybrid Bandit Model with Visual Priors for Creative Ranking in Display Advertising</title>
    <link href="https://wulc.me/2022/03/05/A%20Hybrid%20Bandit%20Model%20with%20Visual%20Priors%20for%20Creative%20Ranking%20in%20Display%20Advertising/"/>
    <id>https://wulc.me/2022/03/05/A%20Hybrid%20Bandit%20Model%20with%20Visual%20Priors%20for%20Creative%20Ranking%20in%20Display%20Advertising/</id>
    <published>2022-03-05T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.220Z</updated>
    
    <content type="html"><![CDATA[<p>之前的文章 <ahref="https://wulc.me/2022/02/01/Dynamic%20Creative%20Optimization%20in%20Online%20Display%20Advertising/">DynamicCreative Optimization in Online DisplayAdvertising</a>中提到，广告创意往往可分为创意生成、创意优选和创意投放三大块，本文主要讲创意优选这部分的一些做法，这个过程一般会涉及到E&amp;E 的过程。</p><p>本文的主要内容是选自阿里发表的一篇 paper：<ahref="https://arxiv.org/abs/2102.04033">A Hybrid Bandit Model withVisual Priors for Creative Ranking in Display Advertising</a>，paper通过 list-wise的训练方式达到对同一计划下的候选创意进行排序(即优选)的目标；list-wise可以算作 Exploitation 部分，paper 还通过了一个 bandit model 达到Exploration的目的，总体的做法比较合理，也在业界实际场景验证了有效性，值得一看。</p><span id="more"></span><p>paper 里提出的方法主要分为两大模块：VAM(visual-aware ranking model)和 HBM(hybrid bandit model), 总体的模块图如下所示，VAM 即上面提到的基于list-wise 优选做 exploitation 模块，HBM 则是基于 badnit model 做exploration 模块，下面也主要从这两个模块进行介绍。</p><figure><img data-src="https://wulc.me/imgs/VAM_HBM.jpg" alt="architecture" /><figcaption aria-hidden="true">architecture</figcaption></figure><h2 id="vam">VAM</h2><h3 id="list-wise-loss">list-wise loss</h3><p>list-wise 是 learning to rank 里一种建模方式，另外两种分别是point-wise 和 pair-wise，常见的 ctr/cvr 预估都是采用 point-wise的方式；</p><p>关于这几种建模方式可参考下面两篇 paper，两篇都是 Microsoft 发表的paper，第一篇讲了 point-wise -&gt; pair-wise 的过程, 第二篇讲了pair-wise 到 list-wise 的过程</p><ul><li><ahref="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2010-82.pdf">FromRankNet to LambdaRank to LambdaMART: An Overview</a></li><li><ahref="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/tr-2007-40.pdf">Learningto Rank: From Pairwise Approach to Listwise Approach</a></li></ul><p>VAM 采用的 list-wise loss 即是第二篇 paper 中的提出的loss，其流程如下图所示，更详细的推导可参考上面第二篇 paper</p><!-- ![listnet algorithm][6] --><p><img data-src="https://wulc.me/imgs/ListNetAlgorithm.jpg" height="50%" width="50%"></p><h3 id="vam-loss">VAM loss</h3><p>回到 VAM，上图的 query 相当于商品(product)，而 list 则是每个 product对应的所有创意(一个 product 往往会有多个候选的创意)</p><p>因此，list 中的每个 item 的 prediction <spanclass="math inline">\(p_{m}^{n}\)</span>和 ground truth <spanclass="math inline">\(y_{rank}(C_m^n)\)</span> 表示如下,每个符号含义可参考最上面的总体框架图右上角</p><p><span class="math display">\[p_{m}^{n} =\frac{\exp(s_m^n)}{\sum_{i=1}^{M}\exp(s_i^n)}\]</span></p><p><span class="math display">\[y_{rank}(C_m^n) = \frac{\exp(CTR(C_m^n),T) }{\sum_{i=1}^{M}\exp(\exp(CTR(C_i^n), T)}\]</span></p><p><span class="math inline">\(y_{rannk}(C_m^n)\)</span> 中的 <spanclass="math inline">\(T\)</span> 的作用是<code>adjust the scale of the value so that make the probability of top1 sample close to 1</code>，则对于第<span class="math inline">\(n\)</span> 个 product, 其 list-wise loss如下所示</p><p><spanclass="math display">\[L_{rank}^{n}=-\sum_{m}y_{rank}(C_m^n)\log(p_{m}^{n})\]</span></p><p>除了常规的 list-wise loss, paper 里还添加了一项 point-wise 的auxiliary regression loss，其含义也比较直观，就是让 VAM 的 prediction尽可能接近其真实的 CTR 值，其表示如下</p><p><span class="math display">\[L_{reg}^{n}=\sum_{m} ||CTR(C_m^n) -s_m^n||_{2}\]</span></p><p>根据原文的描述<strong><code>making the outputs close to the real CTRs will significantly stabilize the bandit learning procedure</code></strong>，其作用是让后续的HBM 训练更加稳定，则第 <span class="math inline">\(n\)</span> 个 list的总体 loss 如下所示（实验中 <span class="math inline">\(\gamma\)</span>= 0.5）</p><p><span class="math display">\[L^{n} = L_{rank}^{n} + \gammaL_{reg}^{n}\]</span></p><h3 id="noise-mitigation">noise mitigation</h3><p>这里的 noise mitigation 指的是部分创意的 impression会比较少，统计的后验 CTR 波动性较大(极端的比如只曝光一次)，</p><p>一个粗暴的方法是对 impression 卡个阈值，小于阈值的 item就不作为训练数据，但这样可能会导致训练的数据量过少，paper 里采用了如下 2种方法</p><p>第一种方法是label smoothing, 也是这篇 paper 提出的方法 <ahref="http://www.cs.cmu.edu/~xuerui/papers/ctr.pdf">Click-Through RateEstimation for Rare Events in OnlineAdvertising</a>，其思想是基于贝叶斯学派给点击数 clicks 和 CTR值整个先验分布，这样遇到极端值时也有分布约束，导致最终的值不会太离谱，</p><figure><img data-src="https://wulc.me/imgs/vam_label_smoothing.jpg"alt="label smoothing" /><figcaption aria-hidden="true">label smoothing</figcaption></figure><p>第二种方法是 weighted sampling，就是给点击数少的样本更小的权重，paper的做法是对点击数取了个 log 变换作为这个样本的 weight。</p><h2 id="hbm">HBM</h2><p>HBM 本质上是一个 <ahref="https://en.wikipedia.org/wiki/Bayesian_linear_regression#:~:text=In%20statistics,%20Bayesian%20linear%20regression,the%20context%20of%20Bayesian%20inference.">BayesianLinearRegression</a>，从名字大概就能猜测，这个是贝叶斯学派的方法，即认为模型参数是服从一个分布，通过从分布里采样达到exploration 的目的，其推导过程如下</p><p>假设线上的数据按照如下方式产生, <spanclass="math inline">\(y\)</span> 表示是否点击，<spanclass="math inline">\(f^T\)</span> 表示通过 VAM 抽取出来的 visualrepresentation, <span class="math inline">\(\widetilde{w}\)</span> 和<span class="math inline">\(\epsilon\)</span> 则是模型的参数</p><p><span class="math display">\[y = f^T\widetilde{w} +\epsilon\]</span></p><p>paper 里将 <span class="math inline">\(\epsilon\)</span>先验分布假设为一个正态分布即 <span class="math inline">\(\epsilon\thicksim N(0, \sigma^2)\)</span>, 同样将 <spanclass="math inline">\(\widetilde{w}|\sigma^2\)</span>假设为一个正态分布，两者互为共轭</p><p><span class="math display">\[\sigma^2 \thicksim IG(a, b)\]</span></p><p><span class="math display">\[\widetilde{w}|\sigma^2 \thicksim N(\mu,\epsilon^2 \Sigma^{-1}) \]</span></p><p>参考上面 wiki 的推导过程，总体模型的 training 和 serving过程如下所示</p><figure><img data-src="https://wulc.me/imgs/HBM_training_serving.jpg"alt="hbm_train_serving" /><figcaption aria-hidden="true">hbm_train_serving</figcaption></figure><p>公式 18 可以认为是 training 过程(对于贝叶斯方法，有个特定的名字<ahref="https://en.wikipedia.org/wiki/Bayesian_inference">Bayesianinference</a>)，在贝叶斯的方法中，更新模型就是更新假定的 distribution中的各个参数，本例中就是上面两个分布中的 <spanclass="math inline">\(a\)</span>、<spanclass="math inline">\(b\)</span>、<spanclass="math inline">\(\mu\)</span>、<spanclass="math inline">\(\Sigma^{-1}\)</span>,这里使用的是解析法，但是很多问题解析法是无法解决的，因此常常会利用 MonteCarlo sampling 一类方法，</p><p>而 serving 则是从 training 得到的分布中抽样得到 <spanclass="math inline">\(w(t)\)</span>, 计算最终的 score，</p><p>上面的计算 score 的方法是第 <span class="math inline">\(n\)</span> 个product 下所有 creative 共用一套参数 <spanclass="math inline">\(w^n\)</span>, paper 还提出了针对每个 creative也应该有一套参数，即针对第 <span class="math inline">\(n\)</span> 个product 下的第 <span class="math inline">\(m\)</span> 个creative，计算的 score 应该是</p><p><span class="math display">\[y_m^n = {f_m^n}^{T}w^n +{f_m^n}^{T}w_m^n\]</span></p><p>paper 这样做的原因是</p><blockquote><p>This simple linear assumption works well for small datasets, butbecomes inferior when dealing with industrial data. For example, brightand vivid colors will be more attractive for women’s top while concisecolors are more proper for 3C digital accessories. In addition to thisproduct-wise characteristic, a cre- ative may contain a unique designedattribute that is not expressed by the shared weights. Hence, it ishelpful to have weights that have both shared and non-sharedcomponents.</p></blockquote><p>所以 paper 根据曝光量算对 score 算了一个权重 <spanclass="math inline">\(\lambda\)</span>, 其计算方法如下</p><p><span class="math display">\[\lambda =(1+e^{\frac{-impression(I^n)+\theta_2}{\theta_1}})^{-1}\]</span></p><p>则最终的 socre 如下</p><p><span class="math display">\[y_m^n = (1-\lambda){f_m^n}^{T}w^n +\lambda{f_m^n}^{T}w_m^n\]</span></p><p>这里的思想是在某个 product 的曝光量充足时，更加相信其 product-wise 的score，反之则更相信 creative-wise 的 socre</p><p><strong>但是笔者对这里的做法存疑，笔者认为这个 <spanclass="math inline">\(\lambda\)</span> 参数应该做在 creative 粒度，当creative 粒度的数据充足时，应该更相信creative-wise 的 socre，反之更相信product-wise 的 score。</strong></p><p><strong>因为如果每个 creative 都有足够的后验数据来进行训练，那做到creative 粒度的个性化参数效果上应该会是最好的，但是问题是现实是很多creative 的后验数据非常系数甚至是没有后验数据的，这个时候采用product-wise 的 score 相当于是做了一个 clustering，笔者认为这样更加 makesense</strong></p><p>因此，HBM 的算法流程如下图所示</p><!-- ![HBM_algo][13] --><p><img data-src="https://wulc.me/imgs/HybridBanditModel.jpg" height="50%" width="50%"></p><h2 id="实验">实验</h2><p>paper 里采用了 2 个评估指标：Simulated CTR(sCTR) 和 Cumulativeregret, 前者模拟 online learning 过程，后者则是评估 bandit model，两者计算方法如下，但是好像这两个指标不是非常通用？</p><!-- ![sCTR][14] --><p><img data-src="https://wulc.me/imgs/VAM_HBM_sCTR.jpg" height="50%" width="50%"></p><!-- ![regret][15] --><p><img data-src="https://wulc.me/imgs/VAM_HBM_regret.jpg" height="50%" width="50%"></p><p>采用的评估数据集有 2个，一个是自建的，另一个是公开数据集，效果上自然也是 paper提出的效果最好，但是 paper 没有做在线的 ab实验，逼近离线指标跟线上的效果还是有 diff 的</p><h2 id="小结">小结</h2><p>总的来说，这篇 paper 提出一种 creative selection 的方法，由 VAM + HBM组成，笔者认为有以下几点值得学习</p><ol type="1"><li>VAM 利用投后数据(ctr), 通过 list-wise 方法学习出 creative 的 visualrepresentation</li><li>HBM 利用 VAM 的 visual representation 通过 bandit model，来实现exploration 部分，同时考虑了 product-wise 和 creative-wise 建模和预估score 的融合</li></ol><p>但是也有以下几点笔者是存疑的</p><ol type="1"><li>product-wise 和 creative-wise 的分数时，<spanclass="math inline">\(\lambda\)</span>参数只考虑到 product-wise的信息，没能很好体现 creative-wise的权重，具体原因上面说了</li><li>广告系统通常是召回+精排的环节，精排往往是 creative粒度的，上面提出的系统未必能完整地融入现有的广告系统，倒是 VAM训练得到的 visual representation 作为精排模型的一个 feature是一种可能的方法</li><li>VAM 已经可以对候选创意做优选了，为什么还需要 HBM 来做exploration？或者说 exploration 是为了拿什么收益?根据笔者的经验，在广告系统中 exploration 意味着破坏原来系统 feedbackloop所形成的分布，这往往会破坏系统由于马太效应形成的稳态，往往会造成收入的下降，相对应兑换的是一些生态指标或者信仰指标的提升。</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;之前的文章 &lt;a
href=&quot;https://wulc.me/2022/02/01/Dynamic%20Creative%20Optimization%20in%20Online%20Display%20Advertising/&quot;&gt;Dynamic
Creative Optimization in Online Display
Advertising&lt;/a&gt;中提到，广告创意往往可分为创意生成、创意优选和创意投放三大块，本文主要讲创意优选这部分的一些做法，这个过程一般会涉及到
E&amp;amp;E 的过程。&lt;/p&gt;
&lt;p&gt;本文的主要内容是选自阿里发表的一篇 paper：&lt;a
href=&quot;https://arxiv.org/abs/2102.04033&quot;&gt;A Hybrid Bandit Model with
Visual Priors for Creative Ranking in Display Advertising&lt;/a&gt;，paper
通过 list-wise
的训练方式达到对同一计划下的候选创意进行排序(即优选)的目标；list-wise
可以算作 Exploitation 部分，paper 还通过了一个 bandit model 达到
Exploration
的目的，总体的做法比较合理，也在业界实际场景验证了有效性，值得一看。&lt;/p&gt;</summary>
    
    
    
    <category term="计算广告" scheme="https://wulc.me/categories/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    
    <category term="计算广告" scheme="https://wulc.me/tags/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    <category term="机器学习" scheme="https://wulc.me/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Dynamic Creative Optimization in Online Display Advertising</title>
    <link href="https://wulc.me/2022/02/01/Dynamic%20Creative%20Optimization%20in%20Online%20Display%20Advertising/"/>
    <id>https://wulc.me/2022/02/01/Dynamic%20Creative%20Optimization%20in%20Online%20Display%20Advertising/</id>
    <published>2022-02-01T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.198Z</updated>
    
    <content type="html"><![CDATA[<p>最近在研究广告创意相关内容,笔者根据当前的调研，将这个领域划分为<strong>创意生成、创意优选和创意投放</strong>三大块，每一块的具体职责如下</p><ul><li>创意生成：利用素材(标题、图片、视频、落地页等)生成候选创意(用户看到的广告)</li><li>创意优选：从计划的候选创意(一个计划下的候选往往有多个)中选择 topk个用于投放</li><li>创意投放：将优选出来的创意投放至线上</li></ul><p>严格来说，这三部分其实也并非泾渭分明，比如前两部分可以统一理解为创意生成(从最原始的素材生成最终要投放的创意)，后两部分可以统一理解为创意投放过程(从候选中选出来并投放至线上)。</p><p>本文主要侧重讲述与创意投放相关的一篇 paper,而且偏向于上面提到第三块内容(没有基于 E&amp;E 的优选过程)，paper的标题是 <ahref="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3863663">DynamicCreative Optimization in Online Display Advertising</a>，这篇 paper将素材在线投放问题建模成一个二部图匹配问题，并提供了严格求解的方法和在线的近似求解方法。更重要的是，这种建模的方法不局限于创意领域，能应用到更多投放场景下。</p><span id="more"></span><h2 id="问题建模">问题建模</h2><p>online advertising 的绝大多数方法，如targeting、ranking、bidding等，本质上都是在解决在线分配问题，即让合适的广告分发给合适用户，从而使得收入最大化（同时需要考虑生态、用户体验等），因此也可以从分配的角度去构造出一个如下简单二部图的形式，左边是user，右边则是具体的广告(在这里为创意),连接的边表示这个用户访问了这个广告/创意，边的权重可根据具体的业务目标决定</p><figure><img data-src="https://wulc.me/imgs/dco_graph.jpg" alt="dco_graph" /><figcaption aria-hidden="true">dco_graph</figcaption></figure><p>基于上图的二部图，paper 里将问题建模成如下的最优化问题</p><figure><img data-src="https://wulc.me/imgs/modelling_dco.jpg" alt="modelling" /><figcaption aria-hidden="true">modelling</figcaption></figure><p>符号含义如下</p><ul><li><span class="math inline">\(u\)</span>: user 的 index</li><li><span class="math inline">\(i\)</span>: item 的 index, 这里的 item指的是创意(creative)</li><li><span class="math inline">\(r_{iu}\)</span>: 第 <spanclass="math inline">\(u\)</span> 个 user 访问了第 <spanclass="math inline">\(i\)</span> 个 item 的revenue，比如消耗/点击等，即上图中的边权</li><li><span class="math inline">\(T_u\)</span>: 第 <spanclass="math inline">\(u\)</span> 个 user 的总访问次数</li><li><span class="math inline">\(x_{iu}\)</span>: 第 <spanclass="math inline">\(u\)</span> 个 user 访问了第 <spanclass="math inline">\(i\)</span> 个 item 的次数</li><li><span class="math inline">\(\underline{k_{iu}}\)</span>: 第 <spanclass="math inline">\(u\)</span> 个 user 访问了第 <spanclass="math inline">\(i\)</span> 个 item 的次数的下限</li><li><span class="math inline">\(\overline{k_{iu}}\)</span>: 第 <spanclass="math inline">\(u\)</span> 个 user 访问了第 <spanclass="math inline">\(i\)</span> 个 item 的次数的上限</li><li><span class="math inline">\(y_{iu}\)</span>: 第 <spanclass="math inline">\(u\)</span> 个 user 是否访问了第 <spanclass="math inline">\(i\)</span> 个 item</li><li><span class="math inline">\(l_i\)</span>: 第 <spanclass="math inline">\(i\)</span> 个 item触达的不同用户数的下限(防止只给一个用户出广告)</li></ul><p>上面的最优化问题中，(1b)到(1d) 中的三个约束，对应的是如下三个约束</p><blockquote><p>(1b) <strong>ad fatigue constraint</strong>, which aims to help inavoiding customers becoming fatigued by seeing a product too many times.This constraint says that a particular item <spanclass="math inline">\(i\)</span> can be shown at most <spanclass="math inline">\(\overline{k_{iu}}\)</span> times to user <spanclass="math inline">\(u\)</span>. To calibrate ad fatigue, <strong>thisparameter can be set using historical data showing when customers stopengaging with ads</strong>. (1c) <strong>ad retargetingconstraint</strong>, which focuses on showing products to customers thathave seen or searched for them before. In this constraint, we say that aparticular item <span class="math inline">\(i\)</span> has to be shownat least <span class="math inline">\(\underline{k_{iu}}\)</span> timesto user <span class="math inline">\(u\)</span>. To retarget an ad,<strong>this parameter can be set postive for items that the user sawjust before the ad campaign is planned</strong>. (1d) <strong>userdiversity constraint</strong>, which addresses the requirement thatadvertisers want to increase reach and purchasing by showing theirproducts to many different customers. This constraints says that atleast <span class="math inline">\(l_i\)</span> users have to see aparticular item <span class="math inline">\(i\)</span>. These parametersare specifically set by the advertiser.</p></blockquote><h2 id="问题求解">问题求解</h2><p>这里问题的求解分为了离线和在线两部分，区别是离线时是以上帝视角看这个问题，即能够获取用户的访问次数 <spanclass="math inline">\(T_u\)</span>，但是在线时则是不知道的。因此，离线可采用严格的求解方法，在线则只能采用近似的求解方法。</p><h3 id="离线求解">离线求解</h3><p>假如能够获取 <spanclass="math inline">\(T_u\)</span>（即用户当天的访问次数），就能够采用来求解上面的最优化问题，这类问题通常会被变换成一个<ahref="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E6%B5%81">网络流</a>问题来求解，关于网络流更详细的介绍可以参考<a href="https://zhuanlan.zhihu.com/p/122375531">算法学习笔记(28):网络流</a></p><p>而上面建模出来的问题，可以被转变成网络流中的最小费用最大流问题(<ahref="https://en.wikipedia.org/wiki/Minimum-cost_flow_problem">minimum-costflow problem</a>), 这部分更详细的描述也可参考 <ahref="https://zhuanlan.zhihu.com/p/127046673">算法学习笔记(31):最小费用最大流</a></p><p>因此，基于最小费用最大流的概念，可以构造出如下的网络流</p><figure><img data-src="https://wulc.me/imgs/dco_flow_problem.jpg" alt="dco graph" /><figcaption aria-hidden="true">dco graph</figcaption></figure><p>上面的网络流中有 2 个 user 和 2 个item，理解以下几点就能够理解上图的含义了</p><ul><li>每条边的三个参数的含义分别是 <strong>(流量上限, 流量下限,费用)</strong></li><li>从 source 出发到第 <span class="math inline">\(u\)</span> 个 user的流量上限为 <spanclass="math inline">\(T_u\)</span>(即用户当前访问的次数)</li><li>每个 user 访问每个 item 的次数的上限（<strong>ad fatigueconstraint</strong>）和下限（<strong>ad retargetingconstraint</strong>）的约束体现在<code>users-&gt;item-copies</code>的边上</li><li><code>item-copies-&gt;items</code>的连边是为了满足上面的<strong>user diversityconstraint</strong>，即保证访问第 <span class="math inline">\(i\)</span>个 item 的不同用户的数量不小于 <spanclass="math inline">\(l_i\)</span></li><li><code>item-&gt;sink</code> 中，流量上限为 <spanclass="math inline">\(m\)</span>, 即访问第 <spanclass="math inline">\(i\)</span> 个 item的不同用户数的上限是总用户数</li></ul><p>此外，在构图中还需要考虑如下几个问题，paper里没有给明确的答案，也算比较 open的问题，需要针对不同的业务场景设计对应的技术方案了</p><p><strong>(1)边的权值(即上面说的费用的负值)的物理含义是什么？缺失的边的权值怎么计算？</strong><strong>(2)采用 id粒度过小可能导致整个图可能过大，进而导致图的求解比较困难，如果做clustering 要怎么做？</strong> <strong>(3)新 uid/item-id如何处理？</strong></p><h3 id="在线求解">在线求解</h3><p>上面的解法是离线解法，即能够拿到了用户当天的访问次数 <spanclass="math inline">\(T_u\)</span>,然后用严格的方法求解最优化问题，这个模式往往可以用来大致摸底方法的收益天花板（通过回放历史精排日志），但是在实际投放中，并不知道用户当天的访问次数<spanclass="math inline">\(T_u\)</span>(笔者附：如果用历史平均来近似，误差会有多大？)，因此在线需要提供一种近似最优的求解方法</p><h4 id="deterministic-algorithm">deterministic algorithm</h4><p>paper 指出了 <ahref="https://en.wikipedia.org/wiki/Deterministic_algorithm">deterministicalgorithm</a>（简单来说就是不会有 random操作，反例是启发式算法）对于在线问题表现效果很差，至于有多差，paper给了一些证明，这里略过过程，只给出其中一些核心概念和结论</p><p>paper 在这个过程中使用了 <ahref="https://en.wikipedia.org/wiki/Competitive_analysis_%28online_algorithm%29">competitiveratio</a>来衡量 deterministic算法的效果，这个指标主要用来描述极端情况下，online algorithm的效果相比于 offline 的有多差，引用这个<ahref="http://theory.stanford.edu/~trevisan/cs261/lecture17.pdf">讲义</a>里的定义如下</p><blockquote><p>The competitive ratio of an online algorithm for an optimizationproblem is simply the approximation ratio achieved by the algorithm,that is, the worst-case ratio between the cost of the solution found bythe algorithm and the cost of an optimal solution.</p></blockquote><p>有了 competitive ratio 的概念，paper 针对 deterministic algorithm给出了如下结论（证明的详细过程可以参考 paper 中的 4.1 小节)，即deterministic algorithm 的效果很差，哪怕给 reward 加了 bound</p><blockquote><p>Proposition 1. The competitive ratio of any deterministic algorithmfor the online DCO problem is arbitrarily small</p><p>Proposition 2. Suppose that the revenue associated to all item anduser pairs are bounded, that is, there exists an <spanclass="math inline">\(r\)</span> such that <spanclass="math inline">\(\underline{r} ≤ r_{iu} ≤ 1\)</span> for all items<span class="math inline">\(i\)</span> and users <spanclass="math inline">\(u\)</span>. In this case, the competitive ratio ofany deterministic algorithm for the online DCO problem is <spanclass="math inline">\(\underline{r}\)</span></p></blockquote><h4 id="deterministic-algorithm-with-assumption">deterministic algorithmwith assumption</h4><p>上面给出的结果中，没有任何的假设，因此在这个方法中加入了一个assumption：即用户 <span class="math inline">\(u\)</span> 每天至少有<span class="math inline">\(c_u\)</span> 次访问，paper 中引用了 IAB(<ahref="https://en.wikipedia.org/wiki/Interactive_Advertising_Bureau">InteractiveAdvertising Bureau</a> )的一个结论，认为这个数据是比较容易能得到的，paper 描述如下，</p><blockquote><p>Using historical data, advertisers can make accurate estimates aboutthe minimum number of times they expect a user to visit the platformduring the advertising period (Interactive Advertising Bureau 2020).</p></blockquote><p>但是 paper 中给出了这一结论的<ahref="https://www.iab.com/wp-content/uploads/2020/05/Consumer-Media-Usage-2019-through-April-2020.pdf">参考资料</a>中似乎只是一些统计数据的罗列，并未提及上面这个结论的推导过程。。。而从逻辑上讲，笔者猜测虽然用户<span class="math inline">\(u\)</span> 准确的访问次数 <spanclass="math inline">\(T_u\)</span> 比较难预测，但是这个访问次数的 lowerbound <span class="math inline">\(c_u\)</span>的难度也许会比较容易获得</p><p>在 <span class="math inline">\(c_u\)</span> 比较容易获得的 assumption下，paper 里给出了第一种在线算方法，总体算法流程如下</p><figure><img data-src="https://wulc.me/imgs/dco_online_algo1.jpg" alt="algo1" /><figcaption aria-hidden="true">algo1</figcaption></figure><p>其实跟 offline 的区别不大，就是用了 <spanclass="math inline">\(c_u\)</span> 替换了 <spanclass="math inline">\(T_u\)</span>,在线分配时优先满足约束，而满足了约束后，就可以在 ad fatigue 的约束下去拿highest revenue 的边</p><p>paper 里绕了一大圈才给出了上面的算法流程，给出了各种符号、lemma、proposition，但是跟最终的结论的关系又不是非常大，有点凑字数的感觉；而且比较核心的部分即<span class="math inline">\(c_u\)</span>是如何获取的则是基本没怎么提。。。</p><p>paper 里还给出了这个算法的 competitive ratio 的 lower bound是（证明过程可参考 paper，这里略过）</p><p><span class="math display">\[1-\frac{(\overline{r} -\underline{r})n_1}{\underline{r}(n_1+n_2)}\]</span></p><p>各个符号含义如下</p><ul><li><span class="math inline">\(n_1=\sum_{u=1}^{m} c_u\)</span>:即所有用户的最少访问次数之和</li><li><span class="math inline">\(n_2= T- n_1\)</span>: <spanclass="math inline">\(T\)</span> 是所有用户的实际访问次数之和</li><li><span class="math inline">\(\underline{r}=\min_{i=1 \dots n, u=1\dots m}r_{iu}\)</span>: 即所有 pair 的 revenue 的最小值</li><li><span class="math inline">\(\overline{r}=\max_{i=1 \dots n, u=1\dots m}r_{iu}\)</span>: 即所有 pair 的 revenue 的最大值</li></ul><h4 id="greedy-algorithm">greedy algorithm</h4><p>paper 里还提到到了另一种贪心的算法，其 assumption 是每个 item/user都有一个reserved revenue, 第 <span class="math inline">\(i\)</span> 个item 的 reserved revenue 记为 $ _i$, 第 <spanclass="math inline">\(u\)</span> 个 user 的 reserved revenue 记为 <spanclass="math inline">\(\beta_u\)</span>, 则有</p><p><span class="math display">\[r_{iu} = \alpha_i + \beta_u\]</span></p><p>基于这个假设，paper 里给了如下的 online algorithm，并且证明了这里的competitive ratio 能跟最优的一致</p><figure><img data-src="https://wulc.me/imgs/dco_online_algo2.jpg" alt="algo2" /><figcaption aria-hidden="true">algo2</figcaption></figure><p>但是笔者觉得这里的 assumption 有很大的问题，即假设了每个 item 对所有user 的 revenue 是一样的，这样显然不合理，因为正是每个 user的兴趣不同，才需要进行个性化的推荐，也是当前推荐/广告里各种算法和策略有效的原因，所以这里的算法笔者觉得可以看一下数学的原理，但是在实际应用并不现实</p><h2 id="小结">小结</h2><p>总的来说，这篇 paper将在线广告的分配建模成一个经典的二部图问题，提供了离线和在线的解法，并给出了一些理论证明，笔者觉得可以学习一下其中的思想，但是如果照搬paper 的方法在实际应用的话比较难</p><p>第一个 online algorithm 的问题在于 <spanclass="math inline">\(c_u\)</span> 的获取并没有给出具体的方法，第二个online algorithm 的问题在于本来的 assumption 就不合理</p><p>笔者认为利用用户 <span class="math inline">\(u\)</span>过去一段时间的访问次数来近似（或者通过预估的方式）作为其未来的访问次数<span class="math inline">\(T_u\)</span>是一种可行的方法，但是这个方法还需要解决如下的问题</p><p><strong>（1）如果求解出来某个 item 需要分配给某个 user，paper里说了是直接展示，但是在实际的系统中往往是“召回+精排”的结构，需要如何保证这个item 一定能被 user看到？或者说，实际中的系统往往已经有一套召回和精排的策略，怎么让这套新策略融入现有的系统中</strong></p><p><strong>（2）user-item边的权值的物理含义是什么？缺失的边的权值怎么计算？</strong></p><p><strong>（3）采用 id粒度过小可能导致整个图可能过大，进而导致图的求解比较困难，可以怎么做，如果做clustering 怎么保证两次聚类的结果差异性不大？</strong></p><p><strong>（4）新 uid/item-id 如何处理？</strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;最近在研究广告创意相关内容,
笔者根据当前的调研，将这个领域划分为&lt;strong&gt;创意生成、创意优选和创意投放&lt;/strong&gt;三大块，每一块的具体职责如下&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;创意生成：利用素材(标题、图片、视频、落地页等)生成候选创意(用户看到的广告)&lt;/li&gt;
&lt;li&gt;创意优选：从计划的候选创意(一个计划下的候选往往有多个)中选择 topk
个用于投放&lt;/li&gt;
&lt;li&gt;创意投放：将优选出来的创意投放至线上&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;严格来说，这三部分其实也并非泾渭分明，比如前两部分可以统一理解为创意生成(从最原始的素材生成最终要投放的创意)，后两部分可以统一理解为创意投放过程(从候选中选出来并投放至线上)。&lt;/p&gt;
&lt;p&gt;本文主要侧重讲述与创意投放相关的一篇 paper,
而且偏向于上面提到第三块内容(没有基于 E&amp;amp;E 的优选过程)，paper
的标题是 &lt;a
href=&quot;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3863663&quot;&gt;Dynamic
Creative Optimization in Online Display Advertising&lt;/a&gt;，这篇 paper
将素材在线投放问题建模成一个二部图匹配问题，并提供了严格求解的方法和在线的近似求解方法。更重要的是，这种建模的方法不局限于创意领域，能应用到更多投放场景下。&lt;/p&gt;</summary>
    
    
    
    <category term="计算广告" scheme="https://wulc.me/categories/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
    
    <category term="计算广告" scheme="https://wulc.me/tags/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A/"/>
    
  </entry>
  
  <entry>
    <title>2021 小结</title>
    <link href="https://wulc.me/2022/01/03/2021%E5%B0%8F%E7%BB%93/"/>
    <id>https://wulc.me/2022/01/03/2021%E5%B0%8F%E7%BB%93/</id>
    <published>2022-01-03T13:53:19.000Z</published>
    <updated>2023-07-16T15:28:28.183Z</updated>
    
    <content type="html"><![CDATA[<p>2022年如期而至，如果说上一年还是在犹豫是否要写年度总结，今年则是早有规划要写一下这一年的总结。因为笔者逐渐意识到，<strong>记录过去的自己是一件很有意义的事情</strong>，这个话题说大了可以上升到各种哲学领域，但对于笔者来说，最重要的意义是能看到过去的自己是一个什么样的人，如今有了什么样的变化，发生了什么事情让自己有了这样的变化，这种跨度一年的自我觉察还是很有意思的。</p><p>而比起 vlog等形式，笔者更倾向于用文字这种形式来记录，因为在写作过程中，会启动大脑的“慢系统”，能更细致地去回顾和组织过去发生的事情，正好趁着放假的时间去梳理这一年的各种事情。</p><span id="more"></span><h2 id="关于工作">关于工作</h2><p>今年在工作上主要推进的事情还是之前一直跟进的联邦学习的业务，这部分在去年的<a href="https://wulc.me/2021/01/02/2020%E5%B0%8F%E7%BB%93/">2020小结</a> 中也有提过，如果说去年还是在打造 showcase的阶段，今年则是将这部分业务规模化推广</p><p>规模化做的事情一定程度上是在减少边际成本，所以设计方案时会更多地考虑到方案的易用性和拓展性，最终也在两个比较重要的业务场景验证并上线了，其中一个业务场景针对的是中腰部的客户，另一个业务场景则是针对头部的客户，两者的技术能力、可利用的数据等差异较大，因此也设计了不同的方案来适配不同类型的客户。虽然现在描述起来似乎是轻描淡写，方案本质上也不复杂，但是因为项目的性质，合作涉及到两个公司，而且联系还比较紧密（比如说模型需要双方联合跨公网训练），所以在协作、沟通、debug等成本上是比较高的</p><p>在这个过程也踩了不少的坑，比如说前期设计出价公式时，只是基于业务表象进行设计，没有深入挖掘业务需求，加了一些不必要的约束，导致设计出来的公式并没有取得业务上最优效果；建模上由于转化时间非常长，业务上决定了数据分布有一定周期性，在周期转换的时候如果模型不及时更新，效果会变得很差；另外，也克服了工程上的一些挑战，比如说由于ranking 的过程涉及到和外部的机房的交互(类似 <ahref="https://zhuanlan.zhihu.com/p/125464058">rta</a>模式)，需要保证延迟上可用等</p><p>在这两个 launch后，联邦学习提供的基本方案基本能涵盖当前不同类型客户的需求了。而历时大概1 年半，笔者也算是经历了这个项目从 “<strong>脑暴 -&gt; 出方案 -&gt;拉客户 -&gt; 出 showcase -&gt; 平台化与规模化</strong>”的过程，在这个过程除了跟产品有较多讨论，与销售、法务等部门也有不少接触，也从更大的视角上窥探了商业系统运作的一隅。在联邦学习基本稳定后，为了寻找一些新的挑战，在内部进行了一次转岗，后续会探索一些与生态相关的事情,也算是一个新的旅途了(打个小广告，目前所在的大部门是巨量千川，字节闭环电商的变现部门，整个部门目前的业务增速还算比较快，也欢迎感兴趣的同学联系我了解)</p><p>另一个让我印象比较深刻的事情，则是在上一年总结里提到的多目标出价公式的推导，虽然离线和实验验证了有收益，但是由于种种原因，最终没上线；没想到今年在lr会上听到了非中国区的类似业务使用了不同的方法，但是推导出来的结果是一样的，最终也上线了，也算是进一步验证了这个方法的有效性~</p><p>另外，在这一年的工作里，无时无刻不觉得过去的自己非常的愚蠢：考虑问题不够周全、汇报没有重点、容易被情绪而不是结果驱动等，想起来都觉得当时的老板对自己是多么的包容；此外，由于业务发展非常快，所以不可避免地有很多调整，在这个过程中特别感谢遇到过的老板们，从他们身上学习到了很多东西，如技术判断力、团队管理能力、沟通能力等。</p><h2 id="关于学习">关于学习</h2><p>这部分要单独来讲述，是因为笔者慢慢在生活中体会到那句耳熟能详的“学习是一生的事情”是朴素而正确的道理，这里的学习不是狭义上的上课、背书、考试，而是更广义上的对不了解的东西逐渐熟悉的过程。这个过程起因往往是工作需要或者好奇心驱使，而且往往后者比前者更加容易且可持久，因为这个过程是滋养你的，而学习如果由这两个原因同时驱动，那无疑是非常难得的。如同乔帮主的05 年的<ahref="https://news.stanford.edu/2005/06/14/jobs-061505/">演讲</a>上说到的下面这段话</p><blockquote><p>You’ve got to find what you love. And that is as true for your workas it is for your lovers. Your work is going to fill a large part ofyour life, and the only way to be truly satisfied is to do what youbelieve is great work. And the only way to do great work is to love whatyou do. If you haven’t found it yet, keep looking. Don’t settle. As withall matters of the heart, you’ll know when you find it. And, like anygreat relationship, it just gets better and better as the years roll on.So keep looking until you find it. Don’t settle.</p></blockquote><p>幸运的是，目前的工作所在的领域还是我所感兴趣的，所以今年基于对当前工作的的一些粗浅了解写了这篇文章<ahref="https://wulc.me/2021/05/05/An%20Overview%20Of%20Ad%20System/">AnOverview Of An AdSystem</a>，从几个视角(技术、业务、产品)去介绍了对广告系统的一点理解，在这个过程中也算是将自己学习过的一些零碎知识串联起来了。后面没想到的是还有几位字节的同学看到并在内部IM 软件上联系到我，得知为自己写的文章同时对其他人起到一定帮助作用，也是比较欣慰了；除了技术，还发现了一门由产品经理讲授的课，总体听下来，也是让我从更多视角去了解去了解商业化这个事情，详见<ahref="https://wulc.me/2021/10/30/%E3%80%8A%E5%95%86%E4%B8%9A%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86%E7%9A%84%E5%AE%9E%E6%88%98%E4%BF%AE%E7%82%BC%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">《商业产品经理的实战修炼》学习笔记</a></p><p>除了与本职工作所需技能相关的学习,也特意去看了其他一些通用能力相关的教程和书籍，因为笔者渐渐意识到，思维方式和习惯对一个人的影响是巨大的，这些内容在知乎上也有不少相关的回答，而在这个过程中，笔者认为影响比较深刻且成体系的内容主要有以下2 部分，同时也写了相应的文章来记录</p><ul><li><ahref="https://wulc.me/2021/07/25/%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E5%BF%AB%E9%80%9F%E9%98%85%E8%AF%BB%E9%AB%98%E6%89%8B/">《如何成为快速阅读高手》</a>：这个是在找资料过程中找到的一个干货，从心态到方法，都给出了非常详细的指导，其中的摆正阅读心态那部分让笔者印象深刻</li><li><ahref="https://book.douban.com/subject/34793488/">《认知红利》</a>：这是知乎上一个高赞作者写的一本书，单纯讨论书的内容，对笔者的启发还是非常大的，全书有2部分内容，第一部分提供了更多视角去看待财富、自己和世界，第二部分则提供了具体的一些方法论，笔者针对这部分也分别写了阅读笔记，即<ahref="https://wulc.me/2021/08/22/%E3%80%8A%E8%AE%A4%E7%9F%A5%E7%BA%A2%E5%88%A9%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%281%29-%E6%A6%82%E5%BF%B5%E9%87%8D%E5%A1%91/">《认知红利》阅读笔记(1)-概念重塑</a>和<ahref="https://wulc.me/2021/10/05/%E3%80%8A%E8%AE%A4%E7%9F%A5%E7%BA%A2%E5%88%A9%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%282%29-%E5%A4%A7%E8%84%91%E5%8D%87%E7%BA%A7/">《认知红利》阅读笔记(2)-大脑升级</a></li></ul><p>在学完这些理论知识后，更深刻感受到了“为什么懂得那么多道理，依然过不好这一生”，因为<strong>知行合一实在是非常的难</strong>，也许在看书的时候会非常认可书里的道理，但是转头还是被习惯驱使着做事情；那怎么破？笔者当前觉得<strong>也许有效的方法是不断重温这些内容，加上刻意练习，最终形成习惯</strong></p><p>最后学习的一大部分内容则是投资了，虽然在上学那会就开始定投了指数基金，但是金额不大，都是小打小闹；而工作了一段时间，兜里有了少许可供支配的钱，对于我这种生活比较简单的人，一个比较好的去处便是投资了。</p><p>于是便开始较为系统性的学习投资相关的事宜，虽说是系统性，但是并没有啃那些大部头，因为笔者很清楚自己不是那种专职投资者，所以基本都是看一些通俗的文章，学习一些基本概念，后来发现了一门个人投资课，里面讲到的一些投资理念和方法特别适合我这种上班族，针对这部分也系统性地写了如下三篇笔记，细节这里不赘述了，其中影响比较深刻的观点是：<strong>投资是一场无限游戏</strong></p><ul><li><ahref="https://wulc.me/2021/11/14/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%281%29-%E5%B8%82%E5%9C%BA%E8%A7%84%E5%BE%8B/">张潇雨的个人投资课(1)-市场规律</a></li><li><ahref="https://wulc.me/2021/11/20/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%282%29-%E6%8A%95%E8%B5%84%E5%B7%A5%E5%85%B7%E4%B8%8E%E8%87%AA%E6%88%91%E5%B1%80%E9%99%90/">张潇雨的个人投资课(2)-投资工具与自我局限</a></li><li><ahref="https://wulc.me/2021/11/28/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%283%29-%E6%8A%95%E8%B5%84%E7%BB%84%E5%90%88%E6%9E%84%E5%BB%BA/">张潇雨的个人投资课(3)-投资组合构建</a></li></ul><p>上面的课程的主讲人张潇雨，其实是笔者通过 <ahref="https://www.xiaoyuzhoufm.com/podcast/5e74543a418a84a046c4e50e">得意忘形</a>这个播客认识的，因为下半年开始，住的地方离公司远了一些,通勤时间也变长了，于是便开始听播客，其中一个印象比较深刻的播客便是得意忘形，里面的一些观点对比着还是挺有启发的，值得一听，这个播客的简介如下&gt;《得意忘形》是一个主张追求个体自由与探寻真理的媒体计划。我们见证了第一次工业革命以来科技对人类社会的极大推动与助益，但也意识到资本主义与市场经济不可避免地催生了消费文化、剥夺了个人价值、并窃取了大众时间。带着对生命的有限性与无目的性的敬畏，我们试图为读者与听众提供更全面的觉察自我与认知世界的工具，以不断重建当下的方式穿越时间、抵达生活的本质。</p><p>后来顺藤摸瓜，找到了孟岩的播客<ahref="https://www.xiaoyuzhoufm.com/podcast/611719d3cb0b82e1df0ad29e">无人知晓</a>，同时了解他所打造到<ahref="https://qieman.com/">且慢</a>这个产品的过程，以及后续离开且慢后独立创业所做的产品<ahref="https://youzhiyouxing.cn/">有知有形</a>，这也是笔者近期使用较为频繁的一个app</p><p>最后，在学些这些看起来跨度有点广的内容过程中，笔者觉得有一点是在各个领域都适用的，那就是<strong>不要盲信各种观点和知识，而是要保持独立思考的能力，要时刻思考这些内容是否合理，放到今天是否还适用，放到自己身上是否适用，毕竟尽信书不如无书</strong></p><h2 id="关于生活">关于生活</h2><p>这一年基本也还是在公司和住的地方之间穿梭，过着两点一线生活；虽然来北京2年多了，但那些著名的景点基本都没去过，以至于我妈每次跟我打电话都跟说我白去北京了~</p><p>由于周六日经常回公司健身、看书/paper、刷知乎/b站、写文章(这一年写的文章基本都是周六日+各种节假日写的，因为上班真的很忙。。。)，以至于一些不明真相的人都觉得我“卷”（hhh，这个词属实是被滥用了），但是他们可能不知道的是，我周六日会公司都会把lark给关了，不会用工作上的事情去打扰别人，也不希望别人打扰自己，专心做那些自己很想做但是由于在工作日太忙而无法去做的事情</p><p>我也常常问自己：你是有在体验生活吗？你是在做苦行僧吗？但后来我慢慢发现，<strong>撸铁跑步带给我的满足感，并不亚于去探店吃到了心仪已久的美食；写完一篇文章、看到博客又记录了自己的变化所带来的的成就感，并不亚于去攀登了一座险峻的高峰；了解到一些表面现象背后的本质原因所带来的震撼，并不亚于看到了光怪陆离的自然风光；AC一道题目所带来的快感，也不亚于通关一款制作精良的游戏。</strong></p><p>说了这么多，并不是说前者就比后者好，恰恰相反，我觉得上面提到的很多“不亚于”的事情，都是很有意义的。只是相同的一件事情，对于不同的人来说意义是不同的，也许在外向的人那里是补充精力的，但在内向的人那里则是消耗精力的，笔者觉得关键还是要学会让自己每天过得充实而快乐。</p><p>同时，需要<strong>将快乐和快感区分开</strong>，也体会过刷了一下午的手机后的那种空虚感，后来看到了<a href="https://www.zhihu.com/people/ze.ran">ze ran</a>写的一段话，才意识到那是下面说的快感，而不是快乐</p><blockquote><p>快乐和快感不同，快乐是要去争取的，是要付出努力的，是可以回味的；而快感是廉价的，是短暂的，是空虚的。不是说快感不好，而是在快感过去后，不用叹息快乐短暂，因为逝去的并不是快乐。努力拼搏，学习锻炼，也不用向别人诉说自己的辛苦，因为收获的是快乐</p></blockquote><h2 id="关于健康">关于健康</h2><p>今年体检各项指标也都还算正常，父母检查出了一些小毛病，但总体并无大碍</p><p>在运动上，刚刚看了下在内部健身房累积签到的次数，大概是 216 次，而2021 年的大概是 80 次，大概 4~5 天一次</p><p><img data-src="https://wulc.me/imgs/gym2021.jpeg" height="20%" width="20%"></p><p>至于运动量，之前用的小米手环运动模式太少，比较难记录，所以双 11换了荣耀的 GS PRO手表，是真的好用，运动模式支持也比较多，所以也基本记录了 12月份基本数据</p><p><img data-src="https://wulc.me/imgs/exercise2021.jpeg" height="50%" width="50%"></p><p>今年下半年开始有了减脂和增肌的计划，所以也学些了不少这方面的知识，经过饮食和训练，现在的总体的体脂也下降到14%左右，六块腹肌的轮廓已经隐隐欲现了，希望明年的总结能够放上八块腹肌的照片hhh</p><p><img data-src="https://wulc.me/imgs/fat202201.jpg" height="50%" width="50%"></p><p>这里也附上减脂过程中做的一些笔记，基本上知乎一搜一大堆,这个回答比较全面，可以看一下 <ahref="https://www.zhihu.com/question/361928955/answer/1774167080">如何把体脂降到15%?</a></p><p><img data-src="https://wulc.me/imgs/reduce_fat.jpg" height="50%" width="50%"></p><p>另外就是饮食和睡眠了，说实话这两点做得不够好，主要的问题是<strong>情绪性进食和报复性熬夜</strong>，前者往往出现在工作时比较繁忙时，总是忍不住会吃很多零食和正餐，后者则是因为工作、生活等压力等原因，工作日晚上容易熬夜无意义的刷手机等，当前已经意识到这个问题了，也有尝试小方法，希望明年总结的时候不会再被这两个问题困扰吧</p><h2 id="小结">小结</h2><p>如同去年的小结的短语一样，“写这篇总结文章的过程，是一个不断的自我剖析和自我反思的过程，剖析自我到底想成为一个什么样的人，反思自我还能不能做得更好”；而今年我觉得还能再加一句，这也是一个对自己诚实的过程，做的好与不好都需要暴露给自己，多问自己几个为什么；惟其如此，才能知道自己真正想要的是什么，下一步应该怎么走。</p><p>总体来说，去年的工作还算顺利、学习热情没有减退、生活能带来快乐、家人与自己身体还健康，感觉已经比较幸运了；至于技术/沟通/管理/投资等各种能力，在今年仍需慢慢培养，同时需要学会爱惜自己的身体。最后，也祝愿看到这里的你身体健康，心想事成。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;2022
年如期而至，如果说上一年还是在犹豫是否要写年度总结，今年则是早有规划要写一下这一年的总结。因为笔者逐渐意识到，&lt;strong&gt;记录过去的自己是一件很有意义的事情&lt;/strong&gt;，这个话题说大了可以上升到各种哲学领域，但对于笔者来说，最重要的意义是能看到过去的自己是一个什么样的人，如今有了什么样的变化，发生了什么事情让自己有了这样的变化，这种跨度一年的自我觉察还是很有意思的。&lt;/p&gt;
&lt;p&gt;而比起 vlog
等形式，笔者更倾向于用文字这种形式来记录，因为在写作过程中，会启动大脑的“慢系统”，能更细致地去回顾和组织过去发生的事情，正好趁着放假的时间去梳理这一年的各种事情。&lt;/p&gt;</summary>
    
    
    
    <category term="闲话几句" scheme="https://wulc.me/categories/%E9%97%B2%E8%AF%9D%E5%87%A0%E5%8F%A5/"/>
    
    
    <category term="闲话几句" scheme="https://wulc.me/tags/%E9%97%B2%E8%AF%9D%E5%87%A0%E5%8F%A5/"/>
    
  </entry>
  
  <entry>
    <title>张潇雨的个人投资课(3)-投资组合构建</title>
    <link href="https://wulc.me/2021/11/28/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE(3)-%E6%8A%95%E8%B5%84%E7%BB%84%E5%90%88%E6%9E%84%E5%BB%BA/"/>
    <id>https://wulc.me/2021/11/28/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE(3)-%E6%8A%95%E8%B5%84%E7%BB%84%E5%90%88%E6%9E%84%E5%BB%BA/</id>
    <published>2021-11-28T08:51:23.000Z</published>
    <updated>2023-07-16T15:28:28.189Z</updated>
    
    <content type="html"><![CDATA[<p>本文是听了 <ahref="https://www.igetget.com/course/%E5%BC%A0%E6%BD%87%E9%9B%A8%C2%B7%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE?param=XDGhXPc6fL6&amp;token=YPZNRwQ0qL1MVEpfwzK3lmz4kgWEnx">个人投资课</a>后的一些笔记，课程主要内容可划分为如下四个部分：<strong>市场规律、投资工具、自我局限和投资组合构建</strong>，前三个部分主要讲一些投资过程中最容易犯的错误，最后一部分则是讲一些具体的投资方法。</p><p>本文是最后一部分的内容，介绍了资产配置的必要性、大类资产基本分类即特点、以及三种经典的资产配置方法。课程前面内容介绍可参考</p><ul><li><ahref="https://wulc.me/2021/11/14/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%281%29-%E5%B8%82%E5%9C%BA%E8%A7%84%E5%BE%8B/">张潇雨的个人投资课(1)-市场规律</a></li><li><ahref="https://wulc.me/2021/11/20/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%282%29-%E6%8A%95%E8%B5%84%E5%B7%A5%E5%85%B7%E4%B8%8E%E8%87%AA%E6%88%91%E5%B1%80%E9%99%90/">张潇雨的个人投资课(2)-投资工具与自我局限</a></li></ul><span id="more"></span><h2 id="资产配置与大类资产">资产配置与大类资产</h2><p>这部分主要强调了资产配置的重要性，同时介绍了进行资产配置时有哪些候选，即大类资产的分类</p><p>资产配置的重要性体现在其能较好回报的波动性，或者说最大回撤；课程里给出了如下的例子</p><blockquote><p>著名的投资大师耶鲁捐赠基金的掌门大卫斯文森说过，我们在市场上不管做什么，本质上都是在做三件事情，<strong>资产配置，市场择时和产品选择</strong>，</p><p>在 1986 年，三位著名学者发表了一篇叫做投资组合业绩表现的决定因素(<ahref="https://www.cfainstitute.org/en/research/financial-analysts-journal/1995/determinants-of-portfolio-performance">Determinantsof PortfolioPerformance</a>）的论文，里面得出一个结论，<strong>投资组合回报的波动性有93.6%都是由资产配置决定的，而市场择时、产品选择的贡献可以忽略不计</strong>;等到了 1991年，另外三位学者对这项研究进行了后续的补充，在更换了一些研究对象和研究方法之后，他们得出的结论是投资组合回报的波动性有91.5%是被资产配置决定的，其他两项因素可以忽略不计,说白了就是再次肯定了之前的研究结论</p></blockquote><p>这个结论听起来很反直觉，比如说现在上证指数还没回到 07年的高峰，难道不能说明择时能力很重要吗？买到涨停股和跌停股，一天的差别就是20%，难道不能说明选择产品的能力很重要吗？笔者觉得<a href="https://www.xintuoyi.com/study/21.html">这篇文章</a>里给出了这个结论适用的几个前提比较合理</p><blockquote><p>1、时间分散。为了防止配置资产时建仓成本过高，建议逐步增加至目标仓位，在市场高峰时，尤其要谨慎。2、不同产品间分散投资。<strong>投资组合的目的不是为了寻找涨停股，而是为了获取持续稳健的收益</strong>。分散投资可以降低单支股票选择所带来的影响。3、长期策略。短期投资和长期投资的业绩决定因素不一样。<strong>当投资时间覆盖一个经济周期以上时，选择具体产品的能力和选时能力的作用就会很小</strong>。</p></blockquote><p>因此，这里提到的资产配置，核心目标<strong>是在管理最大回撤这个指标的前提下，获得长期收益</strong></p><p>那么，在构建资产配置时，有哪些候选可以选择，或者说有哪些大类资产可供选择呢？因为大类资产配置对最大回撤指标和组合的波动性具有决定性的影响。</p><p>大类资产的似乎没有严格的分类，具体可参考这个问题 <ahref="https://www.zhihu.com/question/36726039">大类资产有哪些类？以那些标准分类？</a>；而从普通人的视角来看，常见的可投资的大类资产有</p><ul><li>权益类：主要就是股票市场，如A股、美股、港股、其他国家股等</li><li>固定收益类：债券、银行理财投资等</li><li>大宗商品：基本可归为能源、金属和农产品三大类(如原油、黄金、小麦等)</li><li>房地产：<ahref="https://zh.wikipedia.org/zh-sg/%E4%B8%8D%E5%8B%95%E7%94%A2%E6%8A%95%E8%B3%87%E4%BF%A1%E8%A8%97">房地产信托投资基金</a></li><li>现金：货币基金或短期债券</li></ul><p>股票型基金前面都讲得比较多了，这里主要介绍债券和大宗商品(后面投资组合也会有部分相应介绍)</p><p>关于债券, 以下几点值得关注(1)债券主要分为<strong>利率债和信用债</strong>；前者有国家背书(如国债、地方政府债、中央银行票据等)，后者则没有(如金融债、企业信用债)，发行人信用情况是影响债券收益率的重要因素。<strong>信用债的风险大于利率债</strong>(2)债券的价格于利率是呈反比的，也就是说，当利率上升的时候，债券的价格是下降的；相反，利率下降的时候，债券的价格是上升的，关于利率如何影响债券、股票等价格可以参考<ahref="https://www.zhihu.com/question/331071222/answer/730833529">利率是如何影响大类资产价格的?</a>(3)债券同样有基金，关于债券基金的一些细节可以参考 <ahref="https://zhuanlan.zhihu.com/p/108781882">2021，终于有人把债券基金说清楚了</a>，里面给出的一些收益率的参考数字如下</p><blockquote><p>短债基金长期平均年化在3%-4%； 长债基金长期平均年化在5%-6%；二级债基比较优秀的，长期平均年化在可以到7%-8%左右。</p></blockquote><p>关于大宗商品，以下几点值得关注(1)比较严重的金融危机或者战争危机来临的时候，黄金可以起到一定的避险作用，但这不意味着它在危机时价格一定会涨(如2008年金融危机，金价同样跌到了30%之多)(2)从1973年统计到2017年，黄金总体回报率在6.9%左右；能源和产品类的总体回报率在5~6%之间，比国债高，比股票低；但这两种资产的波动和回撤比股票和债券都要高一些，黄金的最大回撤曾经超过60%，而大宗商品整体曾下跌超过80%。</p><p>有了相应地原材料，接下来就是如何组合这些原材料了，下面阐述的三种资产配置的方法是按照<strong>预期收益从低到高，预期波动程度从低到高，涉及的资产种类复杂程度也从低到高来排列</strong>的。虽然世界上没有绝对正确的资产配置方案，这三个组合都是大师推荐并经过长期的时间验证过的，所以从他们开始学习是个不错的选择。</p><h2 id="永久组合">永久组合</h2><p>这个组合是<ahref="https://book.douban.com/subject/27111607/">哈利·布朗的永久投资组合</a>，是简单来说，就是25%的股票，25%的国债，25%的现金和25%的黄金</p><p>整体思想就是不追求高回报，但追求长期的稳定以及过程的顺利，<strong>25%的股票负责整体回报，25%的国债会带来稳定收益，而现金和黄金的部分会在极端的市场环境下提供保护</strong>；日常情况下永久组合无法跑赢偏重股票的组合，但如果遇上经济危机和金融海啸，在别人的投资都跌掉30%、40%的时候，如果你使用的是永久组合，那么你的损失会小很多，很容易保持很良好的心态，更容易把投资长期的坚持下去，这也是永久这个名字的意义所在。</p><p>那么怎么衡量这个永久组合的表现？课程里将其与一个通用的60、40组合做了对比</p><blockquote><p>有个标准叫做60、40组合，其实就是60%股票，40%国债这样一个极其简单的组合，这个组合被公认为是最简单，历史上的收益和风险也最被广泛的接受的一个组合。可以说任何的资产配置方案，都是从6040这个极简的配置方法出发的，所以它就变成了业界公认的比较基准之一。</p><p>那接下来我们就比较一下，我们用<strong>25%的美国标普500指数基金，25%的美国10年国债指数基金，25%的黄金指数和25%的短期货币市场基金(即现金)</strong>来实现永久组合的配置。从1973年计算到2017年，这45年的历史回报那么得出的结果是怎么样的呢？</p><p>永久组合的年化回报是8.15%，最大回撤12.42%，<ahref="https://zh.wikipedia.org/wiki/%E5%A4%8F%E6%99%AE%E6%AF%94%E7%8E%87">夏普比率</a>是0.560、40组合的指标是年化回报9.76%，最大回撤29.69%，夏普比率 0.52而对于标普500指数为例，这组相关指标分别是年化回报10.52%，最大回撤50.21%，夏普比率是0.43</p><p>根据这组比较，可以很明显的看出几个规律第一，永久组合的长期回报8.15%，的确跑输了60、40组合的9.76%，当然也跑输了整个股市10%以上的回报，落后的幅度基本在每年1~2%左右。第二,长期收益率的落后换来的是过程的极大平稳。如果单纯投资股市，你要面临自己资产曾经腰斩，跌到一半的可能性，哪怕是60、40组合，最大回撤也有30%，但是永久组合有有现金和黄金的保护，最大回撤只有12%左右第三，不管是永久组合还是60、40组合，都明显提高了投资的夏普比率，也就是投资者每承担一份风险，获得了更高的超额回报。也就是说这个资产配置的确提高了我们投资的效率</p></blockquote><p>那具体要怎么配置呢？课程给了如下建议</p><p><strong>1.股票</strong> - 原则：不要轻易选股，要尽量降低成本 -用市面上能找到的正规可靠低成本的股票指数基金来代表股票的部分 - 4家美国目前最大最可靠的基金公司：安硕、先锋、到富和富达，他们提供的指数基金产品都非常全面，而且价格低廉，</p><p><strong>2.债券</strong> -一般用美国或者中国的国债作为底层资产，由于国家信用背书，这两种产品都是非常安全的-债券的种类也非常多，在具有专业知识的情况下，可以用其他的一些债券品种来充当这个部分的底层资产，但是选择要非常谨慎；详细可参考前面列出的关于债券的链接</p><p><strong>3.黄金</strong> -可以买入实体的黄金，更方便的方法是买入和黄金挂钩的基金</p><p><strong>4.现金</strong> -在国内可以放入活期存款，或者买入期限比较短，比如3~6个月的货币基金而 -如果是外币，可以买入各大基金公司提供的美国三个月短期债券基金或者国债货币市场基金</p><p>值得注意的是，这里的组合更多是一个框架，可以灵活地进行调整，如(1)<strong>具体成分的选择</strong>。比如在选择中国的股票指数基金的时候，可以加入香港恒生指数，甚至中概股指数，这些都是可以的，没有绝对的谁优谁劣；更多的是自己的判断和偏好，甚至有些专业人士比较喜欢加入行业型的指数基金，比如说医疗行业，消费行业等等，但是前提是你得有专业级的判断(2)<strong>地理位置的选择</strong>，之前也介绍过，很难判断一段时间内哪些国家和地区的股市涨得最好，所以在投资的地理维度上保持多元分散也是有意义的。在课程中常用中国和美国的产品来举例，这是我们相对最了解的两个国家，但如果对其他国家有投资偏好，也可以加进自己的选择。比如说很多基金经理喜欢投资所谓的新兴市场，因为这些地区的经济增长更快，或者有的人觉得在漫长的增长停滞之后，日本经济会迎来复苏，所以他们愿意配置一些日经225指数基金(3)<strong>每类资产比例的大小</strong>。比如永久组合是股票、债券、黄金、现金4等分的一个中庸的组合，但如果你希望长期回报更高，同时愿意接受多一点的波动和回撤，那么自然就可以少投资一点国债和现金，多加一些在股票上</p><h2 id="全天候组合">全天候组合</h2><p>这个组合的提出者是<ahref="https://zh.wikipedia.org/wiki/%E9%9B%B7%C2%B7%E9%81%94%E5%88%A9%E5%A5%A7">雷·达利奥</a>，是桥水基金创始人之一，这个全天候策略产品当前也是桥水基金的主打产品之一，管理有几百亿美元之多，而且表现不俗，尤其在2008年和2018年，整体环境不好的时候，都取得了可观的正回报。</p><p>但这个策略的所有细节，是超过1500名桥水员工经过多年打磨和研究得出来的，而且是非常动态的。作为普通投资者，我们不可能也没有必要全盘复制他们的方法，而且也确实做不到。但我们可以按照他们的思路构建自己的组合，达里奥也在很多场合给普通投资者推荐过他全天候策略的简化版，普通人通过这个版本也能达到和桥水基金相近的风险和回报，并且能在不同的经济环境下取得收益。</p><p>具体的配置是：<strong>美国大盘股18%，美国小盘股3%，其他发达国家股票6%，新兴市场国家股票3%，10年期美国债券15%, 30年期美国债券40%，大宗商品和黄金各占7.5%</strong>这个配置有一下几个特点</p><ol type="1"><li>全天候组合对 30% 的股票部分进行了细化,把它们分配给了美国、其他发达国家和发展中国家(所谓新兴市场）三个部分，这个也是之前一直说的多元分散自己的投资组合。</li><li>比起永久组合，简化版的全天候组合增加了一个大宗商品类的资产。<strong>这类资产往往被认为和通货膨胀挂钩比较多，可以在通胀比较严重的时候给投资组合提供回报</strong>。换种角度也可以理解成，达利奥觉得单独投资黄金还不保险，还把一部分的额度分给了大宗商品来一起控制最大回撤</li><li>从资产大类来看，全天候组合其实就是30%股票，55%政府债券，7.5%的黄金和7.5%的大宗商品，也就是说这个配置方案比之前的永久组合更激进一些，因为股票占比是更高的</li></ol><p>那这个组合的具体表现如何</p><blockquote><p>从1973~2013年的历史来看,全天候组合：年化回报9.5%，最大回撤14.59%，波动率8%左右，夏普比率是0.51。60、40组合：年化回报9.76%，最大回撤29.69%，波动率10%左右，夏普比率是0.52。永久组合：年化回报8.15%，最大回撤12.42%，波动率6.88%，夏普比率是0.5</p><p>在这组数据里我们很容易看到，全天候组合和60、40组合的回报基本相同，但不管是波动率、还是最大回撤，都要小得多，毕竟不到15%的回撤，比起30%来还是舒服很多的。当然了永久组合因为有25%现金的存在，所以波动和回撤都是最小的，但这也是用降低1~1.5% 左右的长期收益率换来的。</p></blockquote><p>至于具体的产品选择，基本跟前面提到的一样，只是课程里重申了选择产品的主要原则：<strong>来自大基金公司，成本费用低廉，没有基金经理主动的干预，只是被动地跟踪市场</strong>。</p><p>另外这部分还提到了一个组合管理与资产配置中另一个重要的概念：<strong>再平衡(rebalance)</strong>；即当你组合里各种资产的比例，随着市场涨跌已经偏离了最初设定的时候，要通过操作把它恢复成一开始的比例，有点像把手机或者电脑一键恢复成出厂设置。</p><p>那么这里有两个问题需要回答，第一，我们为什么要再平衡？第二，我们什么时候应该做再平衡？这两个问题，投资学术界和实战界都有很多经验总结</p><p>针对第一个问题，在平衡背后有两个理论依据 (1)<strong><ahref="https://zh.wikipedia.org/wiki/%E5%9D%87%E5%80%BC%E5%9B%9E%E6%AD%B8">均值回归</a>理论</strong>，即一个资产的价格最终都会回归到它的平均水平。根据这个理论，如果一个资产涨得比较快，在组合里占比比较大，我们对它的预期就是接下来的回报会下降；而如果一个资产之前跌了很多，接下来很可能会上升。所以再平衡的过程就是卖出上涨的资产，买入下跌资产的过程，这样会带来一些超额收益(2)行为金融学上的原理：<strong>大部分人都更喜欢追涨杀跌</strong>，所以再平衡实际上是在高点卖出，在低点买入，实际上是一个相反的举动，这样长期坚持下来也会有一些超额收益</p><p>针对第二个问题，学术界也做过很多研究，最后发现不论是1个月、3个月、6个月还是12个月再平衡一次，差距都不是很大。所以作为普通投资者，我们<strong>每12个月再平衡一次就基本足以，这样也能降低交易成本</strong>。</p><p>另外，课程里还提到可以<strong>给自己的再平衡设置一个幅度</strong>，比如说永久组合4个资产开始各占25%，可以设定一旦某个资产涨到35%的时候，就把它卖出，然后买入占比最低的资产，对于全天候组合也是一样的</p><p>最后，关于全天候组合的更多阅读资料可参考 <ahref="https://www.zhihu.com/question/22929725/answer/23105457%9E%E6%AD%B8">RayDalio 的「全天候交易策略」是什么？如何理解？ - 师纪瑞的回答 -知乎</a></p><h2 id="斯文森组合">斯文森组合</h2><p>这个组合是<ahref="https://zh.wikipedia.org/wiki/%E5%A4%A7%E5%8D%AB%C2%B7%E6%96%AF%E6%96%87%E6%A3%AE">大卫·斯文森</a>管理耶鲁捐赠基金时提出的一个组合，当时的斯文森发现了2 个秘密</p><ol type="1"><li>要想保证长期的回报高，整个投资组合一定要偏重于股权(也就是股票）。现在也是整个业界的共识，但是在80年代斯文森接管耶鲁基金的时候，绝大部分的大学捐赠基金都更喜欢债券、房地产、黄金这样的投资产品，不太敢下重注在股票这个品类上。(2)多投股权会带来一个的问题，就是波动很大，那么有没有一些股权品类是相对比较稳定，不太随着市场上上下下波动剧烈的呢?斯文森就找到了这么一个品类，说出来你也很熟悉,就是风险投资和私募股权投资，也就是我们常说的 <ahref="https://zh.wikipedia.org/wiki/%E9%A3%8E%E9%99%A9%E6%8A%95%E8%B5%84">VC</a>和对冲基金。</li></ol><p>但是这里一个显著的问题是，普通投资者很难复制这个方法，因为 VCP、对冲基金这样的机构一般是不会对普通投资者开放的；因此，斯文森提供了一个简化版的耶鲁投资法，<strong>对于个人投资者，有三个核心的原则和建议</strong></p><ol type="1"><li>一个投资组合里应该有6种不完全相同的资产，但总体来说应该以股票为主，因为从长期来看，股票永远是回报最高的选择。</li><li>投资者应该按照自己设定的时间频率来给组合进行再平衡，一般来说一年一次就可以。</li><li>市场很难战胜，所以相对个股投资,那些低成本的指数基金是很好的选择</li></ol><p>其实这三点基本原则跟前面 2种组合大同小异，斯文森根据这个思路推荐了一个这样的资产配置方法：<strong>美国大盘股20%、其他发达国家股票20%、新兴市场国家股票10%、30年期的美国债券15%、通胀保护债券15%、房地产投资信托20%</strong>。</p><p>可以看出啊这个组合比我们之前介绍的组合要更偏重股票一点，整体分配给股权的部分达到了50%。另外斯文森也比较喜欢房地产信托基金，房地产信托长期收益和股票类似，所以这个组合虽然成分比较多，操作起来呢也复杂一些，但总体收益要比之前介绍的两个组合要高一些，当然波动也会更大</p><p>那这个组合的收益情况如何？还是以1973年到2013年这个区间为例，斯文森组合的年化回报10.16%，最大回撤41.6%，波动率是10.68%，夏普比率是0.46，与前面的一些组合相比，回报是最高的，但是最大回撤也是最大的，夏普比率也是最低的</p><h2 id="因子投资">因子投资</h2><p>因子投资(<ahref="https://en.wikipedia.org/wiki/Factor_investing">Factorinvesting</a>)简单来说，就是尝试找到股票涨跌和表现的原因(即因子)，然后基于这些因子来找到更好的投资产品的方法</p><p>以大盘股/小盘股的概念为例，简单来说公司市值规模比较大的就叫大盘股，规模小的就叫小盘股。历史经验告诉我们，小盘股的长期收益通常要比大盘股更高，即规模是影响股票表现的一个因素，也就是这里说的因子。</p><p>学术界在二十几年前就已经开始研究因子了，这个领域的泰斗级人物<ahref="https://zh.wikipedia.org/wiki/%E5%B0%A4%E9%87%91%C2%B7%E6%B3%95%E9%A9%AC">尤金·法马</a>，与同事提出了<ahref="https://zh.wikipedia.org/wiki/%E4%B8%89%E5%9B%A0%E5%AD%90%E6%A8%A1%E5%9E%8B">三因子模型</a>，股票的回报至少可以从三个角度来解释：<strong>市场因子、规模因子和价值因子</strong>。</p><p>具体一点就是股票的回报至少可以分解为三个部分(1)市场的整体回报，即每只股票随着大势上上下下来回波动带来的回报，(2)规模，比如说小公司的长期回报比大公司更好(3)价值因子，简单来说就是比较便宜的股票，长期收益会比贵的股票更好</p><p>值得注意的是，这里说的这三个因子只能解释股市的一部分表现，而不代表所有，因为市场的复杂性往往通过这几个因子无法完全解释得通；那这些因子有什么实际的指导意义么？课程给出了如下建议</p><blockquote><p>通过这些因子，可以大概解释很多明星投资人和基金经理带来的超额回报到底是从哪来的了比如说我们之前课程中介绍过的股神彼得林奇，他就以偏爱高增长的小盘股而著称，他买的很多股票都带有这种性质，而我们都知道巴菲特非常在意股票的价格，所以他的超额回报就有一部分来自价值因子虽然因子肯定没法解释他们的全部天才，但是也给我们提供了一个重要的思路，这时候一个想法就很自然的诞生了。假设我们按照股神彼得林奇或者巴菲特的方法，<strong>系统性的投资小盘股或者估值比较便宜的股票</strong>，不就相当于复制了他们一部分的能力了吗？换个角度说，被动投资指数是我们最倡导的投资策略，而靠主动选股持续的打败市场非常难，但是<strong>因子投资给了我们这么一个机会，就是用一种介于主动和被动之间的投资方法，把我们的长期收益提高那么一点点，而且还不用有特别高深的专业知识</strong>。</p></blockquote><p>那现在业界公认最有效的因子都有哪些？总结下来主要有主要有这么6个</p><ul><li><strong>规模因子</strong>，认为小盘股长期比大盘股回报要高一些</li><li><strong>价值因子</strong>，认为价格便宜的股票长期要比贵的股票收益高一些</li><li><strong>低波动因子</strong>，认为总体波动程度比较小的股票，长期比波动大的股票回报要高一些</li><li><strong>红利因子</strong>，认为高分红的股票长期表现会更好</li><li><strong>质量因子</strong>，认为质地比较好的公司的股票长期回报会更高</li><li><strong>动量因子</strong>，认为过去一段时间股价表现比较好的股票，接下来表现会更好</li></ul><p>这六大因子就是目前投资界已经被学者和实战派们反复证明了长期有效的因子，不仅经受住了统计学上的考验，也是很符合商业逻辑的；在具体的操作上，因子投资最终也可以落到买基金上，比如之前提到过的各种指数基金公司，像安硕、先锋等等，旗下都有费率很低的因子投资指数基金；国内各大基金公司都推出了像各种红利基金、价值基金、低波动基金等等相关的产品，</p><p>但是有一点值得关注，<strong>和大类资产的表现一样，因子的表现也有周期性和轮动性</strong>。换句话说，如果随便看5年甚至10年，有可能某一类因子表现很好，但另一类就很差，如果你正好选到了比较差的因子，那么还不如直接投资最普通的指数基金；比如从2001年到2007年，动量因子、价值因子、低波动因子和规模因子表现都不错，但是质量因子反而跑输大盘，而从2007年之后质量因子开始表现不错，但是动量因子和价值因子就没有那么好了，应对手段还是之前提到的大原则：<strong>多元分散</strong>，之前我们说的是要在资产种类上分散，那么在因子上也是可以分散的</p><h2 id="定投指数基金">定投指数基金</h2><p>这部分主要介绍了指数基金的一些基础知识，包括指数基金的一些分类，市盈率和市净率的含义。同时建议定投宽基指数基金，但是<strong>在国内</strong>这个建议是否适用还需要进一步考究，这部分在<ahref="https://wulc.me/2021/11/20/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%282%29-%E6%8A%95%E8%B5%84%E5%B7%A5%E5%85%B7%E4%B8%8E%E8%87%AA%E6%88%91%E5%B1%80%E9%99%90/">张潇雨的个人投资课(2)-投资工具与自我局限</a>，这里不再赘述</p><p>根据指数投资标的涵盖的范围，可以大概将指数分为：宽基指数、行业指数、策略指数；</p><ul><li><strong>宽基指数</strong>：就是我们最常见的没有任何主观因素的，直接按照规则被动的复制市场表现的股票指数。比如沪深300指数、中证500指数、创业板指数等</li><li><strong>行业指数</strong>：在各个行业里按照一定的标准来选取公司，方便那些对某个行业有偏好的投资者来投资，如所谓的消费行业指数，医药指数，军工指数或者养老指数，</li><li><strong>策略指数</strong>：这个策略性基金和我们之前说到的因子投资基本是一回事，如大成中证红利指数基金、景顺长城、中证500低波动指数基金，申万零信沪深300价值指数基金、嘉实基本面50指数基金。这些基金本质上就是在把因子投资的理念应用在中国股市上，上面提到的几个基金使用了红利因子，低波动因子，价值因子和质量因子的理念</li></ul><p>关于行业指数，课程里着重强调了如下观点</p><blockquote><p>以我个人的意见，我觉得你要想投资某个行业的行业指数，不妨先问自己一个问题，那就是你对这个行业有没有超出平均水准的判断力？比如说很多人都会说看好中国的医疗行业，看好中国的养老行业，所以想投资相关的指数基金这个时候我总会反问一个这样的问题，<strong>你的这种看好有什么超出常人水平的依据吗</strong>？比如说我们都知道中国人口老龄化的问题，都知道随着生活水平的提高，未来医疗养老服务会不断升级,那么你知道的这些信息是不是已经被反映在指数基金的价格里了？换个角度说，你有多确定医疗行业在未来你的投资期限之内，比如说2年3年5年之内能跑赢大盘，如果你只是在媒体上看了一些消息，在公众号里看了几篇文章，就对一个行业觉得看好的话，我是不建议你投资行业指数基金的,宽基指数可能更适合你，而如果你是某个行业的从业人员或者专家，又或者对某个行业的观察和积累很深，那么投资行业指数就会是不错的选择。对于我自己来讲，我觉得我对绝大多数行业都没有判断能力，所以投资宽级指数获得市场平均回报就很知足了</p></blockquote><p>所以课程里的建议是<strong>投资最常见也最经典的宽基指数，至于行业指数和策略指数，可以作为你核心持仓的一种补充，在自己能理解和接受的范围之内做一些配置就可以了</strong></p><p>基金通常还会被分为场内基金与场外基金，两者的区别可参考这个回答，<ahref="https://www.zhihu.com/question/30150662/answer/1041651863">场内基金与场外基金各有什么优劣势？- 简七的回答 - 知乎</a>，简单对比如下图(图片也摘自这个回答)</p><p><img data-src="https://wulc.me/imgs/fund_compare.jpeg" height="80%" width="80%"></p><p>关于基金的一些基础知识，还可参考这个专栏 <ahref="https://zhuanlan.zhihu.com/p/22866377?refer=fundslearning">从0开始学基金投资</a>，写得比较通俗，同时也比较全面了</p><p>另外，课程里还提到经典的 PE、PB及其百分位的概念，这部分内容可以参考<ahref="https://zhuanlan.zhihu.com/p/345397436">一文带你搞懂市盈率、市净率、市销率</a>，笔者觉得以下几点可以参考</p><ul><li>在公司每年都能稳定盈利的条件下，市盈率(PE)越低，散户投资回本的速度越快</li><li>低市净率(PB)意味着投资风险小，万一上市公司倒闭，清偿的时候可以收回更多成本</li><li>根据市盈率百分位加仓或止盈，<strong>30%以下进入加仓区间，70%以上进入止盈区间</strong>，可采取分批止盈方法</li><li>市盈率的局限<ul><li>市盈率只反映过去和当下的市场</li><li>金融相关行业不适合用，例如银行、保险、证券业</li><li>周期行业不适用，例如钢铁、有色金属、化工等</li><li>战略性亏损的企业不适用，例如京东、亚马逊、特斯拉等</li></ul></li><li>市净率弥补市盈率，即使因为行业周期出现盈利能力的波动，对于市净率也不会有过大的影响</li><li>牛市看市盈率，熊市看市净率</li></ul><h2 id="课程结束语">课程结束语</h2><p>结束语主要强调两点 1.从头到尾学完了之后，应该觉得投资真的很难，真的挺有风险，市场很强大，我们能掌控的事情其实很少的；当你<strong>对市场、对投资这件事更有敬畏心</strong>之后，你赚钱的几率反而会提高很多。2.<strong>语言是个功能有很大局限性的沟通工具</strong>，它是有很大的模糊性和欺骗性的，而这种模糊性和欺骗性很容易就把我们的投资旅程引入歧途</p><p>第一点比较好理解，关于第二点，课程列举了如下例子</p><blockquote><p>很多散户投资者，甚至很多专业投资人在买股票的时候都喜欢大盘蓝筹股，那么你知道蓝筹股这个词是怎么来的吗？实际上蓝筹的英文是bluechips，来自于西方赌场，因为过去的赌场里通常有三种筹码，白色的、红色的和蓝色的，其中蓝色的是最值钱的，久而久之大家就使用蓝筹股来指代那些规模大的、发展稳定的、市场形象良好的、盈利高的大公司。比如美国著名的道琼斯工业指数，一度也被称为蓝筹股指数，它在1928年创立出来的时候，就是选取的30家最大型的工业企业来代表美国股市的走势。正因为蓝筹股的这种特性，很多投资者尤其是散户型的投资者都很爱买蓝筹股的股票，因为他们觉得所谓的蓝筹股肯定是比较稳定，买起来很踏实，回报比较高的股票，更好玩的是这个概念，漂洋过海来到中国之后，大家又延伸出来了一个白马股的概念，指的基本也是那些长时间的，业绩不错，业务管理水平比较高，商业模式也比较靠得住的大公司。而由于大家都知道这些公司不错所以比起仍然在等待被挖掘的黑马，这种公司更像是人人都看得见的白马，于是白马股这个词也就传开了</p><p>那投资蓝筹股或者白马股的结果怎么样呢？ 在2012年, 研究机构 <ahref="https://www.researchaffiliates.com/home">research affiliates</a>的创始人罗布阿诺特做了一项研究，他们发现有这么一个现象，如果选取每个行业内市值最大的公司的第一名，这应该够蓝筹够白马了吧,然后跟踪他们接下来1年、3年、5年和10年期的股价表现，这些公司有比较大的概率是要跑输整个行业的其他公司的，准确说一年内跑出的概率是57%、三年是58%、五年60%、10年就是66%，跑输的收益率幅度平均在4%以上，而且这个现象横跨了世界上9个主要国家的12个行业。</p><p>另外一个统计是从1980年到2019年，每一个10年全世界市值排名前10的公司，如果你看2019年上面都是什么苹果、微软、亚马逊、谷歌、腾讯、阿里这样的公司，但你仅仅往前翻10年，这个榜单就变成了中石油、埃克森、美孚、沃尔玛、汇丰银行、碧和碧拓这样的公司。再看2000年，英特尔、朗讯、ge、德意志电信榜上有名，而1990年则是东京三菱银行、丰田、富士银行这些日本公司的天下</p><p>因此，这些所谓的大盘股蓝筹股，在每个时代不可一世，觉得怎么也不可能消失的庞大的公司，他们的位置真的有那么稳固吗？买这些公司的股票真的是稳赚不赔吗？大公司的表现就一定能超出市场平均水平，超出指数吗？</p><p>这里需要记住的一点是<strong>做投资，千万不要执着于概念，更不要靠感觉行事。白马股不代表公司股价永远不跌，绩优股不代表业绩永远优秀</strong>，</p></blockquote><p>所以我们能看到，语言和文字是很有欺骗性的，几句话能传达的信息量非常有限，如果你执着于这些说法的字面意思，很可能就会被带的越来越偏。而很多时候，语言的这种欺骗性对我们的伤害还不是最大的，因为错的东西，我们吃亏个几次可能也就长记性了，<strong>可怕的是那种说法，其实挺对，也没想骗你，但表达出来非常模糊，很容易让人误解的东西</strong>。关于这一点，课程举了如下例子</p><blockquote><p>巴菲特那句“要在别人恐惧的时候我贪婪，别人贪婪的时候我恐惧”，这句话有错吗？当然没错，可以说是一句金玉良言，但问题是这句话实在是太模糊了，模糊到每个人的理解都可能非常不同比如，别人恐惧我贪婪，这里的别人是谁？是你的家人朋友，还是你认识的散户投资者？是市场的主力资金，还是各国的央行和政府？你有数据统计有百分之多少的别人正处在恐惧情绪里吗？这些东西我们很难说的清楚;同样，怎么就叫恐惧了，是市场跌了20%叫恐惧，还是跌了50%叫恐惧？是一个月连续下跌叫恐惧还是连跌三年叫恐惧？继续再说贪婪，怎么就叫贪婪，是把全部身家拿去买股票叫贪婪，还是你敢买所有人都觉得要完蛋了的公司叫贪婪，这些还是很模糊。所以巴菲特老人家也经常吐槽大家过于追求咬文嚼字的习惯，比如他都说过，我不知道什么叫价值投资，因为所有的投资都应该叫价值投资，一个投资没价值，你还要投资吗？</p><p>更有意思的是,很多时候你会发现，哪怕有些说法实际上毫无意义，人们也会选择去听取和相信，比如陈大老师在他写的那篇很有意思的，<ahref="https://zhuanlan.zhihu.com/p/343522691">如何做一个打脸无忧的股评</a>里，就提到过，股评家最爱用一些模棱两可的话来预测市场比如他们来说，市场正在进行估值修复，什么叫估值修复？是高变成低叫修复还是低变成高叫修复，好像怎么说都行。还有比如市场情绪正在升温，怎么就叫升温了？是资金多了，还是价格涨了，还是恐惧情绪升温，大家都要逃跑了，还是怎么说都行。还有什么市场风险释放？陈老师说我就想问一问市场风险有憋着不释放的时候吗？市场风险不释放会怎么样？是原地爆炸吗？</p><p>所以在最后一节课里，我为什么要说这些？因为我知道一门我的个人投资课，不可能把世间投资的道理都覆盖到。<strong>在课程结束之后，你肯定还要去其他地方继续学习研究，不断提高自己的水平和认知，这是非常正确的。但是你不管学习什么投资知识，它的载体肯定都是语言和文字，这门课也不例外，而只要是语言就带有它的局限，就有覆盖不到的情况，具有模糊性和欺骗性。</strong></p><p>所以<strong>投资这门学科里没有金科玉律，也没有绝对真理，尽信书、不如无书</strong>，只有时时刻刻保持独立思考，求真求实，相信理性，不根据感觉形式，不去相信和追求一劳永逸的必胜之法，而和常识概率以及时间站在一起才是最最重要的。</p></blockquote><p>关于语言的局限性，得意忘形有 2 期节目有过类似的观点，可以去听一下</p><ul><li><ahref="https://www.xiaoyuzhoufm.com/episode/5e74543a418a84a046c4e5bb">#03：《降临》与语言哲学、线性思维缺陷与「时间」可能不存在吗？</a></li><li><ahref="https://www.xiaoyuzhoufm.com/episode/5e74543a418a84a046c4e55b">#34：语言的陷阱、「财务自由」的legitimacy 以及「你到底喜不喜欢我啊？」</a></li></ul><h2 id="小结">小结</h2><p>这部分内容可总结如下</p><p><strong>1.资产配置的必要性</strong></p><ul><li>投资组合回报的波动性有基本由资产配置决定的，而市场择时、产品选择的贡献可以忽略不计</li><li>资产配置的目的不是为了寻找涨停股，而是为了管理最大回撤这个指标的前提下，获得长期收益</li></ul><p><strong>2.大类资产</strong></p><ul><li>权益类：主要就是股票市场，如A股、美股、港股、其他国家股等</li><li>固定收益类：债券、银行理财投资等</li><li>大宗商品：基本可归为能源、金属和农产品三大类(如原油、黄金、小麦等)</li><li>房地产：房地产信托投资基金</li><li>现金：货币基金或短期债券</li></ul><p><strong>3.永久组合</strong></p><ul><li>25%的股票，25%的国债，25%的现金和25%的黄金</li><li>股票负责整体回报，国债会带来稳定收益，而现金和黄金的部分会在极端的市场环境下提供保护</li><li>可调整维度：具体成分、地理位置、每类资产比例</li></ul><p><strong>4.全天候组合</strong></p><ul><li>美国大盘股18%，美国小盘股3%，其他发达国家股票6%，新兴市场国家股票3%，10年期美国债券15%, 30 年期美国债券40%，大宗商品和黄金各占7.5%</li><li>产品选择大原则：来自大基金公司，成本费用低廉，没有基金经理主动的干预，只是被动地跟踪市场</li><li>再平衡(rebalance)：均值回归与追涨杀跌，12 月调整一次即可</li></ul><p><strong>5.斯文森组合</strong></p><ul><li>美国大盘股20%、其他发达国家股票20%、新兴市场国家股票10%、30年期的美国债券15%、通胀保护债券15%、房地产投资信托20%。</li><li>基本原则同上，需要 rebalance</li></ul><p><strong>6.因子投资</strong></p><ul><li>规模因子，认为小盘股长期比大盘股回报要高一些</li><li>价值因子，认为价格便宜的股票长期要比贵的股票收益高一些</li><li>低波动因子，认为总体波动程度比较小的股票，长期比波动大的股票回报要高一些</li><li>红利因子，认为高分红的股票长期表现会更好</li><li>质量因子，认为质地比较好的公司的股票长期回报会更高</li><li>动量因子，认为过去一段时间股价表现比较好的股票，接下来表现会更好</li><li>和大类资产的表现一样，因子的表现也有周期性和轮动性</li></ul><p><strong>7.基金的基本概念与常识</strong></p><ul><li>投资行业指数时需要问一下自己，看好这个行业有什么超出常人水平的依据</li><li>PE/PB 及其分位数定义</li><li>根据市盈率百分位加仓或止盈，30%以下进入加仓区间，70%以上进入止盈区间</li></ul><p><strong>8.语言的局限性与陷阱</strong></p><ul><li>语言是个功能有很大局限性的沟通工具</li><li>做投资，千万不要执着于概念，更不要靠感觉行事。白马股不代表公司股价永远不跌，绩优股不代表业绩永远优秀</li><li>投资这门学科里没有金科玉律，也没有绝对真理，尽信书、 不如无书</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文是听了 &lt;a
href=&quot;https://www.igetget.com/course/%E5%BC%A0%E6%BD%87%E9%9B%A8%C2%B7%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE?param=XDGhXPc6fL6&amp;amp;token=YPZNRwQ0qL1MVEpfwzK3lmz4kgWEnx&quot;&gt;个人投资课&lt;/a&gt;
后的一些笔记，课程主要内容可划分为如下四个部分：&lt;strong&gt;市场规律、投资工具、自我局限和投资组合构建&lt;/strong&gt;，前三个部分主要讲一些投资过程中最容易犯的错误，最后一部分则是讲一些具体的投资方法。&lt;/p&gt;
&lt;p&gt;本文是最后一部分的内容，介绍了资产配置的必要性、大类资产基本分类即特点、以及三种经典的资产配置方法。课程前面内容介绍可参考&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a
href=&quot;https://wulc.me/2021/11/14/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%281%29-%E5%B8%82%E5%9C%BA%E8%A7%84%E5%BE%8B/&quot;&gt;张潇雨的个人投资课(1)-市场规律&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a
href=&quot;https://wulc.me/2021/11/20/%E5%BC%A0%E6%BD%87%E9%9B%A8%E7%9A%84%E4%B8%AA%E4%BA%BA%E6%8A%95%E8%B5%84%E8%AF%BE%282%29-%E6%8A%95%E8%B5%84%E5%B7%A5%E5%85%B7%E4%B8%8E%E8%87%AA%E6%88%91%E5%B1%80%E9%99%90/&quot;&gt;张潇雨的个人投资课(2)-投资工具与自我局限&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="拾人牙慧" scheme="https://wulc.me/categories/%E6%8B%BE%E4%BA%BA%E7%89%99%E6%85%A7/"/>
    
    
    <category term="拾人牙慧" scheme="https://wulc.me/tags/%E6%8B%BE%E4%BA%BA%E7%89%99%E6%85%A7/"/>
    
    <category term="投资" scheme="https://wulc.me/tags/%E6%8A%95%E8%B5%84/"/>
    
  </entry>
  
</feed>
